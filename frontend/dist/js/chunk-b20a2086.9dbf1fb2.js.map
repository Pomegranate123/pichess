{"version":3,"sources":["webpack:///./node_modules/core-js/internals/object-get-own-property-names-external.js","webpack:///./node_modules/chessground/chessground.js","webpack:///./node_modules/chessground/render.js","webpack:///./node_modules/core-js/modules/es.string.split.js","webpack:///./node_modules/core-js/internals/regexp-exec-abstract.js","webpack:///./node_modules/core-js/modules/web.dom-collections.for-each.js","webpack:///./node_modules/core-js/internals/array-for-each.js","webpack:///./node_modules/core-js/internals/array-method-has-species-support.js","webpack:///./node_modules/chessground/config.js","webpack:///./node_modules/core-js/modules/es.string.includes.js","webpack:///./node_modules/core-js/modules/es.regexp.to-string.js","webpack:///./node_modules/core-js/modules/es.string.iterator.js","webpack:///./node_modules/core-js/modules/es.array.for-each.js","webpack:///./node_modules/core-js/internals/is-regexp.js","webpack:///./node_modules/chessground/anim.js","webpack:///./node_modules/chessground/api.js","webpack:///./node_modules/core-js/modules/es.array.filter.js","webpack:///./node_modules/core-js/internals/array-from.js","webpack:///./node_modules/core-js/modules/es.map.js","webpack:///./node_modules/chessground/state.js","webpack:///./node_modules/chessground/types.js","webpack:///./node_modules/core-js/internals/not-a-regexp.js","webpack:///./node_modules/chessground/drop.js","webpack:///./node_modules/chessground/drag.js","webpack:///./node_modules/core-js/internals/string-multibyte.js","webpack:///./node_modules/core-js/internals/collection-strong.js","webpack:///./src/views/game.vue","webpack:///./src/components/Chessboard.vue","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","webpack:///./src/components/Chessboard.vue?158a","webpack:///./src/views/game.vue?e05c","webpack:///./node_modules/core-js/internals/array-species-create.js","webpack:///./node_modules/core-js/internals/collection.js","webpack:///./node_modules/core-js/internals/inherit-if-required.js","webpack:///./node_modules/core-js/internals/define-well-known-symbol.js","webpack:///./node_modules/chessground/draw.js","webpack:///./node_modules/chessground/wrap.js","webpack:///./node_modules/core-js/internals/create-property.js","webpack:///./node_modules/core-js/internals/advance-string-index.js","webpack:///./src/components/Chessboard.vue?3d43","webpack:///./node_modules/core-js/internals/regexp-exec.js","webpack:///./node_modules/core-js/internals/call-with-safe-iteration-closing.js","webpack:///./node_modules/chessground/premove.js","webpack:///./node_modules/core-js/internals/regexp-sticky-helpers.js","webpack:///./node_modules/core-js/modules/es.array.join.js","webpack:///./node_modules/core-js/modules/es.symbol.js","webpack:///./node_modules/core-js/modules/es.array.from.js","webpack:///./node_modules/core-js/internals/array-method-is-strict.js","webpack:///./node_modules/core-js/internals/correct-is-regexp-logic.js","webpack:///./node_modules/core-js/modules/es.regexp.exec.js","webpack:///./node_modules/core-js/internals/regexp-flags.js","webpack:///./node_modules/core-js/internals/array-method-uses-to-length.js","webpack:///./node_modules/chessground/board.js","webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./node_modules/chessground/util.js","webpack:///./node_modules/core-js/internals/array-iteration.js","webpack:///./node_modules/core-js/internals/freezing.js","webpack:///./node_modules/chessground/fen.js","webpack:///./node_modules/chess.js/chess.js","webpack:///./node_modules/chessground/explosion.js","webpack:///./node_modules/core-js/modules/es.array.index-of.js","webpack:///./node_modules/core-js/modules/es.array.includes.js","webpack:///./node_modules/chessground/events.js","webpack:///./node_modules/core-js/modules/es.symbol.iterator.js","webpack:///./node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js","webpack:///./node_modules/core-js/modules/es.array.map.js","webpack:///./node_modules/core-js/modules/web.dom-collections.iterator.js","webpack:///./node_modules/core-js/modules/es.symbol.description.js","webpack:///./node_modules/core-js/internals/well-known-symbol-wrapped.js","webpack:///./node_modules/core-js/internals/is-array.js","webpack:///./node_modules/core-js/internals/internal-metadata.js","webpack:///./node_modules/chessground/svg.js","webpack:///./node_modules/core-js/modules/es.array.slice.js","webpack:///./node_modules/core-js/internals/dom-iterables.js"],"names":["toIndexedObject","nativeGetOwnPropertyNames","f","toString","windowNames","window","Object","getOwnPropertyNames","getWindowNames","it","error","slice","module","exports","call","defineProperty","value","Chessground","api_1","config_1","state_1","wrap_1","events","render_1","svg","util","element","config","maybeState","defaults","redrawAll","prevUnbind","dom","unbind","undefined","relative","viewOnly","drawable","visible","elements","renderWrap","bounds","memo","board","getBoundingClientRect","redrawNow","skipSvg","render","state","renderSvg","boundsUpdated","clear","updateBounds","redraw","debounceRedraw","prevSvgHash","bindBoard","bindDocument","insert","configure","start","redrawing","requestAnimationFrame","util_1","board_1","s","asWhite","whitePov","posToTranslate","posToTranslateRel","posToTranslateAbs","translate","translateRel","translateAbs","boardEl","pieces","curAnim","animation","current","anims","plan","Map","fadings","curDrag","draggable","squares","computeSquareClasses","samePieces","Set","sameSquares","movedPieces","movedSquares","k","el","pieceAtKey","elPieceName","anim","fading","pMvdset","pMvd","sMvdset","sMvd","firstChild","cgKey","isPieceNode","get","cgPiece","cgDragging","orig","classList","remove","key2pos","cgFading","cgAnimating","pieceNameOf","pos","add","addPieceZIndex","style","zIndex","posZIndex","appendValue","isSquareNode","cn","className","nextSibling","sk","has","pop","translation","squareNode","createEl","insertBefore","p","pieceName","pieceNode","appendChild","nodes","values","removeNodes","tagName","node","removeChild","z","piece","color","role","_a","lastMove","highlight","addSquare","check","selected","movable","showDests","dests","pDests","premovable","premove","predroppable","key","o","exploding","keys","stage","klass","classes","set","map","arr","push","fixRegExpWellKnownSymbolLogic","isRegExp","anObject","requireObjectCoercible","speciesConstructor","advanceStringIndex","toLength","callRegExpExec","regexpExec","fails","arrayPush","min","Math","MAX_UINT32","SUPPORTS_Y","RegExp","SPLIT","nativeSplit","maybeCallNative","internalSplit","split","length","separator","limit","string","String","this","lim","match","lastIndex","lastLength","output","flags","ignoreCase","multiline","unicode","sticky","lastLastIndex","separatorCopy","source","index","apply","test","O","splitter","regexp","res","done","rx","S","C","unicodeMatching","q","A","e","i","classof","R","exec","result","TypeError","global","DOMIterables","forEach","createNonEnumerableProperty","COLLECTION_NAME","Collection","CollectionPrototype","prototype","$forEach","arrayMethodIsStrict","arrayMethodUsesToLength","STRICT_METHOD","USES_TO_LENGTH","callbackfn","arguments","wellKnownSymbol","V8_VERSION","SPECIES","METHOD_NAME","array","constructor","foo","Boolean","fen_1","merge","fen","read","shapes","hasOwnProperty","setCheck","setSelected","duration","enabled","rookCastle","rank","kingStartPos","king","filter","d","includes","base","extend","isObject","$","notARegExp","correctIsRegExpLogic","target","proto","forced","searchString","indexOf","redefine","TO_STRING","RegExpPrototype","nativeToString","NOT_GENERIC","INCORRECT_NAME","name","rf","unsafe","charAt","InternalStateModule","defineIterator","STRING_ITERATOR","setInternalState","getInternalState","getterFor","iterated","type","point","MATCH","mutation","animate","makePiece","closer","sort","p1","p2","distanceSq","computePlan","prevPieces","animedOrigs","missings","news","prePieces","curP","preP","vector","allKeys","samePiece","newP","concat","step","now","cur","destroyed","rest","frequency","ease","easing","cfg","performance","size","alreadyRunning","t","anim_1","drag_1","explosion_1","toggleOrientation","orientation","getFen","write","setPieces","force","selectSquare","unselect","dest","baseMove","baseNewPiece","playPremove","validate","playPredrop","unsetPremove","unsetPredrop","cancelMove","cancel","stop","explosion","autoShapes","getKeyAtDomPos","event","dragNewPiece","$filter","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","bind","toObject","callWithSafeIterationClosing","isArrayIteratorMethod","createProperty","getIteratorMethod","arrayLike","iterator","next","Array","argumentsLength","mapfn","mapping","iteratorMethod","collection","collectionStrong","init","initial","turnColor","coordinates","autoCastle","disableContextMenu","resizable","pieceKey","free","castle","distance","autoDistance","showGhost","deleteOnDropOff","dropmode","active","selectable","stats","dragged","defaultSnapToValidMove","eraseOnClick","brushes","green","opacity","lineWidth","red","blue","yellow","paleBlue","paleGreen","paleRed","paleGrey","baseUrl","hold","timer","ranks","files","colors","drop","cancelDropMode","setDropMode","position","eventPosition","dropNewPiece","end","move","draw_1","isTrusted","button","touches","previouslySelected","cancelable","pieceCloseTo","preventDefault","hadPremove","hadPredrop","ctrlKey","canMove","stillSelected","pieceElementByKey","isDraggable","origPos","started","originTarget","ghost","setVisible","processDrag","radiusSq","pow","width","center","computeSquareCenter","newPiece","origPiece","found","left","top","height","eventPos","userMove","delete","callUserFunction","change","removeDragElements","toInteger","createMethod","CONVERT_TO_STRING","$this","first","second","charCodeAt","codeAt","create","redefineAll","anInstance","iterate","setSpecies","DESCRIPTORS","fastKey","internalStateGetterFor","getConstructor","wrapper","CONSTRUCTOR_NAME","IS_MAP","ADDER","that","iterable","last","AS_ENTRIES","define","previous","entry","getEntry","removed","data","prev","boundFunction","setStrong","ITERATOR_NAME","getInternalCollectionState","getInternalIteratorState","kind","class","ref","_arrayLikeToArray","len","arr2","_unsupportedIterableToArray","minLen","arrayLikeToArray","n","from","_createForOfIteratorHelper","allowArrayLike","Symbol","isArray","unsupportedIterableToArray","F","_e","err","normalCompletion","didErr","_e2","fen_prop","free_prop","showThreats","showThreats_prop","onPromotion","onPromotion_prop","orientation_prop","props","default","Function","watch","loadPosition","paintThreats","methods","possibleMoves","game","SQUARES","ms","moves","square","verbose","m","to","opponentMoves","originalPGN","pgn","tokens","join","valid","load","load_pgn","toColor","turn","threats","brush","setShapes","calculatePromotion","promotions","promotion","isPromotion","filteredPromotions","changeTurn","promoteTo","afterMove","pointThreats","countThreats","history","$emit","captures","checks","uniques","x","uniqueArray","elem","self","$refs","after","mounted","created","components","chessboard","axios","then","response","console","log","catch","originalArray","isForced","InternalMetadataModule","checkCorrectnessOfIteration","setToStringTag","inheritIfRequired","common","IS_WEAK","NativeConstructor","NativePrototype","Constructor","exported","fixMethod","KEY","nativeMethod","entries","REQUIRED","instance","HASNT_CHAINING","THROWS_ON_PRIMITIVES","ACCEPT_ITERABLES","BUGGY_ZERO","$instance","dummy","setPrototypeOf","Wrapper","NewTarget","NewTargetPrototype","path","wrappedWellKnownSymbolModule","NAME","processDraw","stopPropagation","eventBrush","snapToValidMove","keyAtDomPos","mouseSq","getSnappedKeyAtDomPos","addShape","onChange","modA","shiftKey","isRightButton","modB","altKey","metaKey","getModifierState","sameShape","similar","find","types_1","svg_1","innerHTML","c","toggle","helper","container","createElement","orientClass","renderCoords","elems","textContent","toPrimitive","definePropertyModule","createPropertyDescriptor","object","propertyKey","regexpFlags","stickyHelpers","nativeExec","nativeReplace","replace","patchedExec","UPDATES_LAST_INDEX_WRONG","re1","re2","UNSUPPORTED_Y","BROKEN_CARET","NPCG_INCLUDED","PATCH","str","reCopy","re","charsAdded","strCopy","input","iteratorClose","fn","ENTRIES","queen","knight","diff","a","b","abs","pawn","x1","y1","x2","y2","xd","yd","bishop","rook","rookFiles","canCastle","rookFilesOf","backrank","r","mobility","allPos","pos2","pos2key","RE","IndexedObject","nativeJoin","ES3_STRINGS","getBuiltIn","IS_PURE","NATIVE_SYMBOL","USE_SYMBOL_AS_UID","nativeObjectCreate","objectKeys","getOwnPropertyNamesModule","getOwnPropertyNamesExternal","getOwnPropertySymbolsModule","getOwnPropertyDescriptorModule","propertyIsEnumerableModule","shared","sharedKey","hiddenKeys","uid","defineWellKnownSymbol","HIDDEN","SYMBOL","PROTOTYPE","TO_PRIMITIVE","ObjectPrototype","$Symbol","$stringify","nativeGetOwnPropertyDescriptor","nativeDefineProperty","nativePropertyIsEnumerable","AllSymbols","ObjectPrototypeSymbols","StringToSymbolRegistry","SymbolToStringRegistry","WellKnownSymbolsStore","QObject","USE_SETTER","findChild","setSymbolDescriptor","P","Attributes","ObjectPrototypeDescriptor","wrap","tag","description","symbol","isSymbol","$defineProperty","enumerable","$defineProperties","Properties","properties","$getOwnPropertySymbols","$propertyIsEnumerable","$create","V","$getOwnPropertyDescriptor","descriptor","$getOwnPropertyNames","names","IS_OBJECT_PROTOTYPE","setter","configurable","sham","stat","keyFor","sym","useSetter","useSimple","defineProperties","getOwnPropertyDescriptor","getOwnPropertySymbols","FORCED_JSON_STRINGIFY","stringify","replacer","space","$replacer","args","valueOf","INCORRECT_ITERATION","argument","method","error1","error2","dotAll","cache","thrower","options","ACCESSORS","argument0","argument1","reset","premove_1","setTimeout","opposite","setPremove","meta","unset","setPredrop","pd","tryAutoCastle","destPos","destPiece","captured","baseUserMove","holdTime","metadata","canPremove","canDrop","afterNewPiece","predrop","canPredrop","select","isMovable","isPremovable","_b","success","file","floor","validSnapPos","validSnapCenters","validSnapDistances","closestSnapIndex","reduce","FunctionPrototype","FunctionPrototypeToString","nameRE","invRanks","cg","v","ret","reverse","startAt","time","pos1","dx","dy","posToTranslateBase","xFactor","yFactor","transform","percents","visibility","clientX","clientY","targetTouches","buttons","document","arraySpeciesCreate","TYPE","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","IS_FILTER_OUT","NO_HOLES","specificCreate","some","every","findIndex","filterOut","isExtensible","preventExtensions","roles","letters","row","col","promoted","nb","toLowerCase","y","letter","toUpperCase","Chess","BLACK","WHITE","EMPTY","PAWN","KNIGHT","BISHOP","ROOK","QUEEN","KING","SYMBOLS","DEFAULT_POSITION","POSSIBLE_RESULTS","PAWN_OFFSETS","w","PIECE_OFFSETS","ATTACKS","RAYS","SHIFTS","FLAGS","NORMAL","CAPTURE","BIG_PAWN","EP_CAPTURE","PROMOTION","KSIDE_CASTLE","QSIDE_CASTLE","BITS","RANK_1","RANK_2","RANK_7","RANK_8","a8","b8","c8","d8","e8","f8","g8","h8","a7","b7","c7","d7","e7","f7","g7","h7","a6","b6","c6","d6","e6","f6","g6","h6","a5","b5","c5","d5","e5","f5","g5","h5","a4","b4","c4","d4","e4","f4","g4","h4","a3","b3","c3","d3","e3","f3","g3","h3","a2","b2","c2","d2","e2","f2","g2","h2","a1","b1","c1","d1","e1","f1","g1","h1","ROOKS","flag","kings","castling","ep_square","half_moves","move_number","header","comments","keep_headers","update_setup","generate_fen","prune_comments","reversed_history","current_comments","copy_comment","undo_move","make_move","validate_fen","is_digit","parseInt","put","algebraic","errors","0","1","2","3","4","5","6","7","8","9","10","11","error_number","isNaN","rows","sum_fields","previous_was_number","empty","cflags","epflags","set_header","sq","build_move","generate_moves","add_move","us","them","swap_color","second_rank","first_sq","last_sq","single_square","legal","j","offset","castling_from","castling_to","attacked","legal_moves","king_attacked","move_to_san","sloppy","disambiguator","get_disambiguator","in_check","in_checkmate","stripped_san","difference","blocked","in_stalemate","insufficient_material","bishops","num_pieces","sq_color","sum","in_threefold_repetition","positions","repetition","old","ambiguities","same_rank","same_file","ambig_from","ambig_to","ambig_piece","ascii","move_from_san","clean_move","matches","substring","make_pretty","ugly_move","clone","san","obj","dupe","property","trim","perft","depth","child_nodes","ugly_moves","in_draw","game_over","newline","newline_char","max_width","header_exists","append_comment","move_string","comment","delimiter","Result","strip","wrap_comment","token","current_width","mask","has_keys","parse_pgn_header","header_obj","headers","header_regex","header_string","to_hex","encodeURIComponent","from_hex","decodeURIComponent","encode_comment","decode_comment","startsWith","endsWith","bracket","semicolon","rav_regex","half_move","move_obj","pretty_move","undo","square_color","sq_0x88","move_history","get_comment","set_comment","delete_comment","get_comments","delete_comments","setStage","$indexOf","nativeIndexOf","NEGATIVE_ZERO","searchElement","$includes","addToUnscopables","drag","draw","drop_1","observer","observe","onStart","startDragOrDraw","addEventListener","passive","unbinds","unbindable","body","onmove","dragOrDraw","onend","ev","onScroll","capture","eventName","callback","removeEventListener","withDrag","withDraw","REPLACE_SUPPORTS_NAMED_GROUPS","groups","REPLACE_KEEPS_$0","REPLACE","REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE","SPLIT_WORKS_WITH_OVERWRITTEN_EXEC","originalExec","DELEGATES_TO_SYMBOL","DELEGATES_TO_EXEC","execCalled","nativeRegExpMethod","arg2","forceStringMethod","stringMethod","regexMethod","arg","$map","ArrayIteratorMethods","ITERATOR","TO_STRING_TAG","ArrayValues","copyConstructorProperties","NativeSymbol","EmptyStringDescriptionStore","SymbolWrapper","symbolPrototype","symbolToString","native","desc","FREEZING","METADATA","id","setMetadata","objectID","weakData","getWeakData","onFreeze","createElementNS","root","curD","arrowDests","shape","hash","shapeHash","fullHash","sc","defsEl","syncDefs","syncShapes","modifiers","makeCustomBrush","keysInDom","getAttribute","renderMarker","hashesInDom","toRemove","elHash","renderShape","pieceHash","modifiersHash","scale","renderPiece","orient","renderArrow","renderCircle","setAttribute","pos2px","widths","circleWidth","radius","setAttributes","stroke","fill","cx","cy","shorten","arrowMargin","angle","atan2","xo","cos","yo","sin","href","marker","markerWidth","markerHeight","refX","refY","attrs","round","toAbsoluteIndex","nativeSlice","max","fin","CSSRuleList","CSSStyleDeclaration","CSSValueList","ClientRectList","DOMRectList","DOMStringList","DOMTokenList","DataTransferItemList","FileList","HTMLAllCollection","HTMLCollection","HTMLFormElement","HTMLSelectElement","MediaList","MimeTypeArray","NamedNodeMap","NodeList","PaintRequestList","Plugin","PluginArray","SVGLengthList","SVGNumberList","SVGPathSegList","SVGPointList","SVGStringList","SVGTransformList","SourceBufferList","StyleSheetList","TextTrackCueList","TextTrackList","TouchList"],"mappings":"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","file":"js/chunk-b20a2086.9dbf1fb2.js","sourcesContent":["var toIndexedObject = require('../internals/to-indexed-object');\nvar nativeGetOwnPropertyNames = require('../internals/object-get-own-property-names').f;\n\nvar toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return nativeGetOwnPropertyNames(it);\n  } catch (error) {\n    return windowNames.slice();\n  }\n};\n\n// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]'\n    ? getWindowNames(it)\n    : nativeGetOwnPropertyNames(toIndexedObject(it));\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Chessground = void 0;\nconst api_1 = require(\"./api\");\nconst config_1 = require(\"./config\");\nconst state_1 = require(\"./state\");\nconst wrap_1 = require(\"./wrap\");\nconst events = require(\"./events\");\nconst render_1 = require(\"./render\");\nconst svg = require(\"./svg\");\nconst util = require(\"./util\");\nfunction Chessground(element, config) {\n    const maybeState = state_1.defaults();\n    config_1.configure(maybeState, config || {});\n    function redrawAll() {\n        const prevUnbind = 'dom' in maybeState ? maybeState.dom.unbind : undefined;\n        const relative = maybeState.viewOnly && !maybeState.drawable.visible, elements = wrap_1.renderWrap(element, maybeState, relative), bounds = util.memo(() => elements.board.getBoundingClientRect()), redrawNow = (skipSvg) => {\n            render_1.render(state);\n            if (!skipSvg && elements.svg)\n                svg.renderSvg(state, elements.svg);\n        }, boundsUpdated = () => {\n            bounds.clear();\n            render_1.updateBounds(state);\n            if (elements.svg)\n                svg.renderSvg(state, elements.svg);\n        };\n        const state = maybeState;\n        state.dom = {\n            elements,\n            bounds,\n            redraw: debounceRedraw(redrawNow),\n            redrawNow,\n            unbind: prevUnbind,\n            relative\n        };\n        state.drawable.prevSvgHash = '';\n        redrawNow(false);\n        events.bindBoard(state, boundsUpdated);\n        if (!prevUnbind)\n            state.dom.unbind = events.bindDocument(state, boundsUpdated);\n        state.events.insert && state.events.insert(elements);\n        return state;\n    }\n    return api_1.start(redrawAll(), redrawAll);\n}\nexports.Chessground = Chessground;\nfunction debounceRedraw(redrawNow) {\n    let redrawing = false;\n    return () => {\n        if (redrawing)\n            return;\n        redrawing = true;\n        requestAnimationFrame(() => {\n            redrawNow();\n            redrawing = false;\n        });\n    };\n}\n//# sourceMappingURL=chessground.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.updateBounds = exports.render = void 0;\nconst util_1 = require(\"./util\");\nconst board_1 = require(\"./board\");\nconst util = require(\"./util\");\nfunction render(s) {\n    const asWhite = board_1.whitePov(s), posToTranslate = s.dom.relative ? util.posToTranslateRel : util.posToTranslateAbs(s.dom.bounds()), translate = s.dom.relative ? util.translateRel : util.translateAbs, boardEl = s.dom.elements.board, pieces = s.pieces, curAnim = s.animation.current, anims = curAnim ? curAnim.plan.anims : new Map(), fadings = curAnim ? curAnim.plan.fadings : new Map(), curDrag = s.draggable.current, squares = computeSquareClasses(s), samePieces = new Set(), sameSquares = new Set(), movedPieces = new Map(), movedSquares = new Map();\n    let k, el, pieceAtKey, elPieceName, anim, fading, pMvdset, pMvd, sMvdset, sMvd;\n    el = boardEl.firstChild;\n    while (el) {\n        k = el.cgKey;\n        if (isPieceNode(el)) {\n            pieceAtKey = pieces.get(k);\n            anim = anims.get(k);\n            fading = fadings.get(k);\n            elPieceName = el.cgPiece;\n            if (el.cgDragging && (!curDrag || curDrag.orig !== k)) {\n                el.classList.remove('dragging');\n                translate(el, posToTranslate(util_1.key2pos(k), asWhite));\n                el.cgDragging = false;\n            }\n            if (!fading && el.cgFading) {\n                el.cgFading = false;\n                el.classList.remove('fading');\n            }\n            if (pieceAtKey) {\n                if (anim && el.cgAnimating && elPieceName === pieceNameOf(pieceAtKey)) {\n                    const pos = util_1.key2pos(k);\n                    pos[0] += anim[2];\n                    pos[1] += anim[3];\n                    el.classList.add('anim');\n                    translate(el, posToTranslate(pos, asWhite));\n                }\n                else if (el.cgAnimating) {\n                    el.cgAnimating = false;\n                    el.classList.remove('anim');\n                    translate(el, posToTranslate(util_1.key2pos(k), asWhite));\n                    if (s.addPieceZIndex)\n                        el.style.zIndex = posZIndex(util_1.key2pos(k), asWhite);\n                }\n                if (elPieceName === pieceNameOf(pieceAtKey) && (!fading || !el.cgFading)) {\n                    samePieces.add(k);\n                }\n                else {\n                    if (fading && elPieceName === pieceNameOf(fading)) {\n                        el.classList.add('fading');\n                        el.cgFading = true;\n                    }\n                    else {\n                        appendValue(movedPieces, elPieceName, el);\n                    }\n                }\n            }\n            else {\n                appendValue(movedPieces, elPieceName, el);\n            }\n        }\n        else if (isSquareNode(el)) {\n            const cn = el.className;\n            if (squares.get(k) === cn)\n                sameSquares.add(k);\n            else\n                appendValue(movedSquares, cn, el);\n        }\n        el = el.nextSibling;\n    }\n    for (const [sk, className] of squares) {\n        if (!sameSquares.has(sk)) {\n            sMvdset = movedSquares.get(className);\n            sMvd = sMvdset && sMvdset.pop();\n            const translation = posToTranslate(util_1.key2pos(sk), asWhite);\n            if (sMvd) {\n                sMvd.cgKey = sk;\n                translate(sMvd, translation);\n            }\n            else {\n                const squareNode = util_1.createEl('square', className);\n                squareNode.cgKey = sk;\n                translate(squareNode, translation);\n                boardEl.insertBefore(squareNode, boardEl.firstChild);\n            }\n        }\n    }\n    for (const [k, p] of pieces) {\n        anim = anims.get(k);\n        if (!samePieces.has(k)) {\n            pMvdset = movedPieces.get(pieceNameOf(p));\n            pMvd = pMvdset && pMvdset.pop();\n            if (pMvd) {\n                pMvd.cgKey = k;\n                if (pMvd.cgFading) {\n                    pMvd.classList.remove('fading');\n                    pMvd.cgFading = false;\n                }\n                const pos = util_1.key2pos(k);\n                if (s.addPieceZIndex)\n                    pMvd.style.zIndex = posZIndex(pos, asWhite);\n                if (anim) {\n                    pMvd.cgAnimating = true;\n                    pMvd.classList.add('anim');\n                    pos[0] += anim[2];\n                    pos[1] += anim[3];\n                }\n                translate(pMvd, posToTranslate(pos, asWhite));\n            }\n            else {\n                const pieceName = pieceNameOf(p), pieceNode = util_1.createEl('piece', pieceName), pos = util_1.key2pos(k);\n                pieceNode.cgPiece = pieceName;\n                pieceNode.cgKey = k;\n                if (anim) {\n                    pieceNode.cgAnimating = true;\n                    pos[0] += anim[2];\n                    pos[1] += anim[3];\n                }\n                translate(pieceNode, posToTranslate(pos, asWhite));\n                if (s.addPieceZIndex)\n                    pieceNode.style.zIndex = posZIndex(pos, asWhite);\n                boardEl.appendChild(pieceNode);\n            }\n        }\n    }\n    for (const nodes of movedPieces.values())\n        removeNodes(s, nodes);\n    for (const nodes of movedSquares.values())\n        removeNodes(s, nodes);\n}\nexports.render = render;\nfunction updateBounds(s) {\n    if (s.dom.relative)\n        return;\n    const asWhite = board_1.whitePov(s), posToTranslate = util.posToTranslateAbs(s.dom.bounds());\n    let el = s.dom.elements.board.firstChild;\n    while (el) {\n        if ((isPieceNode(el) && !el.cgAnimating) || isSquareNode(el)) {\n            util.translateAbs(el, posToTranslate(util_1.key2pos(el.cgKey), asWhite));\n        }\n        el = el.nextSibling;\n    }\n}\nexports.updateBounds = updateBounds;\nfunction isPieceNode(el) {\n    return el.tagName === 'PIECE';\n}\nfunction isSquareNode(el) {\n    return el.tagName === 'SQUARE';\n}\nfunction removeNodes(s, nodes) {\n    for (const node of nodes)\n        s.dom.elements.board.removeChild(node);\n}\nfunction posZIndex(pos, asWhite) {\n    let z = 2 + pos[1] * 8 + (7 - pos[0]);\n    if (asWhite)\n        z = 67 - z;\n    return z + '';\n}\nfunction pieceNameOf(piece) {\n    return `${piece.color} ${piece.role}`;\n}\nfunction computeSquareClasses(s) {\n    var _a;\n    const squares = new Map();\n    if (s.lastMove && s.highlight.lastMove)\n        for (const k of s.lastMove) {\n            addSquare(squares, k, 'last-move');\n        }\n    if (s.check && s.highlight.check)\n        addSquare(squares, s.check, 'check');\n    if (s.selected) {\n        addSquare(squares, s.selected, 'selected');\n        if (s.movable.showDests) {\n            const dests = (_a = s.movable.dests) === null || _a === void 0 ? void 0 : _a.get(s.selected);\n            if (dests)\n                for (const k of dests) {\n                    addSquare(squares, k, 'move-dest' + (s.pieces.has(k) ? ' oc' : ''));\n                }\n            const pDests = s.premovable.dests;\n            if (pDests)\n                for (const k of pDests) {\n                    addSquare(squares, k, 'premove-dest' + (s.pieces.has(k) ? ' oc' : ''));\n                }\n        }\n    }\n    const premove = s.premovable.current;\n    if (premove)\n        for (const k of premove)\n            addSquare(squares, k, 'current-premove');\n    else if (s.predroppable.current)\n        addSquare(squares, s.predroppable.current.key, 'current-premove');\n    const o = s.exploding;\n    if (o)\n        for (const k of o.keys)\n            addSquare(squares, k, 'exploding' + o.stage);\n    return squares;\n}\nfunction addSquare(squares, key, klass) {\n    const classes = squares.get(key);\n    if (classes)\n        squares.set(key, `${classes} ${klass}`);\n    else\n        squares.set(key, klass);\n}\nfunction appendValue(map, key, value) {\n    const arr = map.get(key);\n    if (arr)\n        arr.push(value);\n    else\n        map.set(key, [value]);\n}\n//# sourceMappingURL=render.js.map","'use strict';\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar isRegExp = require('../internals/is-regexp');\nvar anObject = require('../internals/an-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar speciesConstructor = require('../internals/species-constructor');\nvar advanceStringIndex = require('../internals/advance-string-index');\nvar toLength = require('../internals/to-length');\nvar callRegExpExec = require('../internals/regexp-exec-abstract');\nvar regexpExec = require('../internals/regexp-exec');\nvar fails = require('../internals/fails');\n\nvar arrayPush = [].push;\nvar min = Math.min;\nvar MAX_UINT32 = 0xFFFFFFFF;\n\n// babel-minify transpiles RegExp('x', 'y') -> /x/y and it causes SyntaxError\nvar SUPPORTS_Y = !fails(function () { return !RegExp(MAX_UINT32, 'y'); });\n\n// @@split logic\nfixRegExpWellKnownSymbolLogic('split', 2, function (SPLIT, nativeSplit, maybeCallNative) {\n  var internalSplit;\n  if (\n    'abbc'.split(/(b)*/)[1] == 'c' ||\n    'test'.split(/(?:)/, -1).length != 4 ||\n    'ab'.split(/(?:ab)*/).length != 2 ||\n    '.'.split(/(.?)(.?)/).length != 4 ||\n    '.'.split(/()()/).length > 1 ||\n    ''.split(/.?/).length\n  ) {\n    // based on es5-shim implementation, need to rework it\n    internalSplit = function (separator, limit) {\n      var string = String(requireObjectCoercible(this));\n      var lim = limit === undefined ? MAX_UINT32 : limit >>> 0;\n      if (lim === 0) return [];\n      if (separator === undefined) return [string];\n      // If `separator` is not a regex, use native split\n      if (!isRegExp(separator)) {\n        return nativeSplit.call(string, separator, lim);\n      }\n      var output = [];\n      var flags = (separator.ignoreCase ? 'i' : '') +\n                  (separator.multiline ? 'm' : '') +\n                  (separator.unicode ? 'u' : '') +\n                  (separator.sticky ? 'y' : '');\n      var lastLastIndex = 0;\n      // Make `global` and avoid `lastIndex` issues by working with a copy\n      var separatorCopy = new RegExp(separator.source, flags + 'g');\n      var match, lastIndex, lastLength;\n      while (match = regexpExec.call(separatorCopy, string)) {\n        lastIndex = separatorCopy.lastIndex;\n        if (lastIndex > lastLastIndex) {\n          output.push(string.slice(lastLastIndex, match.index));\n          if (match.length > 1 && match.index < string.length) arrayPush.apply(output, match.slice(1));\n          lastLength = match[0].length;\n          lastLastIndex = lastIndex;\n          if (output.length >= lim) break;\n        }\n        if (separatorCopy.lastIndex === match.index) separatorCopy.lastIndex++; // Avoid an infinite loop\n      }\n      if (lastLastIndex === string.length) {\n        if (lastLength || !separatorCopy.test('')) output.push('');\n      } else output.push(string.slice(lastLastIndex));\n      return output.length > lim ? output.slice(0, lim) : output;\n    };\n  // Chakra, V8\n  } else if ('0'.split(undefined, 0).length) {\n    internalSplit = function (separator, limit) {\n      return separator === undefined && limit === 0 ? [] : nativeSplit.call(this, separator, limit);\n    };\n  } else internalSplit = nativeSplit;\n\n  return [\n    // `String.prototype.split` method\n    // https://tc39.github.io/ecma262/#sec-string.prototype.split\n    function split(separator, limit) {\n      var O = requireObjectCoercible(this);\n      var splitter = separator == undefined ? undefined : separator[SPLIT];\n      return splitter !== undefined\n        ? splitter.call(separator, O, limit)\n        : internalSplit.call(String(O), separator, limit);\n    },\n    // `RegExp.prototype[@@split]` method\n    // https://tc39.github.io/ecma262/#sec-regexp.prototype-@@split\n    //\n    // NOTE: This cannot be properly polyfilled in engines that don't support\n    // the 'y' flag.\n    function (regexp, limit) {\n      var res = maybeCallNative(internalSplit, regexp, this, limit, internalSplit !== nativeSplit);\n      if (res.done) return res.value;\n\n      var rx = anObject(regexp);\n      var S = String(this);\n      var C = speciesConstructor(rx, RegExp);\n\n      var unicodeMatching = rx.unicode;\n      var flags = (rx.ignoreCase ? 'i' : '') +\n                  (rx.multiline ? 'm' : '') +\n                  (rx.unicode ? 'u' : '') +\n                  (SUPPORTS_Y ? 'y' : 'g');\n\n      // ^(? + rx + ) is needed, in combination with some S slicing, to\n      // simulate the 'y' flag.\n      var splitter = new C(SUPPORTS_Y ? rx : '^(?:' + rx.source + ')', flags);\n      var lim = limit === undefined ? MAX_UINT32 : limit >>> 0;\n      if (lim === 0) return [];\n      if (S.length === 0) return callRegExpExec(splitter, S) === null ? [S] : [];\n      var p = 0;\n      var q = 0;\n      var A = [];\n      while (q < S.length) {\n        splitter.lastIndex = SUPPORTS_Y ? q : 0;\n        var z = callRegExpExec(splitter, SUPPORTS_Y ? S : S.slice(q));\n        var e;\n        if (\n          z === null ||\n          (e = min(toLength(splitter.lastIndex + (SUPPORTS_Y ? 0 : q)), S.length)) === p\n        ) {\n          q = advanceStringIndex(S, q, unicodeMatching);\n        } else {\n          A.push(S.slice(p, q));\n          if (A.length === lim) return A;\n          for (var i = 1; i <= z.length - 1; i++) {\n            A.push(z[i]);\n            if (A.length === lim) return A;\n          }\n          q = p = e;\n        }\n      }\n      A.push(S.slice(p));\n      return A;\n    }\n  ];\n}, !SUPPORTS_Y);\n","var classof = require('./classof-raw');\nvar regexpExec = require('./regexp-exec');\n\n// `RegExpExec` abstract operation\n// https://tc39.github.io/ecma262/#sec-regexpexec\nmodule.exports = function (R, S) {\n  var exec = R.exec;\n  if (typeof exec === 'function') {\n    var result = exec.call(R, S);\n    if (typeof result !== 'object') {\n      throw TypeError('RegExp exec method returned something other than an Object or null');\n    }\n    return result;\n  }\n\n  if (classof(R) !== 'RegExp') {\n    throw TypeError('RegExp#exec called on incompatible receiver');\n  }\n\n  return regexpExec.call(R, S);\n};\n\n","var global = require('../internals/global');\nvar DOMIterables = require('../internals/dom-iterables');\nvar forEach = require('../internals/array-for-each');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  var Collection = global[COLLECTION_NAME];\n  var CollectionPrototype = Collection && Collection.prototype;\n  // some Chrome versions have non-configurable methods on DOMTokenList\n  if (CollectionPrototype && CollectionPrototype.forEach !== forEach) try {\n    createNonEnumerableProperty(CollectionPrototype, 'forEach', forEach);\n  } catch (error) {\n    CollectionPrototype.forEach = forEach;\n  }\n}\n","'use strict';\nvar $forEach = require('../internals/array-iteration').forEach;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar STRICT_METHOD = arrayMethodIsStrict('forEach');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('forEach');\n\n// `Array.prototype.forEach` method implementation\n// https://tc39.github.io/ecma262/#sec-array.prototype.foreach\nmodule.exports = (!STRICT_METHOD || !USES_TO_LENGTH) ? function forEach(callbackfn /* , thisArg */) {\n  return $forEach(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n} : [].forEach;\n","var fails = require('../internals/fails');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar SPECIES = wellKnownSymbol('species');\n\nmodule.exports = function (METHOD_NAME) {\n  // We can't use this feature detection in V8 since it causes\n  // deoptimization and serious performance degradation\n  // https://github.com/zloirock/core-js/issues/677\n  return V8_VERSION >= 51 || !fails(function () {\n    var array = [];\n    var constructor = array.constructor = {};\n    constructor[SPECIES] = function () {\n      return { foo: 1 };\n    };\n    return array[METHOD_NAME](Boolean).foo !== 1;\n  });\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.configure = void 0;\nconst board_1 = require(\"./board\");\nconst fen_1 = require(\"./fen\");\nfunction configure(state, config) {\n    var _a;\n    if ((_a = config.movable) === null || _a === void 0 ? void 0 : _a.dests)\n        state.movable.dests = undefined;\n    merge(state, config);\n    if (config.fen) {\n        state.pieces = fen_1.read(config.fen);\n        state.drawable.shapes = [];\n    }\n    if (config.hasOwnProperty('check'))\n        board_1.setCheck(state, config.check || false);\n    if (config.hasOwnProperty('lastMove') && !config.lastMove)\n        state.lastMove = undefined;\n    else if (config.lastMove)\n        state.lastMove = config.lastMove;\n    if (state.selected)\n        board_1.setSelected(state, state.selected);\n    if (!state.animation.duration || state.animation.duration < 100)\n        state.animation.enabled = false;\n    if (!state.movable.rookCastle && state.movable.dests) {\n        const rank = state.movable.color === 'white' ? '1' : '8', kingStartPos = 'e' + rank, dests = state.movable.dests.get(kingStartPos), king = state.pieces.get(kingStartPos);\n        if (!dests || !king || king.role !== 'king')\n            return;\n        state.movable.dests.set(kingStartPos, dests.filter(d => !((d === 'a' + rank) && dests.includes('c' + rank)) &&\n            !((d === 'h' + rank) && dests.includes('g' + rank))));\n    }\n}\nexports.configure = configure;\nfunction merge(base, extend) {\n    for (const key in extend) {\n        if (isObject(base[key]) && isObject(extend[key]))\n            merge(base[key], extend[key]);\n        else\n            base[key] = extend[key];\n    }\n}\nfunction isObject(o) {\n    return typeof o === 'object';\n}\n//# sourceMappingURL=config.js.map","'use strict';\nvar $ = require('../internals/export');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\n\n// `String.prototype.includes` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.includes\n$({ target: 'String', proto: true, forced: !correctIsRegExpLogic('includes') }, {\n  includes: function includes(searchString /* , position = 0 */) {\n    return !!~String(requireObjectCoercible(this))\n      .indexOf(notARegExp(searchString), arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","'use strict';\nvar redefine = require('../internals/redefine');\nvar anObject = require('../internals/an-object');\nvar fails = require('../internals/fails');\nvar flags = require('../internals/regexp-flags');\n\nvar TO_STRING = 'toString';\nvar RegExpPrototype = RegExp.prototype;\nvar nativeToString = RegExpPrototype[TO_STRING];\n\nvar NOT_GENERIC = fails(function () { return nativeToString.call({ source: 'a', flags: 'b' }) != '/a/b'; });\n// FF44- RegExp#toString has a wrong name\nvar INCORRECT_NAME = nativeToString.name != TO_STRING;\n\n// `RegExp.prototype.toString` method\n// https://tc39.github.io/ecma262/#sec-regexp.prototype.tostring\nif (NOT_GENERIC || INCORRECT_NAME) {\n  redefine(RegExp.prototype, TO_STRING, function toString() {\n    var R = anObject(this);\n    var p = String(R.source);\n    var rf = R.flags;\n    var f = String(rf === undefined && R instanceof RegExp && !('flags' in RegExpPrototype) ? flags.call(R) : rf);\n    return '/' + p + '/' + f;\n  }, { unsafe: true });\n}\n","'use strict';\nvar charAt = require('../internals/string-multibyte').charAt;\nvar InternalStateModule = require('../internals/internal-state');\nvar defineIterator = require('../internals/define-iterator');\n\nvar STRING_ITERATOR = 'String Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(STRING_ITERATOR);\n\n// `String.prototype[@@iterator]` method\n// https://tc39.github.io/ecma262/#sec-string.prototype-@@iterator\ndefineIterator(String, 'String', function (iterated) {\n  setInternalState(this, {\n    type: STRING_ITERATOR,\n    string: String(iterated),\n    index: 0\n  });\n// `%StringIteratorPrototype%.next` method\n// https://tc39.github.io/ecma262/#sec-%stringiteratorprototype%.next\n}, function next() {\n  var state = getInternalState(this);\n  var string = state.string;\n  var index = state.index;\n  var point;\n  if (index >= string.length) return { value: undefined, done: true };\n  point = charAt(string, index);\n  state.index += point.length;\n  return { value: point, done: false };\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar forEach = require('../internals/array-for-each');\n\n// `Array.prototype.forEach` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.foreach\n$({ target: 'Array', proto: true, forced: [].forEach != forEach }, {\n  forEach: forEach\n});\n","var isObject = require('../internals/is-object');\nvar classof = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\n// `IsRegExp` abstract operation\n// https://tc39.github.io/ecma262/#sec-isregexp\nmodule.exports = function (it) {\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : classof(it) == 'RegExp');\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.render = exports.anim = void 0;\nconst util = require(\"./util\");\nfunction anim(mutation, state) {\n    return state.animation.enabled ? animate(mutation, state) : render(mutation, state);\n}\nexports.anim = anim;\nfunction render(mutation, state) {\n    const result = mutation(state);\n    state.dom.redraw();\n    return result;\n}\nexports.render = render;\nfunction makePiece(key, piece) {\n    return {\n        key: key,\n        pos: util.key2pos(key),\n        piece: piece\n    };\n}\nfunction closer(piece, pieces) {\n    return pieces.sort((p1, p2) => {\n        return util.distanceSq(piece.pos, p1.pos) - util.distanceSq(piece.pos, p2.pos);\n    })[0];\n}\nfunction computePlan(prevPieces, current) {\n    const anims = new Map(), animedOrigs = [], fadings = new Map(), missings = [], news = [], prePieces = new Map();\n    let curP, preP, vector;\n    for (const [k, p] of prevPieces) {\n        prePieces.set(k, makePiece(k, p));\n    }\n    for (const key of util.allKeys) {\n        curP = current.pieces.get(key);\n        preP = prePieces.get(key);\n        if (curP) {\n            if (preP) {\n                if (!util.samePiece(curP, preP.piece)) {\n                    missings.push(preP);\n                    news.push(makePiece(key, curP));\n                }\n            }\n            else\n                news.push(makePiece(key, curP));\n        }\n        else if (preP)\n            missings.push(preP);\n    }\n    for (const newP of news) {\n        preP = closer(newP, missings.filter(p => util.samePiece(newP.piece, p.piece)));\n        if (preP) {\n            vector = [preP.pos[0] - newP.pos[0], preP.pos[1] - newP.pos[1]];\n            anims.set(newP.key, vector.concat(vector));\n            animedOrigs.push(preP.key);\n        }\n    }\n    for (const p of missings) {\n        if (!animedOrigs.includes(p.key))\n            fadings.set(p.key, p.piece);\n    }\n    return {\n        anims: anims,\n        fadings: fadings\n    };\n}\nfunction step(state, now) {\n    const cur = state.animation.current;\n    if (cur === undefined) {\n        if (!state.dom.destroyed)\n            state.dom.redrawNow();\n        return;\n    }\n    const rest = 1 - (now - cur.start) * cur.frequency;\n    if (rest <= 0) {\n        state.animation.current = undefined;\n        state.dom.redrawNow();\n    }\n    else {\n        const ease = easing(rest);\n        for (const cfg of cur.plan.anims.values()) {\n            cfg[2] = cfg[0] * ease;\n            cfg[3] = cfg[1] * ease;\n        }\n        state.dom.redrawNow(true);\n        requestAnimationFrame((now = performance.now()) => step(state, now));\n    }\n}\nfunction animate(mutation, state) {\n    const prevPieces = new Map(state.pieces);\n    const result = mutation(state);\n    const plan = computePlan(prevPieces, state);\n    if (plan.anims.size || plan.fadings.size) {\n        const alreadyRunning = state.animation.current && state.animation.current.start;\n        state.animation.current = {\n            start: performance.now(),\n            frequency: 1 / state.animation.duration,\n            plan: plan\n        };\n        if (!alreadyRunning)\n            step(state, performance.now());\n    }\n    else {\n        state.dom.redraw();\n    }\n    return result;\n}\nfunction easing(t) {\n    return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n}\n//# sourceMappingURL=anim.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.start = void 0;\nconst board = require(\"./board\");\nconst fen_1 = require(\"./fen\");\nconst config_1 = require(\"./config\");\nconst anim_1 = require(\"./anim\");\nconst drag_1 = require(\"./drag\");\nconst explosion_1 = require(\"./explosion\");\nfunction start(state, redrawAll) {\n    function toggleOrientation() {\n        board.toggleOrientation(state);\n        redrawAll();\n    }\n    return {\n        set(config) {\n            if (config.orientation && config.orientation !== state.orientation)\n                toggleOrientation();\n            (config.fen ? anim_1.anim : anim_1.render)(state => config_1.configure(state, config), state);\n        },\n        state,\n        getFen: () => fen_1.write(state.pieces),\n        toggleOrientation,\n        setPieces(pieces) {\n            anim_1.anim(state => board.setPieces(state, pieces), state);\n        },\n        selectSquare(key, force) {\n            if (key)\n                anim_1.anim(state => board.selectSquare(state, key, force), state);\n            else if (state.selected) {\n                board.unselect(state);\n                state.dom.redraw();\n            }\n        },\n        move(orig, dest) {\n            anim_1.anim(state => board.baseMove(state, orig, dest), state);\n        },\n        newPiece(piece, key) {\n            anim_1.anim(state => board.baseNewPiece(state, piece, key), state);\n        },\n        playPremove() {\n            if (state.premovable.current) {\n                if (anim_1.anim(board.playPremove, state))\n                    return true;\n                state.dom.redraw();\n            }\n            return false;\n        },\n        playPredrop(validate) {\n            if (state.predroppable.current) {\n                const result = board.playPredrop(state, validate);\n                state.dom.redraw();\n                return result;\n            }\n            return false;\n        },\n        cancelPremove() {\n            anim_1.render(board.unsetPremove, state);\n        },\n        cancelPredrop() {\n            anim_1.render(board.unsetPredrop, state);\n        },\n        cancelMove() {\n            anim_1.render(state => { board.cancelMove(state); drag_1.cancel(state); }, state);\n        },\n        stop() {\n            anim_1.render(state => { board.stop(state); drag_1.cancel(state); }, state);\n        },\n        explode(keys) {\n            explosion_1.explosion(state, keys);\n        },\n        setAutoShapes(shapes) {\n            anim_1.render(state => state.drawable.autoShapes = shapes, state);\n        },\n        setShapes(shapes) {\n            anim_1.render(state => state.drawable.shapes = shapes, state);\n        },\n        getKeyAtDomPos(pos) {\n            return board.getKeyAtDomPos(pos, board.whitePov(state), state.dom.bounds());\n        },\n        redrawAll,\n        dragNewPiece(piece, event, force) {\n            drag_1.dragNewPiece(state, piece, event, force);\n        },\n        destroy() {\n            board.stop(state);\n            state.dom.unbind && state.dom.unbind();\n            state.dom.destroyed = true;\n        }\n    };\n}\nexports.start = start;\n//# sourceMappingURL=api.js.map","'use strict';\nvar $ = require('../internals/export');\nvar $filter = require('../internals/array-iteration').filter;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('filter');\n// Edge 14- issue\nvar USES_TO_LENGTH = arrayMethodUsesToLength('filter');\n\n// `Array.prototype.filter` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.filter\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  filter: function filter(callbackfn /* , thisArg */) {\n    return $filter(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","'use strict';\nvar bind = require('../internals/function-bind-context');\nvar toObject = require('../internals/to-object');\nvar callWithSafeIterationClosing = require('../internals/call-with-safe-iteration-closing');\nvar isArrayIteratorMethod = require('../internals/is-array-iterator-method');\nvar toLength = require('../internals/to-length');\nvar createProperty = require('../internals/create-property');\nvar getIteratorMethod = require('../internals/get-iterator-method');\n\n// `Array.from` method implementation\n// https://tc39.github.io/ecma262/#sec-array.from\nmodule.exports = function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n  var O = toObject(arrayLike);\n  var C = typeof this == 'function' ? this : Array;\n  var argumentsLength = arguments.length;\n  var mapfn = argumentsLength > 1 ? arguments[1] : undefined;\n  var mapping = mapfn !== undefined;\n  var iteratorMethod = getIteratorMethod(O);\n  var index = 0;\n  var length, result, step, iterator, next, value;\n  if (mapping) mapfn = bind(mapfn, argumentsLength > 2 ? arguments[2] : undefined, 2);\n  // if the target is not iterable or it's an array with the default iterator - use a simple case\n  if (iteratorMethod != undefined && !(C == Array && isArrayIteratorMethod(iteratorMethod))) {\n    iterator = iteratorMethod.call(O);\n    next = iterator.next;\n    result = new C();\n    for (;!(step = next.call(iterator)).done; index++) {\n      value = mapping ? callWithSafeIterationClosing(iterator, mapfn, [step.value, index], true) : step.value;\n      createProperty(result, index, value);\n    }\n  } else {\n    length = toLength(O.length);\n    result = new C(length);\n    for (;length > index; index++) {\n      value = mapping ? mapfn(O[index], index) : O[index];\n      createProperty(result, index, value);\n    }\n  }\n  result.length = index;\n  return result;\n};\n","'use strict';\nvar collection = require('../internals/collection');\nvar collectionStrong = require('../internals/collection-strong');\n\n// `Map` constructor\n// https://tc39.github.io/ecma262/#sec-map-objects\nmodule.exports = collection('Map', function (init) {\n  return function Map() { return init(this, arguments.length ? arguments[0] : undefined); };\n}, collectionStrong);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.defaults = void 0;\nconst fen = require(\"./fen\");\nconst util_1 = require(\"./util\");\nfunction defaults() {\n    return {\n        pieces: fen.read(fen.initial),\n        orientation: 'white',\n        turnColor: 'white',\n        coordinates: true,\n        autoCastle: true,\n        viewOnly: false,\n        disableContextMenu: false,\n        resizable: true,\n        addPieceZIndex: false,\n        pieceKey: false,\n        highlight: {\n            lastMove: true,\n            check: true\n        },\n        animation: {\n            enabled: true,\n            duration: 200\n        },\n        movable: {\n            free: true,\n            color: 'both',\n            showDests: true,\n            events: {},\n            rookCastle: true\n        },\n        premovable: {\n            enabled: true,\n            showDests: true,\n            castle: true,\n            events: {}\n        },\n        predroppable: {\n            enabled: false,\n            events: {}\n        },\n        draggable: {\n            enabled: true,\n            distance: 3,\n            autoDistance: true,\n            showGhost: true,\n            deleteOnDropOff: false\n        },\n        dropmode: {\n            active: false\n        },\n        selectable: {\n            enabled: true\n        },\n        stats: {\n            dragged: !('ontouchstart' in window)\n        },\n        events: {},\n        drawable: {\n            enabled: true,\n            visible: true,\n            defaultSnapToValidMove: true,\n            eraseOnClick: true,\n            shapes: [],\n            autoShapes: [],\n            brushes: {\n                green: { key: 'g', color: '#15781B', opacity: 1, lineWidth: 10 },\n                red: { key: 'r', color: '#882020', opacity: 1, lineWidth: 10 },\n                blue: { key: 'b', color: '#003088', opacity: 1, lineWidth: 10 },\n                yellow: { key: 'y', color: '#e68f00', opacity: 1, lineWidth: 10 },\n                paleBlue: { key: 'pb', color: '#003088', opacity: 0.4, lineWidth: 15 },\n                paleGreen: { key: 'pg', color: '#15781B', opacity: 0.4, lineWidth: 15 },\n                paleRed: { key: 'pr', color: '#882020', opacity: 0.4, lineWidth: 15 },\n                paleGrey: { key: 'pgr', color: '#4a4a4a', opacity: 0.35, lineWidth: 15 }\n            },\n            pieces: {\n                baseUrl: 'https://lichess1.org/assets/piece/cburnett/'\n            },\n            prevSvgHash: ''\n        },\n        hold: util_1.timer()\n    };\n}\nexports.defaults = defaults;\n//# sourceMappingURL=state.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ranks = exports.files = exports.colors = void 0;\nexports.colors = ['white', 'black'];\nexports.files = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h'];\nexports.ranks = ['1', '2', '3', '4', '5', '6', '7', '8'];\n//# sourceMappingURL=types.js.map","var isRegExp = require('../internals/is-regexp');\n\nmodule.exports = function (it) {\n  if (isRegExp(it)) {\n    throw TypeError(\"The method doesn't accept regular expressions\");\n  } return it;\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.drop = exports.cancelDropMode = exports.setDropMode = void 0;\nconst board = require(\"./board\");\nconst util = require(\"./util\");\nconst drag_1 = require(\"./drag\");\nfunction setDropMode(s, piece) {\n    s.dropmode = {\n        active: true,\n        piece\n    };\n    drag_1.cancel(s);\n}\nexports.setDropMode = setDropMode;\nfunction cancelDropMode(s) {\n    s.dropmode = {\n        active: false\n    };\n}\nexports.cancelDropMode = cancelDropMode;\nfunction drop(s, e) {\n    if (!s.dropmode.active)\n        return;\n    board.unsetPremove(s);\n    board.unsetPredrop(s);\n    const piece = s.dropmode.piece;\n    if (piece) {\n        s.pieces.set('a0', piece);\n        const position = util.eventPosition(e);\n        const dest = position && board.getKeyAtDomPos(position, board.whitePov(s), s.dom.bounds());\n        if (dest)\n            board.dropNewPiece(s, 'a0', dest);\n    }\n    s.dom.redraw();\n}\nexports.drop = drop;\n//# sourceMappingURL=drop.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.cancel = exports.end = exports.move = exports.dragNewPiece = exports.start = void 0;\nconst board = require(\"./board\");\nconst util = require(\"./util\");\nconst draw_1 = require(\"./draw\");\nconst anim_1 = require(\"./anim\");\nfunction start(s, e) {\n    if (!e.isTrusted || e.button !== undefined && e.button !== 0)\n        return;\n    if (e.touches && e.touches.length > 1)\n        return;\n    const bounds = s.dom.bounds(), position = util.eventPosition(e), orig = board.getKeyAtDomPos(position, board.whitePov(s), bounds);\n    if (!orig)\n        return;\n    const piece = s.pieces.get(orig);\n    const previouslySelected = s.selected;\n    if (!previouslySelected && s.drawable.enabled && (s.drawable.eraseOnClick || (!piece || piece.color !== s.turnColor)))\n        draw_1.clear(s);\n    if (e.cancelable !== false &&\n        (!e.touches || !s.movable.color || piece || previouslySelected || pieceCloseTo(s, position)))\n        e.preventDefault();\n    const hadPremove = !!s.premovable.current;\n    const hadPredrop = !!s.predroppable.current;\n    s.stats.ctrlKey = e.ctrlKey;\n    if (s.selected && board.canMove(s, s.selected, orig)) {\n        anim_1.anim(state => board.selectSquare(state, orig), s);\n    }\n    else {\n        board.selectSquare(s, orig);\n    }\n    const stillSelected = s.selected === orig;\n    const element = pieceElementByKey(s, orig);\n    if (piece && element && stillSelected && board.isDraggable(s, orig)) {\n        s.draggable.current = {\n            orig,\n            piece,\n            origPos: position,\n            pos: position,\n            started: s.draggable.autoDistance && s.stats.dragged,\n            element,\n            previouslySelected,\n            originTarget: e.target\n        };\n        element.cgDragging = true;\n        element.classList.add('dragging');\n        const ghost = s.dom.elements.ghost;\n        if (ghost) {\n            ghost.className = `ghost ${piece.color} ${piece.role}`;\n            util.translateAbs(ghost, util.posToTranslateAbs(bounds)(util.key2pos(orig), board.whitePov(s)));\n            util.setVisible(ghost, true);\n        }\n        processDrag(s);\n    }\n    else {\n        if (hadPremove)\n            board.unsetPremove(s);\n        if (hadPredrop)\n            board.unsetPredrop(s);\n    }\n    s.dom.redraw();\n}\nexports.start = start;\nfunction pieceCloseTo(s, pos) {\n    const asWhite = board.whitePov(s), bounds = s.dom.bounds(), radiusSq = Math.pow(bounds.width / 8, 2);\n    for (const key in s.pieces) {\n        const center = util.computeSquareCenter(key, asWhite, bounds);\n        if (util.distanceSq(center, pos) <= radiusSq)\n            return true;\n    }\n    return false;\n}\nfunction dragNewPiece(s, piece, e, force) {\n    const key = 'a0';\n    s.pieces.set(key, piece);\n    s.dom.redraw();\n    const position = util.eventPosition(e);\n    s.draggable.current = {\n        orig: key,\n        piece,\n        origPos: position,\n        pos: position,\n        started: true,\n        element: () => pieceElementByKey(s, key),\n        originTarget: e.target,\n        newPiece: true,\n        force: !!force\n    };\n    processDrag(s);\n}\nexports.dragNewPiece = dragNewPiece;\nfunction processDrag(s) {\n    requestAnimationFrame(() => {\n        var _a;\n        const cur = s.draggable.current;\n        if (!cur)\n            return;\n        if ((_a = s.animation.current) === null || _a === void 0 ? void 0 : _a.plan.anims.has(cur.orig))\n            s.animation.current = undefined;\n        const origPiece = s.pieces.get(cur.orig);\n        if (!origPiece || !util.samePiece(origPiece, cur.piece))\n            cancel(s);\n        else {\n            if (!cur.started && util.distanceSq(cur.pos, cur.origPos) >= Math.pow(s.draggable.distance, 2))\n                cur.started = true;\n            if (cur.started) {\n                if (typeof cur.element === 'function') {\n                    const found = cur.element();\n                    if (!found)\n                        return;\n                    found.cgDragging = true;\n                    found.classList.add('dragging');\n                    cur.element = found;\n                }\n                const bounds = s.dom.bounds();\n                util.translateAbs(cur.element, [\n                    cur.pos[0] - bounds.left - bounds.width / 16,\n                    cur.pos[1] - bounds.top - bounds.height / 16\n                ]);\n            }\n        }\n        processDrag(s);\n    });\n}\nfunction move(s, e) {\n    if (s.draggable.current && (!e.touches || e.touches.length < 2)) {\n        s.draggable.current.pos = util.eventPosition(e);\n    }\n}\nexports.move = move;\nfunction end(s, e) {\n    const cur = s.draggable.current;\n    if (!cur)\n        return;\n    if (e.type === 'touchend' && e.cancelable !== false)\n        e.preventDefault();\n    if (e.type === 'touchend' && cur.originTarget !== e.target && !cur.newPiece) {\n        s.draggable.current = undefined;\n        return;\n    }\n    board.unsetPremove(s);\n    board.unsetPredrop(s);\n    const eventPos = util.eventPosition(e) || cur.pos;\n    const dest = board.getKeyAtDomPos(eventPos, board.whitePov(s), s.dom.bounds());\n    if (dest && cur.started && cur.orig !== dest) {\n        if (cur.newPiece)\n            board.dropNewPiece(s, cur.orig, dest, cur.force);\n        else {\n            s.stats.ctrlKey = e.ctrlKey;\n            if (board.userMove(s, cur.orig, dest))\n                s.stats.dragged = true;\n        }\n    }\n    else if (cur.newPiece) {\n        s.pieces.delete(cur.orig);\n    }\n    else if (s.draggable.deleteOnDropOff && !dest) {\n        s.pieces.delete(cur.orig);\n        board.callUserFunction(s.events.change);\n    }\n    if (cur.orig === cur.previouslySelected && (cur.orig === dest || !dest))\n        board.unselect(s);\n    else if (!s.selectable.enabled)\n        board.unselect(s);\n    removeDragElements(s);\n    s.draggable.current = undefined;\n    s.dom.redraw();\n}\nexports.end = end;\nfunction cancel(s) {\n    const cur = s.draggable.current;\n    if (cur) {\n        if (cur.newPiece)\n            s.pieces.delete(cur.orig);\n        s.draggable.current = undefined;\n        board.unselect(s);\n        removeDragElements(s);\n        s.dom.redraw();\n    }\n}\nexports.cancel = cancel;\nfunction removeDragElements(s) {\n    const e = s.dom.elements;\n    if (e.ghost)\n        util.setVisible(e.ghost, false);\n}\nfunction pieceElementByKey(s, key) {\n    let el = s.dom.elements.board.firstChild;\n    while (el) {\n        if (el.cgKey === key && el.tagName === 'PIECE')\n            return el;\n        el = el.nextSibling;\n    }\n    return;\n}\n//# sourceMappingURL=drag.js.map","var toInteger = require('../internals/to-integer');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `String.prototype.{ codePointAt, at }` methods implementation\nvar createMethod = function (CONVERT_TO_STRING) {\n  return function ($this, pos) {\n    var S = String(requireObjectCoercible($this));\n    var position = toInteger(pos);\n    var size = S.length;\n    var first, second;\n    if (position < 0 || position >= size) return CONVERT_TO_STRING ? '' : undefined;\n    first = S.charCodeAt(position);\n    return first < 0xD800 || first > 0xDBFF || position + 1 === size\n      || (second = S.charCodeAt(position + 1)) < 0xDC00 || second > 0xDFFF\n        ? CONVERT_TO_STRING ? S.charAt(position) : first\n        : CONVERT_TO_STRING ? S.slice(position, position + 2) : (first - 0xD800 << 10) + (second - 0xDC00) + 0x10000;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.codePointAt` method\n  // https://tc39.github.io/ecma262/#sec-string.prototype.codepointat\n  codeAt: createMethod(false),\n  // `String.prototype.at` method\n  // https://github.com/mathiasbynens/String.prototype.at\n  charAt: createMethod(true)\n};\n","'use strict';\nvar defineProperty = require('../internals/object-define-property').f;\nvar create = require('../internals/object-create');\nvar redefineAll = require('../internals/redefine-all');\nvar bind = require('../internals/function-bind-context');\nvar anInstance = require('../internals/an-instance');\nvar iterate = require('../internals/iterate');\nvar defineIterator = require('../internals/define-iterator');\nvar setSpecies = require('../internals/set-species');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar fastKey = require('../internals/internal-metadata').fastKey;\nvar InternalStateModule = require('../internals/internal-state');\n\nvar setInternalState = InternalStateModule.set;\nvar internalStateGetterFor = InternalStateModule.getterFor;\n\nmodule.exports = {\n  getConstructor: function (wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER) {\n    var C = wrapper(function (that, iterable) {\n      anInstance(that, C, CONSTRUCTOR_NAME);\n      setInternalState(that, {\n        type: CONSTRUCTOR_NAME,\n        index: create(null),\n        first: undefined,\n        last: undefined,\n        size: 0\n      });\n      if (!DESCRIPTORS) that.size = 0;\n      if (iterable != undefined) iterate(iterable, that[ADDER], { that: that, AS_ENTRIES: IS_MAP });\n    });\n\n    var getInternalState = internalStateGetterFor(CONSTRUCTOR_NAME);\n\n    var define = function (that, key, value) {\n      var state = getInternalState(that);\n      var entry = getEntry(that, key);\n      var previous, index;\n      // change existing entry\n      if (entry) {\n        entry.value = value;\n      // create new entry\n      } else {\n        state.last = entry = {\n          index: index = fastKey(key, true),\n          key: key,\n          value: value,\n          previous: previous = state.last,\n          next: undefined,\n          removed: false\n        };\n        if (!state.first) state.first = entry;\n        if (previous) previous.next = entry;\n        if (DESCRIPTORS) state.size++;\n        else that.size++;\n        // add to index\n        if (index !== 'F') state.index[index] = entry;\n      } return that;\n    };\n\n    var getEntry = function (that, key) {\n      var state = getInternalState(that);\n      // fast case\n      var index = fastKey(key);\n      var entry;\n      if (index !== 'F') return state.index[index];\n      // frozen object case\n      for (entry = state.first; entry; entry = entry.next) {\n        if (entry.key == key) return entry;\n      }\n    };\n\n    redefineAll(C.prototype, {\n      // 23.1.3.1 Map.prototype.clear()\n      // 23.2.3.2 Set.prototype.clear()\n      clear: function clear() {\n        var that = this;\n        var state = getInternalState(that);\n        var data = state.index;\n        var entry = state.first;\n        while (entry) {\n          entry.removed = true;\n          if (entry.previous) entry.previous = entry.previous.next = undefined;\n          delete data[entry.index];\n          entry = entry.next;\n        }\n        state.first = state.last = undefined;\n        if (DESCRIPTORS) state.size = 0;\n        else that.size = 0;\n      },\n      // 23.1.3.3 Map.prototype.delete(key)\n      // 23.2.3.4 Set.prototype.delete(value)\n      'delete': function (key) {\n        var that = this;\n        var state = getInternalState(that);\n        var entry = getEntry(that, key);\n        if (entry) {\n          var next = entry.next;\n          var prev = entry.previous;\n          delete state.index[entry.index];\n          entry.removed = true;\n          if (prev) prev.next = next;\n          if (next) next.previous = prev;\n          if (state.first == entry) state.first = next;\n          if (state.last == entry) state.last = prev;\n          if (DESCRIPTORS) state.size--;\n          else that.size--;\n        } return !!entry;\n      },\n      // 23.2.3.6 Set.prototype.forEach(callbackfn, thisArg = undefined)\n      // 23.1.3.5 Map.prototype.forEach(callbackfn, thisArg = undefined)\n      forEach: function forEach(callbackfn /* , that = undefined */) {\n        var state = getInternalState(this);\n        var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3);\n        var entry;\n        while (entry = entry ? entry.next : state.first) {\n          boundFunction(entry.value, entry.key, this);\n          // revert to the last existing entry\n          while (entry && entry.removed) entry = entry.previous;\n        }\n      },\n      // 23.1.3.7 Map.prototype.has(key)\n      // 23.2.3.7 Set.prototype.has(value)\n      has: function has(key) {\n        return !!getEntry(this, key);\n      }\n    });\n\n    redefineAll(C.prototype, IS_MAP ? {\n      // 23.1.3.6 Map.prototype.get(key)\n      get: function get(key) {\n        var entry = getEntry(this, key);\n        return entry && entry.value;\n      },\n      // 23.1.3.9 Map.prototype.set(key, value)\n      set: function set(key, value) {\n        return define(this, key === 0 ? 0 : key, value);\n      }\n    } : {\n      // 23.2.3.1 Set.prototype.add(value)\n      add: function add(value) {\n        return define(this, value = value === 0 ? 0 : value, value);\n      }\n    });\n    if (DESCRIPTORS) defineProperty(C.prototype, 'size', {\n      get: function () {\n        return getInternalState(this).size;\n      }\n    });\n    return C;\n  },\n  setStrong: function (C, CONSTRUCTOR_NAME, IS_MAP) {\n    var ITERATOR_NAME = CONSTRUCTOR_NAME + ' Iterator';\n    var getInternalCollectionState = internalStateGetterFor(CONSTRUCTOR_NAME);\n    var getInternalIteratorState = internalStateGetterFor(ITERATOR_NAME);\n    // add .keys, .values, .entries, [@@iterator]\n    // 23.1.3.4, 23.1.3.8, 23.1.3.11, 23.1.3.12, 23.2.3.5, 23.2.3.8, 23.2.3.10, 23.2.3.11\n    defineIterator(C, CONSTRUCTOR_NAME, function (iterated, kind) {\n      setInternalState(this, {\n        type: ITERATOR_NAME,\n        target: iterated,\n        state: getInternalCollectionState(iterated),\n        kind: kind,\n        last: undefined\n      });\n    }, function () {\n      var state = getInternalIteratorState(this);\n      var kind = state.kind;\n      var entry = state.last;\n      // revert to the last existing entry\n      while (entry && entry.removed) entry = entry.previous;\n      // get next entry\n      if (!state.target || !(state.last = entry = entry ? entry.next : state.state.first)) {\n        // or finish the iteration\n        state.target = undefined;\n        return { value: undefined, done: true };\n      }\n      // return step by kind\n      if (kind == 'keys') return { value: entry.key, done: false };\n      if (kind == 'values') return { value: entry.value, done: false };\n      return { value: [entry.key, entry.value], done: false };\n    }, IS_MAP ? 'entries' : 'values', !IS_MAP, true);\n\n    // add [@@species], 23.1.2.2, 23.2.2.2\n    setSpecies(CONSTRUCTOR_NAME);\n  }\n};\n","<template>\n  <chessboard></chessboard>\n</template>\n\n<script>\nimport chessboard from '../components/Chessboard.vue'\n\nexport default {\n  components: {\n    chessboard\n  },\n  mounted () {\n    this.axios\n    .get('http://localhost/api/admin')\n    .then(response => {\n      console.log(response)\n    })\n    .catch(error => {\n      console.log(error)\n    })\n  }\n}\n</script>\n","<template>\n  <div class='blue merida'>\n    <div ref=\"board\" class=\"cg-board-wrap\"></div><br>\n  </div>\n</template>\n\n<script>\nimport Chess from 'chess.js'\nimport { Chessground } from 'chessground';\n\nexport default {\n  name: 'chessboard',\n  data () {\n    return {\n      fen: this.fen_prop,\n      free: this.free_prop,\n      showThreats: this.showThreats_prop,\n      onPromotion: this.onPromotion_prop,\n      orientation: this.orientation_prop\n    }\n  },\n  props: {\n    fen_prop: {\n      type: String,\n      default: 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR',\n    },\n    free_prop: {\n      type: Boolean,\n      default: false,\n    },\n    showThreats_prop: {\n      type: Boolean,\n      default: false,\n    },\n    onPromotion_prop: {\n      type: Function,\n      default: () => 'q',\n    },\n    orientation_prop: {\n      type: String,\n      default: 'white',\n    }\n  },\n  watch: {\n    fen: function () {\n      this.loadPosition()\n    },\n    orientation: function () {\n      this.loadPosition()\n    },\n    showThreats: function () {\n      if (this.showThreats) {\n        this.paintThreats()\n      }\n    }\n  },\n  methods: {\n    possibleMoves () {\n      const dests = new Map();\n      this.game.SQUARES.forEach(s => {\n        const ms = this.game.moves({square: s, verbose: true})\n        if (ms.length) {\n          dests.set(s, ms.map(m => m.to))\n        }\n      })\n      return dests\n    },\n    opponentMoves () {\n      let originalPGN = this.game.pgn()\n      let tokens = this.game.fen().split(' ')\n      tokens[1] = tokens[1] === 'w' ? 'b' : 'w'\n      tokens = tokens.join(' ')\n      let valid = this.game.load(tokens)\n      if (valid) {\n        let moves = this.game.moves({verbose: true})\n        this.game.load_pgn(originalPGN)\n        return moves\n      } else {\n        return []\n      }\n    },\n    toColor () {\n      return (this.game.turn() === 'w') ? 'white' : 'black'\n    },\n    paintThreats () {\n      let moves = this.game.moves({verbose: true})\n      let threats = []\n      moves.forEach((move) => {\n        threats.push({orig: move.to, brush: 'yellow'})\n\n        if (move['captured']) {\n          threats.push({orig: move.from, dest: move.to, brush: 'red'})\n        }\n        if (move['san'].includes('+')) {\n          threats.push({orig: move.from, dest: move.to, brush: 'blue'})\n        }\n      }) \n      this.board.setShapes(threats)\n    },\n    calculatePromotion () {\n      let moves = this.game.moves({verbose: true})\n      this.promotions = []\n      for (let move of moves) {\n        if (move.promotion) {\n          this.promotions.push(move)\n        }\n      }\n    },\n    isPromotion (orig, dest) {\n      let filteredPromotions = this.promotions.filter(move => move.from === orig && move.to === dest)\n      return filteredPromotions.length > 0\n    },\n    changeTurn () {\n      return (orig, dest) => {\n        if (this.isPromotion(orig, dest)) {\n          this.promoteTo = this.onPromotion()\n        }\n        this.game.move({from: orig, to: dest, promotion: this.promoteTo})\n        this.board.set({\n          fen: this.game.fen(),\n          turnColor: this.toColor(),\n          movable: {\n            color: this.toColor(),\n            dests: this.possibleMoves(),\n          }\n        })\n        this.calculatePromotion()\n        this.afterMove()\n      }\n    },\n    afterMove () {\n      if (this.showThreats) {\n        this.pointThreats()\n      }\n      let threats = this.countThreats(this.toColor()) || {}\n      threats['history'] = this.game.history()\n      threats['fen'] = this.game.fen()\n    this.$emit('onMove', threats)\n    },\n    countThreats (color) {\n      let threats = {}\n      let captures = 0\n      let checks = 0\n      let moves = this.game.moves({verbose: true})\n      if (color !== this.toColor()) {\n        moves = this.opponentMoves()\n      }\n\n      if (moves.length === 0) {\n        return null\n      }\n\n      moves.forEach((move) => {\n        if (move['captured']) {\n          captures++\n        }\n        if (move['san'].includes('+')) {\n          checks++\n        }\n      })\n\n      threats[`legal_${color}`] = this.uniques(moves.map(x => x.from + x.to)).length\n      threats[`checks_${color}`] = checks\n      threats[`threat_${color}`] = captures\n      threats[`turn`] = color\n      return threats\n    },\n    uniques (arr) {\n      let uniqueArray = arr.filter((elem, index, self) => {\n        return index === self.indexOf(elem)\n      })\n      return uniqueArray\n    },\n    loadPosition () {\n      this.game.load(this.fen)\n      this.board = Chessground(this.$refs.board, {\n        fen: this.game.fen(),\n        turnColor: this.toColor(),\n        movable: {\n          color: this.toColor(),\n          free: this.free,\n          dests: this.possibleMoves(),\n        },\n        orientation: this.orientation,\n      })\n      this.board.set({\n        movable: { events: { after: this.changeTurn() } },\n      })\n      this.afterMove()\n    },\n  },\n  mounted () {\n    this.loadPosition()\n  },\n  created () {\n    this.game = new Chess()\n    this.board = null\n    this.promotions = []\n    this.promoteTo = 'q'\n  }\n}\n</script>\n\n<style>\n.cg-board-wrap {\n  width: 320px;\n  height: 320px;\n  position: relative;\n  display: block;\n}\ncg-board {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  line-height: 0;\n  background-size: cover;\n  cursor: pointer;\n}\ncg-board square {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 12.5%;\n  height: 12.5%;\n}\ncg-board square.move-dest {\n  background: radial-gradient(rgba(20, 85, 30, 0.5) 22%, #208530 0, rgba(0, 0, 0, 0.3) 0, rgba(0, 0, 0, 0) 0);\n}\ncg-board square.premove-dest {\n  background: radial-gradient(rgba(20, 30, 85, 0.5) 22%, #203085 0, rgba(0, 0, 0, 0.3) 0, rgba(0, 0, 0, 0) 0);\n}\ncg-board square.oc.move-dest {\n  background: radial-gradient(transparent 0%, transparent 80%, rgba(20, 85, 0, 0.3) 80%);\n}\ncg-board square.oc.premove-dest {\n  background: radial-gradient(transparent 0%, transparent 80%, rgba(20, 30, 85, 0.2) 80%);\n}\ncg-board .cg-square.move-dest.drag-over,\ncg-board .cg-square.premove-dest.drag-over {\n  box-shadow: inset 0 0 10px 2px rgba(216, 85, 0, 0.9);\n}\ncg-board square.last-move {\n  will-change: transform;\n  background-color: rgba(155, 199, 0, 0.41);\n}\ncg-board square.selected {\n  background-color: rgba(20, 85, 30, 0.5);\n}\ncg-board square.check {\n  background: radial-gradient(ellipse at center, rgba(255, 0, 0, 1) 0%, rgba(231, 0, 0, 1) 25%, rgba(169, 0, 0, 0) 89%, rgba(158, 0, 0, 0) 100%);\n}\ncg-board square.current-premove {\n  background-color: rgba(20, 30, 85, 0.5);\n}\ncg-board piece {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 12.5%;\n  height: 12.5%;\n  background-size: cover;\n  z-index: 2;\n  will-change: transform;\n}\ncg-board piece.dragging {\n  cursor: move;\n  z-index: 9;\n}\ncg-board piece.anim {\n  z-index: 8;\n}\ncg-board piece.fading {\n  z-index: 1;\n  opacity: 0.5;\n}\n.cg-board-wrap div.over {\n  position: absolute;\n  top: 0;\n  left: 0;\n  background-color: rgba(20, 85, 30, 0.3);\n}\n.cg-board-wrap piece.ghost {\n  opacity: 0.3;\n}\n.cg-board-wrap svg {\n  overflow: hidden;\n  position: relative;\n  top: 0px;\n  left: 0px;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  z-index: 2;\n  opacity: 0.6;\n}\n.cg-board-wrap svg image {\n  opacity: 0.5;\n}\n.cg-board-wrap coords {\n  position: absolute;\n  display: flex;\n  pointer-events: none;\n  opacity: 0.8;\n  font-size: 9px;\n}\n.cg-board-wrap coords.ranks {\n  right: -15px;\n  top: 0;\n  flex-flow: column-reverse;\n  height: 100%;\n  width: 12px;\n}\n.cg-board-wrap coords.ranks.black {\n  flex-flow: column;\n}\n.cg-board-wrap coords.files {\n  bottom: -16px;\n  left: 0;\n  flex-flow: row;\n  width: 100%;\n  height: 16px;\n  text-transform: uppercase;\n  text-align: center;\n}\n.cg-board-wrap coords.files.black {\n  flex-flow: row-reverse;\n}\n.cg-board-wrap coords coord {\n  flex: 1 1 auto;\n}\n.cg-board-wrap coords.ranks coord {\n  transform: translateY(39%);\n}\n\n\n/* THEME CUSTOMIZATION*/\n/*\n * Board\n */\n.blue .cg-board-wrap {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZpZXdCb3g9IjAgMCA4MDAgODAwIj4NCjxnIGlkPSJicm93bi1ib2FyZCI+DQo8ZyBpZD0iTGlnaHQiIGZpbGw9IiNkZWUzZTYiPg0KPHJlY3Qgd2lkdGg9IjgwMCIgaGVpZ2h0PSI4MDAiLz4NCjwvZz4NCjxnIGlkPSJGcmFtZSIgZmlsbD0ibm9uZSI+DQo8cmVjdCB3aWR0aD0iODAwIiBoZWlnaHQ9IjgwMCIvPg0KPC9nPg0KPGcgaWQ9IkRhcmsiIGZpbGw9IiM4Y2EyYWQiPg0KPGcgaWQ9InJheiI+DQo8ZyBpZD0iZHZhIj4NCjxnIGlkPSJ0cmkiPg0KPHJlY3QgeD0iMTAwIiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIvPg0KPHJlY3QgeD0iMzAwIiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIvPg0KPHJlY3QgeD0iNTAwIiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIvPg0KPHJlY3QgeD0iNzAwIiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIvPg0KPC9nPg0KPHVzZSB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTAwLDEwMCkiIHhsaW5rOmhyZWY9IiN0cmkiLz4NCjwvZz4NCjx1c2UgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCwyMDApIiB4bGluazpocmVmPSIjZHZhIi8+DQo8L2c+DQo8dXNlIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAsNDAwKSIgeGxpbms6aHJlZj0iI3JheiIvPg0KPC9nPg0KPC9nPg0KPC9zdmc+');\n}\n\n.merida cg-board piece.pawn.white {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNzcuMTciIGhlaWdodD0iMTc3LjE3IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiB2aWV3Qm94PSIwIDAgNTAgNTAiPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iMCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSIyMS4xMyIgeTE9IjM3LjM1IiB4Mj0iNzcuNzYiIHkyPSIzNy40NjkiIGdyYWRpZW50VHJhbnNmb3JtPSJtYXRyaXgoMSAwIDAgLjk3MzI0IDAgMS4yNDMpIj48c3RvcCBzdG9wLWNvbG9yPSIjZmZmIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cGF0aCBkPSJtMjUgNDYuNDVoLTEzLjM5NGMtLjY2LTEuNjA3LS45OTEtMy4yODgtLjk5MS01LjA0IDAtMi45NzUuODY0LTUuNjQ0IDIuNTk5LTguMDIgMS43MzYtMi4zNjUgMy45NzEtNC4wNTQgNi42OTctNS4wNjgtMS4xNjgtLjUyNy0yLjEyNS0xLjMyNy0yLjg2Mi0yLjM5OC0uNzM3LTEuMDcxLTEuMTAxLTIuMjgzLTEuMTAxLTMuNjM0IDAtMS42ODkuNTc2LTMuMTU2IDEuNzM2LTQuMzkyIDEuMTUyLTEuMjQ0IDIuNTc0LTEuOTYxIDQuMjY3LTIuMTUxLTEuMzQ2LS45ODEtMi4wMi0yLjI4Mi0yLjAyLTMuODg5IDAtMS4zNTEuNDkxLTIuNTEzIDEuNDgyLTMuNDc3Ljk4Mi0uOTY0IDIuMTc2LTEuNDQyIDMuNTgxLTEuNDQyIDEuMzg5IDAgMi41ODIuNDc4IDMuNTczIDEuNDQyLjk5MS45NjQgMS40OSAyLjEyNiAxLjQ5IDMuNDc3IDAgMS42MDctLjY2OSAyLjkwOS0yLjAyIDMuODg5IDEuNjkzLjE5IDMuMTE2LjkwNiA0LjI2NyAyLjE1MSAxLjE2IDEuMjM2IDEuNzM2IDIuNzAzIDEuNzM2IDQuMzkyIDAgMS4zNTEtLjM3MyAyLjU2My0xLjEyNiAzLjYzNC0uNzUzIDEuMDcxLTEuNzEgMS44Ny0yLjg2MiAyLjM5OCAyLjcyNiAxLjAxNCA0Ljk2MSAyLjcwMyA2LjY5NyA1LjA2OCAxLjczNiAyLjM3MyAyLjU5OSA1LjA0IDIuNTk5IDguMDIgMCAxLjczOS0uMzIyIDMuNDItLjk2NSA1LjA0aC0xMy4zOTQiIGZpbGw9IiMxZjFhMTciLz48cGF0aCBkPSJtMjUgNDQuODA4aDEyLjE3NWMuMzQ3LTEuMTU0LjUyNS0yLjI5MS41MjUtMy40MDMgMC0yLjUxMy0uNzExLTQuNzg3LTIuMTQyLTYuODMxLTEuNDMxLTIuMDQ0LTMuMjc3LTMuNTUyLTUuNTItNC41MTYtMS41ODQtLjYyLTEuNjQzLS42NTktMS42NDMtMS43MzkgMC0uODQ5LjU1OS0xLjQ3NSAxLjY2OC0xLjg3OSAxLjUzMi0xLjA0NyAyLjMwMy0yLjQzMSAyLjMwMy00LjE1MyAwLTEuMjQ0LS40MzItMi4zMjQtMS4yODctMy4yNjMtLjg2NC0uOTMxLTEuOTA1LTEuNDY3LTMuMTI0LTEuNjE1LS45OTktLjA4Mi0xLjQ5LS42MjYtMS40OS0xLjY0IDAtLjQ1My4xNzgtLjg3My41NDItMS4yNjEuODk4LS42NzYgMS4zNDYtMS41NTcgMS4zNDYtMi42NTMgMC0uODk4LS4zMzktMS42NzMtLjk5OS0yLjMxNi0uNjYtLjY0My0xLjQ0OC0uOTY0LTIuMzU0LS45NjQtLjk0IDAtMS43NDQuMzIxLTIuMzk2Ljk2NC0uNjUyLjY0My0uOTc0IDEuNDE3LS45NzQgMi4zMTYgMCAxLjA3OS40NCAxLjk2MSAxLjMzOCAyLjY1My4zNjQuMzU0LjU0Mi43NzUuNTQyIDEuMjYxIDAgMS4wMTQtLjQ4MyAxLjU1Ny0xLjQ2NSAxLjY0LTEuMjM2LjE0OC0yLjI4Ni42ODQtMy4xMzMgMS42MTUtLjg1NS45MzktMS4yNzkgMi4wMi0xLjI3OSAzLjI2MyAwIDEuNzIyLjc3IDMuMTA2IDIuMzAzIDQuMTUzIDEuMTA5LjQxMiAxLjY2OCAxLjA0NiAxLjY2OCAxLjg3OSAwIDEuMDc5LS4wNjcgMS4xMTgtMS42NjggMS43MzktMi4yNDQuOTY0LTQuMDgxIDIuNDcyLTUuNTAzIDQuNTE2LTEuNDIyIDIuMDQ0LTIuMTM0IDQuMzE4LTIuMTM0IDYuODMxIDAgMS4xOTUuMTc4IDIuMzI0LjUyNSAzLjQwM2gxMi4xNzUiIGZpbGw9InVybCgjMCkiLz48L3N2Zz4=');\n} \n.merida cg-board piece.bishop.white {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNzcuMTciIGhlaWdodD0iMTc3LjE3IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiB2aWV3Qm94PSIwIDAgNTAgNTAiPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iMCIgeDE9IjIxLjEzIiB5MT0iMzcuNTkyIiB4Mj0iNzcuNjQiIHkyPSIzNy40NjkiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBzdG9wLWNvbG9yPSIjZmZmIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cGF0aCBmaWxsPSIjMWYxYTE3IiBkPSJtMjUuNDQ3IDQyLjAxYy0uMjI5Ljk0LS41MTcgMS41OTItLjg0NyAxLjk1Ni0uMzMuMzY0LS43NjIuNzQ1LTEuMzEyIDEuMTQzLS41OTMuNDE1LTEuMjk1Ljc2Mi0yLjEwOCAxLjA1LS44MTMuMjg4LTEuNzEuMzY0LTIuNzAxLjIxMmwtNi45NjgtLjk2NWMtLjI4OC0uMDM0LS41MzMtLjAzNC0uNzYyIDAtLjIyLjAzNC0uNDMyLjA1MS0uNjM1LjA1MS0uMzQ3IDAtLjc4Ny4wNzYtMS4zMjEuMjM3LS41NDIuMTUyLS45NTcuMzgxLTEuMjUzLjY3N2wtMi40MDUtMy45NDZjLjI5Ni0uMzMuNTU5LS41NTkuNzg3LS42OTQuMjM3LS4xMjcuNTA4LS4yNzEuODIxLS40MTUuOTU3LS40NDkgMS45ODEtLjcyIDMuMDczLS44MjEuNDY2LS4wMzQuOTIzLS4wNDIgMS4zNjMtLjAyNS40NDkuMDE3LjkxNCAwIDEuMzk3LS4wNTEuODg5LjE1MiAxLjc4Ni4yODggMi42ODQuNDA2LjkwNi4xMjcgMS44MTIuMjU0IDIuNzE4LjM4OS45OTEgMCAxLjY2LS4xMDIgMi4wMS0uMjk2LjE4Ni0uMTAyLjQ3NC0uMjg4Ljg3Mi0uNTUuMzk4LS4yNjIuNzk2LS42NTIgMS4xOTQtMS4xNjgtLjg4MS0uMDkzLTEuNzctLjI2Mi0yLjY4NC0uNTA4LS45MDYtLjIzNy0xLjcxLS40OTEtMi40MDQtLjc1NGwyLjU4Mi02LjQwMWMtMS4yOTUtLjc0NS0yLjE5My0xLjMzOC0yLjcwOS0xLjc5NS0uNTA4LS40NTctLjkxNC0uOTgyLTEuMjExLTEuNTc1LS40MzItLjc2Mi0uNzExLTEuNDk5LS44My0yLjIxLS4xMjctLjcxMS0uMTc4LTEuMzQ2LS4xNjEtMS45MTMuMDE3LS45OTEuMjQ1LTIuMDgzLjcwMy0zLjI4NS40NTctMS4xOTQgMS4zMTItMi4yNjkgMi41NjUtMy4yMDkgMS4wNDEtLjc5NiAyLjA2Ni0xLjYxNyAzLjA1Ny0yLjQ1NS45OTEtLjg0NyAxLjk3My0xLjgyOSAyLjk0Ni0yLjk1NS0xLjIxOS0uNjI3LTEuODI5LTEuNjI2LTEuODI5LTIuOTk3IDAtLjkzMS4zMjItMS43MTkuOTc0LTIuMzg4LjY1Mi0uNjYgMS40NTYtLjk5MSAyLjM5Ni0uOTkxLjkyMyAwIDEuNzE5LjMzIDIuMzc5Ljk5MS42Ni42NjkuOTkxIDEuNDU2Ljk5MSAyLjM4OCAwIDEuMzU1LS42MSAyLjM1NC0xLjgyOSAyLjk5Ny45NTcgMS4xMjYgMS45MyAyLjEwOCAyLjkxMyAyLjk1NS45ODIuODM4IDIuMDIgMS42NiAzLjA5IDIuNDU1IDEuMjM2Ljk0IDIuMDgzIDIuMDIgMi41MjMgMy4yMDkuNDQ5IDEuMjAyLjY5NCAyLjI5NC43MiAzLjI4NSAwIC41NjctLjA1MSAxLjIwMi0uMTY5IDEuOTEzLS4xMTguNzExLS4zODEgMS40NDgtLjc5NiAyLjIxLS4zMy41OTMtLjc0NSAxLjExOC0xLjI1MyAxLjU3NS0uNS40NTctMS4zODkgMS4wNS0yLjY2NyAxLjc5NWwyLjU4MiA2LjQwMWMtLjcyOC4yNjMtMS41NDkuNTE3LTIuNDU1Ljc1NC0uOTE0LjI0Ni0xLjc4Ny40MTUtMi42MzMuNTA4LjM4MS41MTcuNzcuOTA2IDEuMTY4IDEuMTY4LjM5OC4yNjMuNjk0LjQ0OS44OTguNTUuMzQ3LjE5NSAxLjAxNi4yOTYgMi4wMS4yOTYuODg5LS4xMzYgMS43ODYtLjI2MyAyLjY5Mi0uMzg5Ljg5OC0uMTE4IDEuODAzLS4yNTQgMi43MTgtLjQwNi40NC4wNTEuODg5LjA2OCAxLjM0Ni4wNTEuNDU3LS4wMTcuOTIzLS4wMDggMS40MDUuMDI1IDEuMDU4LjEwMiAyLjA4My4zNzMgMy4wNzMuODIxLjI5Ni4xNDQuNTY3LjI4OC44MDQuNDE1LjI0NS4xMzUuNTA4LjM2NC44MDQuNjk0bC0yLjQzIDMuOTQ2Yy0uMjk2LS4yOTYtLjcxMS0uNTI1LTEuMjUzLS42NzctLjUzMy0uMTYxLS45NjUtLjIzNy0xLjI5NS0uMjM3LS4yMiAwLS40NC0uMDE3LS42Ni0uMDUxLS4yMi0uMDM0LS40NzQtLjAzNC0uNzU0IDBsLTYuOTUxLjk2NWMtLjk5MS4xNTItMS45MTMuMDg1LTIuNzYtLjE5NS0uODU1LS4yNzktMS41NTgtLjY1Mi0yLjEtMS4xMTgtLjU0Mi0uNDQ5LS45ODItLjgzLTEuMzA0LTEuMTUxLS4zMjItLjMyMi0uNTkzLS45NTctLjgwNC0xLjg5NyIvPjxwYXRoIGZpbGw9InVybCgjMCkiIGQ9Im0yNi4zMiAzOS4yYzAgMS4wOTIuMjQ1IDIuMDI0Ljc1MyAyLjc5NC41Ljc3IDEuMDQxIDEuMzcyIDEuNjI2IDEuNzk1LjkwNi42NjkgMi4yMzUuOTk5IDMuOTg4Ljk5OS40MzIgMCAxLjI3OS0uMDkzIDIuNTMyLS4yNzkgMS4wMjUtLjE2MSAxLjg1NC0uMjc5IDIuNDgxLS4zNTYuNjI3LS4wNzYgMS4wNS0uMTM1IDEuMjctLjE4Ni42MjctLjA4NSAxLjI4Ny0uMDY4IDEuOTgxLjA1MS4yNjIuMDY4LjU1OS4xMjcuODguMTg2LjMyMi4wNTkuNTkzLjE4Ni44MDQuMzgxbDEuMTk0LTEuOTNjLS42NzctLjM0Ny0xLjM5Ny0uNTkzLTIuMTU5LS43Mi0xLjI1My0uMjItMi4zNTQtLjI2My0zLjMwMi0uMTUyLS4yNzkuMDM0LS42NDMuMTE4LTEuMTAxLjI0NS0uNDU3LjEzNi0xLjA2Ny4yNjMtMS44NDYuMzczLTEuNjc2LjI3MS0yLjU1Ny4zOTgtMi42NTkuMzk4LS42NDQgMC0xLjIwMi0uMDc2LTEuNjg1LS4yNDYtLjQ4My0uMTY5LS45MDYtLjM0Ny0xLjI4Ny0uNTQyLS44ODEtLjM5OC0xLjc3LTEuMzM4LTIuNjg0LTIuODExaC0uNzg3bS0xLjc2MSAwaC0uNzk2Yy0uOTMxIDEuNDktMS44MTIgMi40My0yLjY1OSAyLjgxMS0uMzk4LjE5NS0uODMuMzczLTEuMzEyLjU0Mi0uNDgzLjE2OS0xLjAzMy4yNDYtMS42Ni4yNDYtLjExOSAwLS45OTktLjEyNy0yLjY1OS0uMzk4LS43ODctLjExLTEuNDIyLS4yMzctMS44OC0uMzczLS40NjYtLjEyNy0uODMtLjIxMi0xLjA5Mi0uMjQ1LS45NDgtLjExLTIuMDQtLjA2OC0zLjMwMi4xNTItLjc2Mi4xMjctMS40NzMuMzczLTIuMTM0LjcybDEuMTk0IDEuOTNjLjE5NS0uMTk1LjQ1Ny0uMzIyLjc3OS0uMzgxLjMyMi0uMDU5LjYxOC0uMTE4Ljg4LS4xODYuNjk0LS4xMTkgMS4zNTUtLjEzNiAxLjk4MS0uMDUxLjIyLjA1MS42NDMuMTEgMS4yNy4xODYuNjI3LjA3NiAxLjQ2NS4xOTUgMi41MDYuMzU2IDEuMjM2LjE4NiAyLjA4My4yNzkgMi41MzIuMjc5IDEuNzM2IDAgMy4wNjUtLjMzIDMuOTg4LS45OTkuNTY3LS40MjMgMS4xMDEtMS4wMjUgMS42LTEuNzk1LjUwOC0uNzcuNzYyLTEuNzAyLjc2Mi0yLjc5NG0uODg5LTkuMzQ3YzEuNiAwIDMuMTQxLjEyNyA0LjYxNC4zNzMgMS42MTctLjU3NiAyLjc5NC0xLjQ4MiAzLjUyMi0yLjcwMS42MjctMS4wNTguOTQtMi4yMjcuOTQtMy40OTcgMC0uNzYyLS4xODYtMS42LS41NjctMi41MjMtLjM4MS0uOTE0LS45OTktMS43NDQtMS44NjMtMi40ODktLjk3NC0uODEzLTIuMDQtMS43MDItMy4yLTIuNjY3LTEuMTUxLS45NjUtMi4zMDMtMi4xLTMuNDQ2LTMuMzg3LTEuMTYgMS4yODctMi4zMTEgMi40MjItMy40NzEgMy4zODctMS4xNi45NjUtMi4yMTggMS44NTQtMy4xNzUgMi42NjctLjg4MS43NDUtMS40OTkgMS41NzUtMS44NzEgMi40ODktLjM3Mi45MjMtLjU1OSAxLjc2MS0uNTU5IDIuNTIzIDAgMS4yNy4zMDUgMi40MzguOTE0IDMuNDk3LjcxMSAxLjIxOSAxLjg5NyAyLjEyNSAzLjU0OCAyLjcwMSAxLjQ1Ni0uMjQ2IDIuOTk3LS4zNzMgNC42MTQtLjM3M20wIDQuNTEzYzEuOTM5IDAgMy43OTMuMTk1IDUuNTc5LjU3NmwtMS4xODUtMy4wNTdjLTEuNDU2LS4yMjktMi45MjEtLjM0Ny00LjM5NC0uMzQ3LTEuNTA3IDAtMi45OC4xMTktNC40MTEuMzQ3bC0xLjE5NCAzLjA1N2MxLjc3LS4zODEgMy42NDEtLjU3NiA1LjYwNS0uNTc2bTAtMjMuNTM3YzEuMTI2IDAgMS42ODUtLjU1OSAxLjY4NS0xLjY4NSAwLTEuMTI2LS41NTktMS42OTMtMS42ODUtMS42OTMtMS4xMjYgMC0xLjY4NS41NjctMS42ODUgMS42OTMgMCAxLjEyNi41NTkgMS42ODUgMS42ODUgMS42ODVtMCAyNy4wMWMxLjEyNiAwIDIuMjE4LS4wOTMgMy4yODUtLjI3OSAxLjA2Ny0uMTk1IDIuMS0uNDIzIDMuMDktLjY4Ni0xLjkzOS0uNTA4LTQuMDY0LS43Ny02LjM3NS0uNzctMi4zNDUgMC00LjQ3LjI2My02LjM3NS43Ny45NTcuMjYzIDEuOTczLjQ5MSAzLjA0OC42ODYgMS4wNzUuMTg2IDIuMTg0LjI3OSAzLjMyNy4yNzltLS44ODktMTQuMzM0bC0yLjA2Ni0uMDI1Yy0uNTU5IDAtLjgzOC0uMjc5LS44MzgtLjg0NyAwLS41NTkuMjc5LS44MzguODM4LS44MzhoMi4wNjZ2LTIuMTM0YzAtLjU3Ni4yOTYtLjg3Mi44ODktLjg3Mi41NzYgMCAuODcyLjI5Ni44NzIuODcydjIuMTM0aDIuMTM0Yy41NDIgMCAuODEzLjI3OS44MTMuODM4IDAgLjU2Ny0uMjcxLjg0Ny0uODEzLjg0N2gtMi4xMzR2Mi4wMzJjMCAuNjAxLS4yOTYuODk4LS44NzIuODk4LS41OTMgMC0uODg5LS4yOTYtLjg4OS0uODk4di0yLjAxIi8+PC9zdmc+');\n}\n.merida cg-board piece.knight.white {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNzcuMTciIGhlaWdodD0iMTc3LjE3IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiB2aWV3Qm94PSIwIDAgNTAgNTAiPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iMCIgeDE9IjIxLjQwNSIgeDI9Ijc3LjY0IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agc3RvcC1jb2xvcj0iI2ZmZiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PHBhdGggZmlsbD0iIzFmMWExNyIgZD0ibTI2LjE4IDkuMzk1YzIuNTk5LjE2OSA1IC44MzggNy4yMjIgMi4wMiAyLjIxIDEuMTY4IDQuMDk4IDIuNjc1IDUuNjU2IDQuNTEzIDEuMDkyIDEuMjg3IDIuMTE3IDIuODQ1IDMuMDgyIDQuNjY1Ljk3NCAxLjgxMiAxLjc0NCAzLjc0MiAyLjMyIDUuNzc0LjY2IDIuMzcxIDEuMDg0IDQuODUxIDEuMjUzIDcuNDU5LjE3OCAyLjU5OS4yNjMgNS4wMS4yNjMgNy4yM3Y1LjQwMmMwIDAtMS4yODcgMC0zLjg2MSAwLTIuNTY1IDAtNS45MDEgMC0xMC4wMSAwaC0xNi42MzdjLS4xNTIgMC0uMjItLjQwNi0uMjEyLTEuMjExLjAwOC0uODEzLjA1OS0xLjQ2NS4xNjEtMS45NjQuMDU5LS4zOTguMjItLjk1Ny40NjYtMS42ODUuMjU0LS43MjguNjYtMS42MDkgMS4yNDUtMi42NS4yNjItLjUzMy44ODktMS4zMDQgMS44OC0yLjMyLjk5OS0xLjAxNiAyLjEzNC0yLjIwMSAzLjQyOS0zLjUzOS43NDUtLjc2MiAxLjMyMS0xLjcxOSAxLjc0NC0yLjg3OS40MjMtMS4xNTEuNjAxLTIuMjAxLjUzMy0zLjE1LS42MS41LTEuMjc5LjkwNi0yLjAxIDEuMjE5LTMuNTA1IDEuMjUzLTYuMDUgMy4wNzMtNy42MTEgNS40NTItLjExOS4xNTItLjQ5MS44MjEtMS4xMTggMi4wMi0uMzMuNjI3LS42MTggMS4wNTgtLjg0NyAxLjI4Ny0uMzEzLjMxMy0uNzcxLjQ5MS0xLjM2My41MjUtLjkyMy4wNDItMS42NDMtLjM5OC0yLjE1OS0xLjM0Ni0uNjk0LjIwMy0xLjMxMi4yODgtMS44NjMuMjU0LS45MjMtLjM0Ny0xLjU5Mi0uNzItMi4wMS0xLjExOC0uODQ3LS44NDctMS4zODktMS42ODUtMS42NTEtMi41MzItLjI1NC0uODQ3LS4zODEtMS43NTMtLjM4MS0yLjcyNiAwLTEuMzg5Ljg1NS0zLjIyNiAyLjU4Mi01LjUxMiAyLjAyLTIuNjI1IDMuMDktNC42MzEgMy4yMTctNiAwLS41OTMuMDU5LTEuMjYyLjE3OC0yLjAxLjEwMi0uNTE3LjMwNS0xLjAxLjYxOC0xLjQ5LjIyLS4zMy4zNjQtLjU1OS40MzItLjY3Ny4wNzYtLjEyNy4yMTItLjMxMy40MTUtLjU1OS4xNDQtLjIwMy4yNzEtLjM1Ni4zNzMtLjQ1Ny4wOTMtLjExLjIyLS4yNTQuMzczLS40NC4xNzgtLjIxMi40MDYtLjQ1Ny42OTQtLjc0NS0uODgtMi40MTMtMS4yMzYtNC45MDItMS4wNjctNy40NTkgMy4yODUgMS4xNjggNi4wNSAzLjAxIDguMjggNS41MjkuNTUtMS44NzEgMS42MjYtMy4zODcgMy4yMjYtNC41MzggMS4zMjEuOTIzIDIuMzcxIDIuMTUxIDMuMTUgMy42NjYiLz48cGF0aCBmaWxsPSJ1cmwoIzApIiBkPSJtNDIuOTc2IDQ0LjY5M2MtLjAxNyAwIDAtLjQ0OS4wNDItMS4zNDYuMDUxLS45MDYuMDc2LTEuODguMDc2LTIuOTIxLjAxNy0yLjA2Ni4wMTctNC4yIDAtNi40MDktLjAxNy0yLjIxLS4zMTMtNC40MTEtLjg4OS02LjYxMy0uNTY3LTIuMTE3LTEuMTg1LTMuOTItMS44NjMtNS40MTktLjY3Ny0xLjQ5OS0xLjQxNC0yLjc4Ni0yLjIxLTMuODc4LTEuMTg1LTEuNzg2LTIuODExLTMuMzAyLTQuODYtNC41MzgtMi4wNDktMS4yNDUtNC4xOTEtMi4wNTctNi40MjYtMi40MzguMTUyLjgxMy4yMiAxLjYwOS4yMDMgMi4zODgtLjAzNC41OTMtLjMxMy44ODktLjg0Ny44ODktLjYxIDAtLjg4MS0uMjk2LS44MjEtLjg4OS4wNTEtMi4xODQtLjcyOC00LjA1Ni0yLjMyOC01LjYwNS0xLjI1MyAxLjMyMS0xLjkzOSAyLjg1My0yLjAzMiA0LjYwNi0uMDM0LjU4NC0uMzMuODM4LS44OTcuNzcxLS41MjUtLjAxNy0uNzg3LS4zMjItLjc4Ny0uOTE0IDAgMCAuMDE3LS4wNjguMDQyLS4yMDMtLjY3Ny4yMi0xLjM4OS41MjUtMi4xMzQuOTIzLS40NzQuMzMtLjg2NC4yNDUtMS4xNi0uMjQ2LS4yOTYtLjQ5OS0uMTY5LS44ODkuMzk4LTEuMTY4LjcxMS0uMzY0IDEuMjQ1LS42MzUgMS42MDktLjgyMS0xLjQyMi0xLjQ1Ni0zLjA0LTIuNjI1LTQuODYtMy41MjIuMTk1IDIuMzAzLjgzIDQuNDcgMS44ODggNi41MjguMjc5LjQyMy4yMTIuODA0LS4yMDMgMS4xMzUtLjQ2Ni4zNjQtLjg1NS4zMTMtMS4xNjgtLjE2OS0uMTEtLjE2OS0uMjc5LS40NjYtLjQ5MS0uODk3LS4zNDcuMzQ3LS41ODQuNjEtLjY5NC43Ny0uMTE4LjE1Mi0uMzIyLjQ4My0uNjEuOTkxLS4yODguNTE2LS40OTkuOTQtLjYzNSAxLjI3LS4xNDQuNDE1LS4yMTIuNzQ1LS4xODYgMS4wMS4wMjUuMjU0LjA1MS41MzMuMDY4Ljg1NS0uMTUyLjk3NC0uNDkxIDEuODg4LTEuMDEgMi43NTItLjUyNS44NTUtMS4xODUgMS45MDUtMS45OTggMy4xNS0uNzc5IDEuMTg1LTEuMzcyIDIuMDgzLTEuNzg2IDIuNjc1LS40MTUuNjAxLS43MjggMS4zNTUtLjk0IDIuMjg2LS4xNTIuNTU5LS4xNTIgMS4yNDUgMCAyLjA0MS4xNDQuODA0LjQ3NCAxLjQzMS45NjUgMS44OC43NjIuNzcgMS40OTkgMS4xMjYgMi4yMSAxLjA2Ny4yMjkgMCAuNTQyLS4wOTMuOTMxLS4yNzkuMzg5LS4xNzguNjg2LS41MjUuOTA2LTEuMDQxLjQyMy0uOTQuNzc5LTEuNDE0IDEuMDY3LTEuNDE0LjQwNiAwIC42MzUuMjM3LjY2OS42OTQgMCAuMTAyLS4xMzYuNTE3LS4zOTggMS4yNDUtLjE1Mi4zMy0uMzQ3LjY3Ny0uNTkzIDEuMDQxLS4zMjIuNDMyLS40NTcuNjEtLjQyMy41NDIuMjYyLjk0OC43MDMgMS4xMDkgMS4zMTIuNDk5LjE3OC0uMTc4LjM4OS0uNTI1LjYxOC0xLjAxNi4yMzctLjQ5OS42MDEtMS4xNjggMS4wOTItMi4wMS41ODQtLjk4MiAxLjIwMi0xLjc3IDEuODYzLTIuMzg4LjY2LS42MSAxLjI0NS0xLjEwOSAxLjc2MS0xLjQ4Mi4yOTYtLjIyLjY2LS40NjYgMS4wOTItLjc0NS40MzItLjI4OCAxLjAxLS41NzYgMS43MzYtLjg3Mi41NzYtLjIyOSAxLjIxOS0uNTE2IDEuOTIyLS44NTUuNzAzLS4zMzkgMS4zMjktLjc3IDEuODcxLTEuMzA0Ljc2Mi0uNzQ1IDEuMzQ2LTEuNjU5IDEuNzYxLTIuNzUyLjIyLS42MS4yOTYtMS4zNjMuMjQ1LTIuMjYxLS4xNDQtLjU1OS4xMzYtLjgzOC44NDctLjgzOC41MzMgMCAuODMuMjcxLjg5OC44MjEgMCAxLjg2My0uNTMzIDMuNTY0LTEuNTkyIDUuMTA1LjM0NyAxLjA1OC40NCAyLjIxOC4yNzEgMy40NzEtLjE0NCAxLjAxLS41IDIuMDkxLTEuMDUgMy4yNDMtLjU1OSAxLjE0My0xLjY3NiAyLjQyMi0zLjM2MSAzLjgyNy0zLjQyOSAyLjg0NS01LjA1IDUuNzc0LTQuODYgOC43OCAwIDAgMS40MDUgMCA0LjIyNSAwIDIuODE5IDAgNS40NyAwIDcuOTUgMGgxMy41NzJtLTMzLjYzOC0xNS4wOGMtLjQ4My4yOTYtLjc3LjY5NC0uODcyIDEuMTk0LjAxNy41NDItLjIzNy44MzgtLjc2Mi44ODktLjU4NC4wNjgtLjg4MS0uMTc4LS44OTgtLjc0NS4wNjgtMS4wOTIuNTUtMS45NTYgMS40NjUtMi41OTkuNDMyLS4zNDcuODMtLjMyMiAxLjE5NC4wOTMuMzY0LjQ0OS4zMjIuODM4LS4xMjcgMS4xNjhtNy4zNjYtMTEuODI4Yy4yMTIuMzMuMjk2LjY3Ny4yNDYgMS4wNDEtLjE2MSAxLjA1OC0uNzU0IDEuNDk5LTEuNzYxIDEuMzM4LS4yOTYtLjA1MS0uNTMzLS4xNTItLjcyLS4yOTYtLjA1OS4wNzYtLjE2MS4yNjItLjI5Ni41NDItLjE3OC41MzMtLjUyNS43MTEtMS4wNDEuNTUtLjUwOC0uMjAzLS43MTEtLjU3Ni0uNTkzLTEuMTE4Ljc0NS0xLjkwNSAyLjA5MS0zLjIwOSA0LjA0LTMuOTIuNTY3LS4xNjkuOTQgMCAxLjExOC40OTEuMjAzLjUzMy4wNTEuODk4LS40NDkgMS4wOTItLjA5My4wNTEtLjE4Ni4xMDItLjI3MS4xMzYtLjA4NS4wNDItLjE2OS4wOTMtLjI3MS4xNDQiLz48L3N2Zz4=');\n}\n.merida cg-board piece.rook.white {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNzcuMTciIGhlaWdodD0iMTc3LjE3IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiB2aWV3Qm94PSIwIDAgNTAgNTAiPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iMCIgeDE9IjIxLjM3NiIgeDI9Ijc3LjY0IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agc3RvcC1jb2xvcj0iI2ZmZiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PHBhdGggZmlsbD0iIzFmMWExNyIgZD0ibTI4LjQwOCA5LjIyaDQuMjE2di0zLjM5NWg2Ljc5NnY5LjI5NWwtNS41IDQuMjQzdjExLjg1N2w0LjIyIDQuMjIxdjUuMDhoMy43ODl2NS45MjloLTMzLjg1OXYtNS45MjloMy43OTR2LTUuMDhsNC4yNDYtNC4yMjF2LTExLjg1N2wtNS41MDgtNC4yNDN2LTkuMjk1aDYuNzc0djMuMzk1aDQuMjQydi0zLjM5NWg2Ljc5eiIvPjxwYXRoIGZpbGw9InVybCgjMCkiIGQ9Im0zMy4wNyAxNy42NzhsMy4xNS0yLjU1N2gtMjIuNDJsMy4xNzUgMi41NTdoMTYuMW03LjE5NyAyNC41MjhoLTMwLjUxNHYyLjU1N2gzMC41MTR2LTIuNTU3bS0zLjg0NC01LjA1aC0yMi44MjZ2My4zN2gyMi44MjZ2LTMuMzdtLTQuMjE2LTE3Ljc4OGgtMTQuMzkzdjExLjg2MmgxNC4zOTN2LTExLjg2Mm01LjUwMy01LjkyN3YtNS45MjdoLTMuMzk1djMuMzk1aC03LjY0NXYtMy4zOTVoLTMuMzQ0djMuMzk1aC03LjYydi0zLjM5NWgtMy4zOTV2NS45MjdoMjUuNG0tMS45MTMgMjJsLTIuNTQ4LTIuNTMyaC0xNi40NTFsLTIuNTk5IDIuNTMyaDIxLjU5OCIvPjwvc3ZnPg==');\n}\n.merida cg-board piece.queen.white {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNzcuMTciIGhlaWdodD0iMTc3LjE3IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiB2aWV3Qm94PSIwIDAgNTAgNTAiPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iMCIgeDE9IjIxLjI1MyIgeTE9IjM3LjIyIiB4Mj0iNzcuNjQiIHkyPSIzNy4zNSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiNmZmYiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxnIHN0cm9rZT0iIzFmMWExNyIgc3Ryb2tlLXdpZHRoPSIuMDc2Ij48cGF0aCBmaWxsPSIjMWYxYTE3IiBkPSJtNDQuNTQxIDE0LjcyM2MtLjk0IDAtMS43NDQtLjMzLTIuNDA1LS45ODItLjY2LS42NTItLjk5MS0xLjQ0OC0uOTkxLTIuMzk2IDAtLjkyMy4zMy0xLjcxOS45OTEtMi4zODguNjYtLjY3NyAxLjQ2NS0xLjAxIDIuNDA1LTEuMDEuOTMxIDAgMS43MjcuMzMgMi4zODggMS4wMS42Ni42NjkuOTkxIDEuNDY1Ljk5MSAyLjM4OCAwIC45NDgtLjMzIDEuNzQ0LS45OTEgMi4zOTYtLjY2LjY1Mi0xLjQ1Ni45ODItMi4zODguOTgyem0tNC4zMSAyOS4yMmMtLjgxMy43MTEtMi42MzMgMS4zMDQtNS40NjEgMS43ODYtMi44MjguNDc0LTYuMDg3LjcyLTkuNzcuNzItMy43NTEgMC03LjA1LS4yNTQtOS44OTgtLjc0NS0yLjg0NS0uNDk5LTQuNjQtMS4xMTgtNS4zODUtMS44NjNsMS41NjYtNS45NTItLjY5NC0zLjg5NS0yLjE4NC0zLjc5My0yLjEwOC0xNS40MjYgMS4yMTEtLjQ3NCA2Ljc5OSAxMS40NTUuMTUyLTEzLjY0IDEuNjg1LS4yOTYgNS4xODIgMTMuNzE2IDIuNzc3LTE0Ljc1N2gxLjcxOWwyLjc3NyAxNC43MDcgNS4xMzEtMTMuNjY1IDEuNzEuMjk2LjE1MiAxMy42NCA2LjgyNC0xMS40ODEgMS4xNi41NDItMi4wNTcgMTUuMzU5LTIuMjEgMy43OTMtLjY5NCAzLjk0NiAxLjYxNyA2LjAzem0tMjUuNjk2LTMxLjk1M2MtLjk0OCAwLTEuNzUzLS4zMjItMi40MTMtLjk3NC0uNjYtLjY1Mi0uOTkxLTEuNDU2LS45OTEtMi4zOTYgMC0uOTIzLjMzLTEuNzE5Ljk5MS0yLjM3OS42Ni0uNjYgMS40NjUtLjk5MSAyLjQxMy0uOTkxLjkyMyAwIDEuNzE5LjMzIDIuMzc5Ljk5MS42Ni42Ni45OTEgMS40NTYuOTkxIDIuMzc5IDAgLjk0LS4zMyAxLjc0NC0uOTkxIDIuMzk2LS42Ni42NTItMS40NTYuOTc0LTIuMzc5Ljk3NHptLTkuMTM2IDIuNzM1Yy0uOTQgMC0xLjczNi0uMzMtMi4zODgtLjk4Mi0uNjUyLS42NTItLjk4Mi0xLjQ0OC0uOTgyLTIuMzk2IDAtLjkyMy4zMy0xLjcxOS45ODItMi4zODguNjUyLS42NzcgMS40NDgtMS4wMSAyLjM4OC0xLjAxLjk0OCAwIDEuNzQ0LjMzIDIuNDEzIDEuMDEuNjYuNjY5Ljk5MSAxLjQ2NS45OTEgMi4zODggMCAuOTQ4LS4zMyAxLjc0NC0uOTkxIDIuMzk2LS42NjkuNjUyLTEuNDY1Ljk4Mi0yLjQxMy45ODJ6bTE5LjU1LTMuOTcxYy0uOTQgMC0xLjc0NC0uMzMtMi4zOTYtLjk5MS0uNjUyLS42Ni0uOTc0LTEuNDY1LS45NzQtMi40MDUgMC0uOTMxLjMyMi0xLjcyNy45NzQtMi4zODguNjUyLS42NiAxLjQ1Ni0uOTkxIDIuMzk2LS45OTEuOTIzIDAgMS43MjcuMzMgMi4zOTYuOTkxLjY2OS42Ni45OTkgMS40NTYuOTk5IDIuMzg4IDAgLjk0LS4zMyAxLjc0NC0uOTk5IDIuNDA1LS42NjkuNjYtMS40NzMuOTkxLTIuMzk2Ljk5MXptMTAuNDE0IDEuMjM2Yy0uOTQgMC0xLjczNi0uMzIyLTIuMzg4LS45NzQtLjY1Mi0uNjUyLS45ODItMS40NTYtLjk4Mi0yLjM5NiAwLS45MjMuMzMtMS43MTkuOTgyLTIuMzc5LjY1Mi0uNjYgMS40NDgtLjk5MSAyLjM4OC0uOTkxLjk0OCAwIDEuNzUzLjMzIDIuNDEzLjk5MS42Ni42Ni45OTEgMS40NTYuOTkxIDIuMzc5IDAgLjk0LS4zMyAxLjc0NC0uOTkxIDIuMzk2LS42Ni42NTItMS40NjUuOTc0LTIuNDEzLjk3NHoiLz48cGF0aCBmaWxsPSJ1cmwoIzApIiBkPSJtMzguMjIgNDMuMDRjLTMuMDItMS4yNTMtNy40MTctMS44OC0xMy4xNjYtMS44OC01Ljg3NiAwLTEwLjMxMi42NDMtMTMuMzI3IDEuOTMgMi44OTYgMS4xNDMgNy4zMTUgMS43MSAxMy4yNSAxLjcxIDIuODQ1IDAgNS40NDQtLjE1MiA3Ljc5OC0uNDY2IDIuMzYyLS4zMTMgNC4xNzQtLjc0NSA1LjQ0NC0xLjI5NXptLTEzLjI2Ny0zNC4wM2MxLjEwOSAwIDEuNjYtLjU1OSAxLjY2LTEuNjU5IDAtMS4wOTItLjU1LTEuNjQzLTEuNjYtMS42NDMtMS4wOTIgMC0xLjYzNC41NS0xLjYzNCAxLjY0MyAwIDEuMTAxLjU0MiAxLjY1OSAxLjYzNCAxLjY1OXptMTIuNjI0IDI0Ljk3N2MtMy4xOTItLjgxMy03LjM2Ni0xLjIxMS0xMi41MjItMS4yMTEtNS4yOTIgMC05LjUxNy40MDYtMTIuNjc1IDEuMjM2bC4zNzMgMi4zNzljMy4yMTctLjc2MiA3LjMyNC0xLjE0MyAxMi4zMDItMS4xNDMgNC45NDQgMCA4Ljk3NS4zNzMgMTIuMSAxLjExOGwuNDIzLTIuMzc5em0uNjE4LTEuNDlsMS42MTctMi44NTNjLS43OTYuMzIyLTEuNjA5LjQ3NC0yLjQzLjQ3NC0yLjIxOCAwLTMuOTg4LS44OTctNS4zMDktMi43MDEtLjk5MS44MjEtMi4xIDEuMjM2LTMuMzI3IDEuMjM2LTEuNTgzIDAtMi44NTMtLjYxOC0zLjc5My0xLjg2My0xLjA1OCAxLjE2LTIuMzIgMS43NDQtMy43OTMgMS43NDQtMS4xOTQgMC0yLjI4Ni0uNDA2LTMuMjc3LTEuMjE5LTEuMzg5IDEuNzctMy4xODMgMi42NS01LjM4NSAyLjY1LS44MzggMC0xLjY3Ni0uMTUyLTIuNTA2LS40NjZsMS43MzYgMi45NzJjMy4yMDktLjkyMyA3LjYyLTEuMzg5IDEzLjIyNS0xLjM4OSA1LjcwNiAwIDEwLjExOC40NzQgMTMuMjQyIDEuNDE0em0tMTEuMTEtNS45MjdsLTIuMTA4LTEyLjEzMy0yLjEwOCAxMS45ODljLjA1MS0uMDM0LjE2MS0uMTE5LjM0Ny0uMjU0LjM4MS0uNzQ1Ljk1Ny0xLjExOCAxLjczNi0xLjExOC44NDcgMCAxLjM4OS4zNzIgMS42MzQgMS4xMTguMTAyLjEwMi4yNzEuMjM3LjUuMzk4em02Ljg2Ny40NzR2LTExLjQ4OWwtNC4wODkgMTEuMjYxYy4zMTMtLjExLjU3Ni0uMjYyLjc5Ni0uNDQuMzMtLjQxNS43NzktLjYyNyAxLjMzOC0uNjI3LjY2IDAgMS4xOTQuMjk2IDEuNTkyLjg3Mi4wNDIuMDY4LjEwMi4xMzYuMTY5LjIxMi4wNjguMDc2LjEzNi4xNDQuMTk1LjIxMnptLTEzLjkzNi0uMzQ3bC00LjA2NC0xMS4xNDJ2MTEuMzM3Yy4wNDItLjA2OC4xMTktLjE0NC4yMi0uMjQ1LjMzLS42OTQuODcyLTEuMDQxIDEuNjM0LTEuMDQxLjYyNyAwIDEuMTQzLjI2MiAxLjU0MS43OTYuNDQ5LjE5NS42NjkuMjk2LjY2OS4yOTZ6bS02LjI5OSAxLjM4OWwtNS4zMzQtOS4yMDMgMS4zNjMgOC4zODJjLjk0LjY2IDEuODYzLjk5MSAyLjc1Mi45OTEuMzQ3IDAgLjc1NC0uMDU5IDEuMjE5LS4xNjl6bTIyLjM5NC4xMTljLjM4MS4xMTkuODA0LjE3OCAxLjI3LjE3OCAxLjAxIDAgMS45NDctLjMxMyAyLjgyOC0uOTRsMS4zNjMtOC41ODUtNS40NjEgOS4zNDd6bTEuNDkgMTIuNTU2bC0uNzQ1LTIuODAyYy0zLjI0My0uNzExLTcuMjA1LTEuMDY3LTExLjkwNC0xLjA2Ny00LjY0OCAwLTguNjExLjM1Ni0xMS44NzkgMS4wNjdsLS43NzEgMi44MjhjMy4wNzMtLjkzMSA3LjI5OC0xLjM4OSAxMi42NzUtMS4zODkgNS4yNDEgMCA5LjQ0OS40NDkgMTIuNjI0IDEuMzYzem0tMjMuMDYtMzAuNTE0YzEuMDg0IDAgMS42MzQtLjU0MiAxLjYzNC0xLjYzNCAwLTEuMDkyLS41NS0xLjYzNC0xLjYzNC0xLjYzNC0xLjEwOSAwLTEuNjY4LjU0Mi0xLjY2OCAxLjYzNCAwIDEuMDkyLjU1OSAxLjYzNCAxLjY2OCAxLjYzNHptMjAuODI4IDBjMS4xMDkgMCAxLjY2OC0uNTQyIDEuNjY4LTEuNjM0IDAtMS4wOTItLjU1OS0xLjYzNC0xLjY2OC0xLjYzNC0xLjA4NCAwLTEuNjM0LjU0Mi0xLjYzNCAxLjYzNCAwIDEuMDkyLjU1IDEuNjM0IDEuNjM0IDEuNjM0em0tMjkuOTY0IDIuNzM1YzEuMTA5IDAgMS42NjgtLjU1IDEuNjY4LTEuNjQzIDAtMS4xMDktLjU1OS0xLjY1OS0xLjY2OC0xLjY1OS0xLjA4NCAwLTEuNjM0LjU1LTEuNjM0IDEuNjU5IDAgMS4wOTIuNTUgMS42NDMgMS42MzQgMS42NDN6bTM5LjE0IDBjMS4wOTIgMCAxLjY0Mi0uNTUgMS42NDItMS42NDMgMC0xLjEwOS0uNTUtMS42NTktMS42NDItMS42NTktMS4xMDEgMC0xLjY2LjU1LTEuNjYgMS42NTkgMCAxLjA5Mi41NTkgMS42NDMgMS42NiAxLjY0M3oiLz48L2c+PC9zdmc+');\n}\n.merida cg-board piece.king.white {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNzcuMTciIGhlaWdodD0iMTc3LjE3IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiB2aWV3Qm94PSIwIDAgNTAgNTAiPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iMCIgeDE9IjIxLjM3NiIgeDI9Ijc3LjY0IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agc3RvcC1jb2xvcj0iI2ZmZiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PGcgZmlsbD0iIzFmMWExNyI+PHBhdGggZD0ibTI1LjgyMSAxMi4wMmgtMS43NjF2LTMuMjUxaC0yLjA2NmMtLjU1OSAwLS44MzgtLjI3MS0uODM4LS44MjF2LS4wMjVjMC0uNTQyLjI3OS0uODEzLjgzOC0uODEzaDIuMDY2di0yLjEwOGMwLS41ODQuMjk2LS44NzIuODg5LS44NzIuNTc2IDAgLjg3Mi4yODguODcyLjg3MnYyLjEwOGgyLjEzNGMuNTQyIDAgLjgxMy4yNzEuODEzLjgxM3YuMDI1YzAgLjU1LS4yNzEuODIxLS44MTMuODIxbC0yLjExNy4wMjUtLjAxNyAzLjIyNiIvPjxwYXRoIGQ9Im0xMS4wMyAzNy43NDRsLS44MTMtNC42NGMtLjAxNyAwLS4wNDItLjAzNC0uMDc2LS4xMDItLjA4NS0uMTE4LS4zMjItLjI3MS0uNzExLS40NTctLjM4MS0uMTk1LS44MzgtLjUxNi0xLjM0Ni0uOTgyLS43MjgtLjYxLTEuMjk1LTEuMTA5LTEuNzAyLTEuNDktLjQwNi0uMzczLS43NzEtLjc4Ny0xLjEwMS0xLjIzNi0xLjAxLTEuMzg5LTEuNTc1LTMuMDY1LTEuNjg1LTUuMDQtLjE2OS0xLjg5Ny42MDEtMy43OTMgMi4zMDMtNS42ODEgMS43MTktMS44OCA0LjA0Ny0yLjc2OSA2Ljk2OC0yLjY1IDEuMDkyLjA2OCAyLjM3OS4zMyAzLjg0NC43OTYuNDgzLjE5NS45NzQuMzkgMS40ODIuNTc2LjUuMTk1Ljk5OS4zODkgMS40OTkuNTg0LjI2Mi4xMzUuNS4yNzEuNjk0LjM5OC0uMDg1LS4zNDctLjEyNy0uNjk0LS4xMjctMS4wNDEgMC0xLjI4Ny40NTctMi4zODggMS4zOC0zLjMwMi45MTQtLjkwNiAyLjAyNC0xLjM3MiAzLjMxMS0xLjM4OSAxLjI4NyAwIDIuMzg4LjQ2NiAzLjMwMiAxLjM4LjkwNi45MTQgMS4zNjMgMi4wMiAxLjM2MyAzLjI4NSAwIC4yNjItLjAzNC42MS0uMTAyIDEuMDQxLjIyOS0uMTQ0LjQ1Ny0uMjcxLjY2OS0uMzcyLjc2Mi0uMzMgMS43NjEtLjcyIDMuMDEtMS4xNiAxLjQyMi0uNDgzIDIuNzAxLS43NTQgMy44NDQtLjgyMSAyLjkyMS0uMTM2IDUuMjQxLjc1NCA2Ljk0MyAyLjY1IDEuNjY4IDEuODg4IDIuNDQ3IDMuNzg1IDIuMzI4IDUuNjgxLS4xMjcgMS45NzMtLjcwMyAzLjY0OS0xLjcxIDUuMDQtLjMzLjQ0OS0uNzAzLjg2NC0xLjExOCAxLjI1My0uNDA2LjM5LS45NjUuODgxLTEuNjYgMS40NzMtLjU0Mi40NjYtMS4wMS43OTYtMS4zODkuOTgyLS4zODEuMTg2LS42MDEuMzQ3LS42NjkuNDU3LS4wMTcuMDM0LS4wMzQuMDU5LS4wNTEuMDc2LS4wMTcuMDE3LS4wMjUuMDM0LS4wMjUuMDUxbC0uNzk2IDQuNjY1IDEuNjQzIDYuMTIxYy0uODMuNzQ1LTIuNjg0IDEuMzU1LTUuNTU0IDEuODM3LTIuODc5LjQ4My02LjIwNi43Mi05Ljk3NC43Mi0zLjgzNSAwLTcuMjE0LS4yNTQtMTAuMTE4LS43NTQtMi45MTItLjUwOC00Ljc0MS0xLjE0My01LjQ4Ni0xLjg5N2wxLjYzNC02LjA1Ii8+PC9nPjxwYXRoIGZpbGw9InVybCgjMCkiIGQ9Im0yNS43OTYgMjkuNTMyYzIuODQ1LjAzNCA1LjQ0NC4yMDMgNy44MDYuNTA4IDIuMzcxLjMwNSA0LjIyNS42OTQgNS41NjMgMS4xNTEuNjI3LS40OTEgMS4zMTItMS4wNDEgMi4wNTctMS42NTEuNzQ1LS42MDEgMS4zNjMtMS4yMTkgMS44NjMtMS44NDYuNzg3LTEuMDEgMS4xODUtMi4zMzcgMS4xODUtMy45OTYgMC0xLjQ4Mi0uMzU2LTIuNzI2LTEuMDY3LTMuNzE3LTEuMjctMS44NTQtMy4yMDktMi43NzctNS44LTIuNzc3LTEuNTU4IDAtMy4xNS4zMjItNC43OTIuOTY1LTEuNDM5LjU4NC0yLjUzMiAxLjIyOC0zLjI2OCAxLjkzOS0xLjM4OSAxLjM4OS0yLjQyMSAzLjE3NS0zLjA4MiA1LjM1MS0uMjI5Ljc3OS0uMzY0IDEuNDktLjQwNiAyLjEyNS0uMDQyLjYzNS0uMDU5IDEuMjg3LS4wNTkgMS45NDdtLTEzLjI1IDYuNjk3YzMuMTQxLS43OTYgNy4zMDctMS4xOTQgMTIuNTA1LTEuMTk0IDUuMDg5IDAgOS4yMDMuMzgxIDEyLjMyNyAxLjE0M2wuNjE4LTMuNjQ5Yy0zLjMyNy0uODcyLTcuNjcxLTEuMzEyLTEzLjA1LTEuMzEyLTUuNDEgMC05Ljc0NS40NDktMTMuMDIgMS4zMzhsLjYxOCAzLjY3NW0yNS4yOTggNC40MTFsLS43MzctMi44NDVjLTMuMjc3LS43MjgtNy4zMzItMS4wOTItMTIuMTU4LTEuMDkyLTQuODA5IDAtOC44NTYuMzY0LTEyLjEzMyAxLjA5MmwtLjc4NyAyLjg3YzMuMTU4LS45MjMgNy40NjgtMS4zODkgMTIuOTQ1LTEuMzg5IDUuNDQ0IDAgOS43MjguNDU3IDEyLjg2OSAxLjM2M20uNjUyIDIuMzM3Yy0zLjE5Mi0xLjI4Ny03LjY3OS0xLjkzOS0xMy40NDUtMS45MzktNS45ODYgMC0xMC41MTYuNjYtMTMuNTk4IDEuOTkgMi45MTMgMS4xNTEgNy40MTcgMS43MzYgMTMuNTIxIDEuNzM2IDIuOTEzIDAgNS41NjMtLjE2MSA3Ljk1OS0uNDgzIDIuNDA0LS4zMjIgNC4yNS0uNzYyIDUuNTYzLTEuMzA0bS0xNC40MTktMTMuNDQ1Yy0uMDA4LS42NDMtLjAzNC0xLjI4Ny0uMDY4LTEuOTIyLS4wMzQtLjYzNS0uMTYxLTEuMzQ2LS4zNzItMi4xMjUtLjY3Ny0yLjIxLTEuNzAyLTMuOTk2LTMuMDgyLTUuMzUxLS43MTEtLjY5NC0xLjc5NS0xLjM0Ni0zLjI2OC0xLjkzOS0xLjY4NS0uNjYtMy4yODUtLjk5MS00Ljc5Mi0uOTkxLTIuNjA4IDAtNC41NDcuOTMxLTUuOCAyLjgwMi0uNzExLjk5MS0xLjA2NyAyLjIzNS0xLjA2NyAzLjcxNyAwIDEuNjI2LjM5OCAyLjk1NSAxLjE4NSAzLjk5Ni40ODMuNjEgMS4wOTIgMS4yMjggMS44MzcgMS44MzcuNzQ1LjYxIDEuNDM5IDEuMTY4IDIuMDgzIDEuNjYgMi44OTYtMS4wNDEgNy4zNDEtMS42IDEzLjM0My0xLjY4NW0uODcyLTQuNjE0Yy4xMTktLjQ2Ni4yMTItLjc4Ny4yOTYtLjk2NS4xNjktLjY0My4zNTYtMS4xOTQuNTc2LTEuNjQzLjA5My0uMjc5LjIzNy0uNjAxLjQzMi0uOTc0LjE4Ni0uMzczLjM4OS0uODA0LjYxLTEuMjc5LjEyNy0uMjc5LjI3MS0uNjI3LjQxNS0xLjAzMy4xNTItLjQwNi4zMDUtLjgwNC40NDktMS4yMDIuMTM1LS4zMy4yMDMtLjY4Ni4yMDMtMS4wNjcgMC0uODEzLS4yOTYtMS40OTktLjg3Mi0yLjA2Ni0uNTc2LS41NzYtMS4yNzktLjg2NC0yLjEwOC0uODY0LTEuOTY0IDAtMi45NTUuOTkxLTIuOTU1IDIuOTU1IDAgLjM4MS4wNjguNzM3LjIwMyAxLjA2Ny4zNjQgMS4wNzUuNjQzIDEuODIuODM4IDIuMjM1LjIyLjQ3NC40MTUuOTA2LjYwMSAxLjI3OS4xNzguMzcyLjMzOS42OTQuNDY2Ljk3NC4yMi41NS4zOTggMS4wOTIuNTUgMS42NDMuMDM0LjA5My4xMjcuNDE1LjI5Ni45NCIvPjwvc3ZnPg==');\n}\n\n.merida cg-board piece.pawn.black {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNzcuMTciIGhlaWdodD0iMTc3LjE3IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiB2aWV3Qm94PSIwIDAgNTAgNTAiPjxwYXRoIGQ9Im0yNSA0Ni40NWgtMTMuMzk0Yy0uNjYtMS42NTEtLjk5MS0zLjM3OC0uOTkxLTUuMTgyIDAtMy4wNTYuODY0LTUuOCAyLjU5OS04LjIzOCAxLjczNi0yLjQzIDMuOTcxLTQuMTY2IDYuNjk3LTUuMjA3LTEuMTY4LS41NDItMi4xMjUtMS4zNjMtMi44NjItMi40NjQtLjczNy0xLjEwMS0xLjEwMS0yLjM0NS0xLjEwMS0zLjczNCAwLTEuNzM2LjU3Ni0zLjI0MyAxLjczNi00LjUxMyAxLjE1Mi0xLjI3OCAyLjU3NC0yLjAyIDQuMjY3LTIuMjEtMS4zNDYtMS4wMS0yLjAyLTIuMzQ1LTIuMDItMy45OTYgMC0xLjM4OS40OTEtMi41ODIgMS40ODItMy41NzMuOTgyLS45OTEgMi4xNzYtMS40ODIgMy41ODEtMS40ODIgMS4zODkgMCAyLjU4Mi40OTEgMy41NzMgMS40ODIuOTkxLjk5MSAxLjQ5IDIuMTg0IDEuNDkgMy41NzMgMCAxLjY1MS0uNjY5IDIuOTg5LTIuMDIgMy45OTYgMS42OTMuMTk1IDMuMTE2LjkzMSA0LjI2NyAyLjIxIDEuMTYgMS4yNyAxLjczNiAyLjc3NyAxLjczNiA0LjUxMyAwIDEuMzg5LS4zNzMgMi42MzMtMS4xMjYgMy43MzQtLjc1MyAxLjEwMS0xLjcxIDEuOTIyLTIuODYyIDIuNDY0IDIuNzI2IDEuMDQxIDQuOTYxIDIuNzc3IDYuNjk3IDUuMjA3IDEuNzM2IDIuNDM4IDIuNTk5IDUuMTgyIDIuNTk5IDguMjM4IDAgMS43ODYtLjMyMiAzLjUxNC0uOTY1IDUuMTgyaC0xMy4zOTQiIGZpbGw9IiMxZjFhMTciIHRyYW5zZm9ybT0ibWF0cml4KDEgMCAwIC45NzMyNCAwIDEuMjQzKSIvPjwvc3ZnPg==');\n} \n\n.merida cg-board piece.bishop.black {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNzcuMTciIGhlaWdodD0iMTc3LjE3IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiB2aWV3Qm94PSIwIDAgNTAgNTAiPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iMCIgeDE9IjIxLjA5IiB5MT0iMzcuMSIgeDI9Ijc3LjY3IiB5Mj0iMzcuNDY5IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agc3RvcC1jb2xvcj0iI2ZmZiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PHBhdGggZD0ibTI1IDQyLjE2Yy0uMjI5Ljk0LS41MTcgMS41OTItLjg0NyAxLjk1Ni0uMzMuMzY0LS43NjIuNzQ1LTEuMzEyIDEuMTQzLS41OTMuNDE1LTEuMjk1Ljc2Mi0yLjEwOCAxLjA1LS44MTMuMjg4LTEuNzEuMzY0LTIuNzAxLjIxMmwtNi45NjgtLjk2NWMtLjI4OC0uMDM0LS41MzMtLjAzNC0uNzYyIDAtLjIyLjAzNC0uNDMyLjA1MS0uNjM1LjA1MS0uMzQ3IDAtLjc4Ny4wNzYtMS4zMjEuMjM3LS41NDIuMTUyLS45NTcuMzgxLTEuMjUzLjY3N2wtMi40MDQtMy45NDZjLjI5Ni0uMzMuNTU5LS41NTkuNzg3LS42OTQuMjM3LS4xMjcuNTA4LS4yNzEuODIxLS40MTUuOTU3LS40NDkgMS45ODEtLjcyIDMuMDczLS44MjEuNDY2LS4wMzQuOTIzLS4wNDIgMS4zNjMtLjAyNS40NDkuMDE3LjkxNCAwIDEuMzk3LS4wNTEuODg5LjE1MiAxLjc4Ni4yODggMi42ODQuNDA2LjkwNi4xMjcgMS44MTIuMjU0IDIuNzE4LjM5Ljk5MSAwIDEuNjYtLjEwMiAyLjAxLS4yOTYuMTg2LS4xMDIuNDc0LS4yODguODcyLS41NS4zOTgtLjI2Mi43OTYtLjY1MiAxLjE5NC0xLjE2OC0uODgxLS4wOTMtMS43Ny0uMjYyLTIuNjg0LS41MDgtLjkwNi0uMjM3LTEuNzEtLjQ5MS0yLjQwNC0uNzU0bDIuNTgyLTYuNDAxYy0xLjI5NS0uNzQ1LTIuMTkzLTEuMzM4LTIuNzA5LTEuNzk1LS41MDgtLjQ1Ny0uOTE0LS45ODItMS4yMTEtMS41NzUtLjQzMi0uNzYyLS43MTEtMS40OTktLjgzLTIuMjEtLjEyNy0uNzExLS4xNzgtMS4zNDYtLjE2MS0xLjkxMy4wMTctLjk5MS4yNDUtMi4wODMuNzAzLTMuMjg1LjQ1Ny0xLjE5NCAxLjMxMi0yLjI2OSAyLjU2NS0zLjIwOSAxLjA0MS0uNzk2IDIuMDY2LTEuNjE3IDMuMDU3LTIuNDU1Ljk5MS0uODQ3IDEuOTczLTEuODI5IDIuOTQ2LTIuOTU1LTEuMjE5LS42MjctMS44MjktMS42MjYtMS44MjktMi45OTcgMC0uOTMxLjMyMi0xLjcxOS45NzQtMi4zODguNjUyLS42NiAxLjQ1Ni0uOTkxIDIuMzk2LS45OTEuOTIzIDAgMS43MTkuMzMgMi4zNzkuOTkxLjY2LjY2OS45OTEgMS40NTYuOTkxIDIuMzg4IDAgMS4zNTUtLjYxIDIuMzU0LTEuODI5IDIuOTk3Ljk1NyAxLjEyNiAxLjkzIDIuMTA4IDIuOTEzIDIuOTU1Ljk4Mi44MzggMi4wMiAxLjY1OSAzLjA5IDIuNDU1IDEuMjM2Ljk0IDIuMDgzIDIuMDEgMi41MjMgMy4yMDkuNDQ5IDEuMjAyLjY5NCAyLjI5NS43MiAzLjI4NSAwIC41NjctLjA1MSAxLjIwMi0uMTY5IDEuOTEzLS4xMTguNzExLS4zODEgMS40NDgtLjc5NiAyLjIxLS4zMy41OTMtLjc0NSAxLjExOC0xLjI1MyAxLjU3NS0uNS40NTctMS4zODkgMS4wNS0yLjY2NyAxLjc5NWwyLjU4MiA2LjQwMWMtLjcyOC4yNjMtMS41NDkuNTE3LTIuNDU1Ljc1NC0uOTE0LjI0Ni0xLjc4Ny40MTUtMi42MzMuNTA4LjM4MS41MTcuNzcxLjkwNiAxLjE2OCAxLjE2OC4zOTguMjYzLjY5NC40NDkuODk3LjU1LjM0Ny4xOTUgMS4wMTYuMjk2IDIuMDEuMjk2Ljg4OS0uMTM2IDEuNzg3LS4yNjMgMi42OTItLjM5Ljg5OC0uMTE4IDEuODAzLS4yNTQgMi43MTgtLjQwNi40NC4wNTEuODg5LjA2OCAxLjM0Ni4wNTEuNDU3LS4wMTcuOTIzLS4wMDggMS40MDYuMDI1IDEuMDU4LjEwMiAyLjA4My4zNzMgMy4wNzMuODIxLjI5Ni4xNDQuNTY3LjI4OC44MDQuNDE1LjI0NS4xMzUuNTA4LjM2NC44MDQuNjk0bC0yLjQzIDMuOTQ2Yy0uMjk2LS4yOTYtLjcxMS0uNTI1LTEuMjUzLS42NzctLjUzMy0uMTYxLS45NjUtLjIzNy0xLjI5NS0uMjM3LS4yMiAwLS40NC0uMDE3LS42Ni0uMDUxLS4yMi0uMDM0LS40NzQtLjAzNC0uNzU0IDBsLTYuOTUxLjk2NWMtLjk5MS4xNTItMS45MTMuMDg1LTIuNzYtLjE5NS0uODU1LS4yNzktMS41NTgtLjY1Mi0yLjEtMS4xMTgtLjU0Mi0uNDQ5LS45ODItLjgzLTEuMzA0LTEuMTUxLS4zMjItLjMyMi0uNTkzLS45NTctLjgwNC0xLjg5NyIgZmlsbD0iIzFmMWExNyIvPjxwYXRoIGQ9Im0yNC4wOSAyMy43MDV2Mi4xMDhjMCAuNjEuMzA1LjkxNC45MTQuOTE0LjYxIDAgLjkxNC0uMzA1LjkxNC0uOTE0di0yLjEzNGgyLjIzNWMuNTc2IDAgLjg3Mi0uMjk2Ljg3Mi0uODk3IDAtLjU5My0uMjk2LS44ODktLjg3Mi0uODg5aC0yLjIzNXYtMi4yMzVjMC0uNjEtLjMwNS0uOTE0LS45MTQtLjkxNC0uNjEgMC0uOTE0LjMwNS0uOTE0LjkxNHYyLjIzNWgtMi4xODRjLS41ODQgMC0uODcyLjI5Ni0uODcyLjg4OSAwIC42MDEuMjg4Ljg5Ny44NzIuODk3bDIuMTg0LjAyNW03LjUxIDEzLjc0MWwtMS4wNDEtMi41MzFjLTEuNjg1LS4zNjQtMy41MzktLjU0Mi01LjU1NC0uNTQyLTEuOTk4IDAtMy44MzUuMTc4LTUuNTAzLjU0MmwtMS4wNDEgMi41MDZjMi4wNDktLjUxNiA0LjIzMy0uNzcgNi41NDUtLjc3IDIuMjg2IDAgNC40NzkuMjYyIDYuNTk2Ljc5Nm0tMi4wODMtNS4xMTRsLS43Mi0xLjczNnYtLjY2OWMtMS4yNTMtLjE3OC0yLjUyMy0uMjcxLTMuNzkzLS4yNzEtMS4yMzYgMC0yLjQ5OC4wOTMtMy43NjguMjcxbC0uMDI1LjY2OS0uNjY5IDEuNzM2YzEuNDA1LS4yNDYgMi44ODctLjM3MyA0LjQ2Mi0uMzczIDEuNTkyIDAgMy4wOS4xMjcgNC41MTMuMzczbS0uODY0IDkuMzgxYy0uNjYtLjQ5OS0xLjMyOS0xLjI4Ny0xLjk5LTIuMzYyaC0uNzg3YzAgLjgxMy4xODYgMS42LjU2NyAyLjM2MmgyLjIxbS01LjExNCAwYy4zODEtLjgxMy41NzYtMS42LjU3Ni0yLjM2MmgtLjc5NmMtLjY0MyAxLjA1OC0xLjMxMiAxLjg0Ni0yLjAyIDIuMzYyaDIuMjM1IiBmaWxsPSJ1cmwoIzApIi8+PC9zdmc+');\n}\n.merida cg-board piece.knight.black {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNzcuMTciIGhlaWdodD0iMTc3LjE3IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiB2aWV3Qm94PSIwIDAgNTAgNTAiPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iMCIgeDE9IjIxLjI1MyIgeTE9IjM3LjU5MiIgeDI9Ijc3LjY0IiB5Mj0iMzcuNDY5IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agc3RvcC1jb2xvcj0iI2ZmZiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PHBhdGggZmlsbD0iIzFmMWExNyIgZD0ibTI2LjE4IDkuMzk1YzIuNTk5LjE2OSA1IC44MzggNy4yMjIgMi4wMiAyLjIxIDEuMTY4IDQuMDk4IDIuNjc1IDUuNjU2IDQuNTEzIDEuMDkyIDEuMjg3IDIuMTE3IDIuODQ1IDMuMDgyIDQuNjY1Ljk3NCAxLjgxMiAxLjc0NCAzLjc0MiAyLjMyIDUuNzc0LjY2IDIuMzcxIDEuMDg0IDQuODUxIDEuMjUzIDcuNDU5LjE3OCAyLjU5OS4yNjMgNS4wMS4yNjMgNy4yM3Y1LjQwMmMwIDAtMS4yODcgMC0zLjg2MSAwLTIuNTY1IDAtNS45MDEgMC0xMC4wMSAwaC0xNi42MzdjLS4xNTIgMC0uMjItLjQwNi0uMjEyLTEuMjExLjAwOC0uODEzLjA1OS0xLjQ2NS4xNjEtMS45NjQuMDU5LS4zOTguMjItLjk1Ny40NjYtMS42ODUuMjU0LS43MjguNjYtMS42MDkgMS4yNDUtMi42NS4yNjItLjUzMy44ODktMS4zMDQgMS44OC0yLjMyLjk5OS0xLjAxNiAyLjEzNC0yLjIwMSAzLjQyOS0zLjUzOS43NDUtLjc2MiAxLjMyMS0xLjcxOSAxLjc0NC0yLjg3OS40MjMtMS4xNTEuNjAxLTIuMjAxLjUzMy0zLjE1LS42MS41LTEuMjc5LjkwNi0yLjAxIDEuMjE5LTMuNTA1IDEuMjUzLTYuMDUgMy4wNzMtNy42MTEgNS40NTItLjExOS4xNTItLjQ5MS44MjEtMS4xMTggMi4wMi0uMzMuNjI3LS42MTggMS4wNTgtLjg0NyAxLjI4Ny0uMzEzLjMxMy0uNzcxLjQ5MS0xLjM2My41MjUtLjkyMy4wNDItMS42NDMtLjM5OC0yLjE1OS0xLjM0Ni0uNjk0LjIwMy0xLjMxMi4yODgtMS44NjMuMjU0LS45MjMtLjM0Ny0xLjU5Mi0uNzItMi4wMS0xLjExOC0uODQ3LS44NDctMS4zODktMS42ODUtMS42NTEtMi41MzItLjI1NC0uODQ3LS4zODEtMS43NTMtLjM4MS0yLjcyNiAwLTEuMzg5Ljg1NS0zLjIyNiAyLjU4Mi01LjUxMiAyLjAyLTIuNjI1IDMuMDktNC42MzEgMy4yMTctNiAwLS41OTMuMDU5LTEuMjYyLjE3OC0yLjAxLjEwMi0uNTE3LjMwNS0xLjAxLjYxOC0xLjQ5LjIyLS4zMy4zNjQtLjU1OS40MzItLjY3Ny4wNzYtLjEyNy4yMTItLjMxMy40MTUtLjU1OS4xNDQtLjIwMy4yNzEtLjM1Ni4zNzMtLjQ1Ny4wOTMtLjExLjIyLS4yNTQuMzczLS40NC4xNzgtLjIxMi40MDYtLjQ1Ny42OTQtLjc0NS0uODgtMi40MTMtMS4yMzYtNC45MDItMS4wNjctNy40NTkgMy4yODUgMS4xNjggNi4wNSAzLjAxIDguMjggNS41MjkuNTUtMS44NzEgMS42MjYtMy4zODcgMy4yMjYtNC41MzggMS4zMjEuOTIzIDIuMzcxIDIuMTUxIDMuMTUgMy42NjYiLz48cGF0aCBmaWxsPSJ1cmwoIzApIiBkPSJtMTUuNjg4IDE3Ljc4NmMuMzY0LS4xODYuNTQyLS4yNzkuNTQyLS4yNzkuNDk5LS4xOTUuNjUyLS41NTkuNDc0LTEuMDkyLS4xOTUtLjQ5MS0uNTc2LS42Ni0xLjE0My0uNDkxLTEuOTQ3LjcxMS0zLjI5NCAyLjAyLTQuMDQgMy45Mi0uMTE4LjU0Mi4wNzYuOTE0LjU5MyAxLjExOC41MTYuMTYxLjg2NC0uMDE3IDEuMDQxLS41NS4xMzYtLjI3OS4yMjktLjQ2Ni4yOTYtLjU0Mi4xODYuMTQ0LjQyMy4yNDUuNzIuMjk2IDEuMDEuMTYxIDEuNi0uMjc5IDEuNzYxLTEuMzM4LjA1MS0uMzY0LS4wMzQtLjcxMS0uMjQ2LTEuMDQxbS00LjExNSAxNi43NjRjLjA1OS0uMTUyLjE2OS0uMzczLjMyMi0uNjY5LjI3OS0uNjk0LjQxNS0xLjEwOS40MTUtMS4yNDUtLjAyNS0uNDU3LS4yNzEtLjY5NC0uNzItLjY5NC0uMzMgMC0uNzExLjQ3NC0xLjE2IDEuNDE0LS4wNjguMTM2LS4xNjkuMjU0LS4yOTYuMzQ3LS40NDkuNDY2LS4zODEuODU1LjE5NSAxLjE2OC41MzMuMzEzLjk0LjIxMiAxLjI0NS0uMzIybTE0LjYzLTkuMjAzYzEuMTYtMS41MjQgMS43MjctMy4yMTcgMS43MS01LjA4LS4wNjgtLjU1LS4zODEtLjgyMS0uOTQtLjgyMS0uNzYyIDAtMS4wNTguMjc5LS44OTguODM4LjA1MS45MTQtLjAzNCAxLjY2OC0uMjcxIDIuMjYxLS4zODEuOTQtLjgwNCAxLjY0Mi0xLjI2MSAyLjEwOC0uMjU0LjUtLjEwMi44NjQuNDQ5IDEuMDkyLjUyNS4yNDUuOTMxLjExOSAxLjIxMS0uMzk4bS02LjQ3Ny0xMi4xMWMtLjA3Ni0uNTkzLS4wNTktMS4yMzYuMDUxLTEuOTMtLjk5MS4xOTUtMS45MjIuNjYtMi44MDIgMS4zODktLjUyNS4yNzktLjY1Mi42NjktLjM3MyAxLjE2OC4yNzkuNTA4LjY2OS41OTMgMS4xNjguMjQ2LjM0Ny0uMTg2LjY2OS0uMzU2Ljk1Ny0uNTA4LjI4OC0uMTYxLjYxOC0uMjc5Ljk5OS0uMzY0bTIzLjI1IDMxLjQ1NGMtLjAxNyAwIDAtLjQ0OS4wNDItMS4zNDYuMTMxLTMuMTA3LjA5NS02LjIyMS4wNzYtOS4zMy0uMDE3LTIuMjEtLjMxMy00LjQxMS0uODg5LTYuNjEzLS44NC0zLjMxLTIuMTI0LTYuNDg1LTQuMDcyLTkuMjk2LTIuNjM0LTMuODQ1LTYuODE0LTYuMDMtMTEuMjg2LTYuOTc2LjEyNi43NjYuMDMzIDEuNTQuMDc2IDIuMzExIDEuNi41NDIgMy4xMTYgMS4yMTkgNC41MzggMi4wMzIgNC4yNDEgMi41NTQgNi40MTQgNy4yNzUgNy4xOTcgMTEuOTMgMS4yNzIgNi4xNTQuNDUzIDExLjU1Ny44MTMgMTcuMjg5aDMuNTA1bS0zMy41MzctMTQuNTU0Yy40NzQtLjMzOS41MjUtLjcyOC4xNDQtMS4xOTQtLjM5OC0uMzgxLS44My0uNDE1LTEuMzEyLS4xMDItMS4wMS42Ni0xLjU0OSAxLjUzMi0xLjYxNyAyLjYwOC4wMTcuNTQyLjM0Ny44MDQuOTc0Ljc3MS41OTMtLjA1MS44ODEtLjM1Ni44NjQtLjkyMy4xMzUtLjUyNS40NDktLjkxNC45NDgtMS4xNiIvPjwvc3ZnPg==');\n}\n.merida cg-board piece.rook.black {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNzcuMTciIGhlaWdodD0iMTc3LjE3IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiB2aWV3Qm94PSIwIDAgNTAgNTAiPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iMCIgeDE9IjIxLjE5IiB5MT0iMzcuNTUyIiB4Mj0iNzcuNzQiIHkyPSIzNy40MjkiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBzdG9wLWNvbG9yPSIjZmZmIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cGF0aCBmaWxsPSIjMWYxYTE3IiBkPSJtMjguNDA4IDkuMjJoNC4yMTZ2LTMuMzk1aDYuNzk2djkuMjk1bC01LjUgNC4yNDN2MTEuODU3bDQuMjIgNC4yMjF2NS4wOGgzLjc4OXY1LjkyOWgtMzMuODU5di01LjkyOWgzLjc5NHYtNS4wOGw0LjI0Ni00LjIyMXYtMTEuODU3bC01LjUwOC00LjI0M3YtOS4yOTVoNi43NzR2My4zOTVoNC4yNDJ2LTMuMzk1aDYuNzl6Ii8+PHBhdGggZmlsbD0idXJsKCMwKSIgZD0ibTI1LjAxIDM1LjA0aC0xMC4yN2wtMS4xNDMgMS4wNjd2MS40MzloMjIuODI2di0xLjQzOWwtMS4xNDMtMS4wNjdoLTEwLjI3bS0xMS40MTMgNS4wOHYyLjUzMmgyMi44MjZ2LTIuNTMyaC0yMi44MjZtMTEuNDEzLTI3LjA4aC0xMi43djEuMTQzbDEuODEyIDEuMzYzaDIxLjgwMmwxLjc2MS0xLjM2M3YtMS4xNDNoLTEyLjY3NW0wIDQuMTkxaC04LjY3OGwxLjQ4MiAxLjE2OHYxLjQxNGgxNC4zOTN2LTEuNDE0bDEuNDgyLTEuMTY4aC04LjY3OG0wIDEzLjU0N2gtNy4xOTd2MS4xNDNsLTEuNDgyIDEuNDM5aDE3LjM1N2wtMS40ODItMS40Mzl2LTEuMTQzaC03LjE5NyIvPjwvc3ZnPg==');\n}\n.merida cg-board piece.queen.black {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNzcuMTciIGhlaWdodD0iMTc3LjE3IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiB2aWV3Qm94PSIwIDAgNTAgNTAiPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iMCIgeDE9IjIxLjI1MyIgeTE9IjM3LjIyIiB4Mj0iNzcuNzYiIHkyPSIzNy4zNiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiNmZmYiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxnIGZpbGw9IiMxZjFhMTciPjxwYXRoIGQ9Im0yNC45NDkgMTAuNzUyYy0uOTQgMC0xLjc0NC0uMzMtMi4zOTYtLjk5MS0uNjUyLS42Ni0uOTc0LTEuNDY1LS45NzQtMi40MDUgMC0uOTMxLjMyMi0xLjcyNy45NzQtMi4zODguNjUyLS42NiAxLjQ1Ni0uOTkxIDIuMzk2LS45OTEuOTIzIDAgMS43MjcuMzMgMi4zOTYuOTkxLjY2OS42Ni45OTkgMS40NTYuOTk5IDIuMzg4IDAgLjk0LS4zMyAxLjc0NC0uOTk5IDIuNDA1LS42NjkuNjYtMS40NzMuOTkxLTIuMzk2Ljk5MSIvPjxwYXRoIGQ9Im00MC4yMyA0My45NDJjLS44MTMuNzExLTIuNjMzIDEuMzA0LTUuNDYxIDEuNzg2LTIuODI4LjQ3NC02LjA4Ny43Mi05Ljc3LjcyLTMuNzUxIDAtNy4wNS0uMjU0LTkuODk4LS43NDUtMi44NDUtLjQ5OS00LjY0LTEuMTE4LTUuMzg1LTEuODYzbDEuNTY2LTUuOTUyLS42OTQtMy44OTUtMi4xODQtMy43OTMtMi4xMDgtMTUuNDI2IDEuMjExLS40NzQgNi43OTkgMTEuNDU1LjE1Mi0xMy42NCAxLjY4NS0uMjk2IDUuMTgyIDEzLjcxNiAyLjc3Ny0xNC43NTdoMS43MTlsMi43NzcgMTQuNzA3IDUuMTMxLTEzLjY2NSAxLjcxLjI5Ni4xNTIgMTMuNjQgNi44MjQtMTEuNDgxIDEuMTYuNTQyLTIuMDU3IDE1LjM1OS0yLjIxIDMuNzkzLS42OTQgMy45NDYgMS42MTcgNi4wMyIvPjxwYXRoIGQ9Im0xNC41MzUgMTEuOTg5Yy0uOTQ4IDAtMS43NTMtLjMyMi0yLjQxMy0uOTc0LS42Ni0uNjUyLS45OTEtMS40NTYtLjk5MS0yLjM5NiAwLS45MjMuMzMtMS43MTkuOTkxLTIuMzc5LjY2LS42NiAxLjQ2NS0uOTkxIDIuNDEzLS45OTEuOTIzIDAgMS43MTkuMzMgMi4zNzkuOTkxLjY2LjY2Ljk5MSAxLjQ1Ni45OTEgMi4zNzkgMCAuOTQtLjMzIDEuNzQ0LS45OTEgMi4zOTYtLjY2LjY1Mi0xLjQ1Ni45NzQtMi4zNzkuOTc0Ii8+PHBhdGggZD0ibTM1LjM2IDExLjk4OWMtLjk0IDAtMS43MzYtLjMyMi0yLjM4OC0uOTc0LS42NTItLjY1Mi0uOTgyLTEuNDU2LS45ODItMi4zOTYgMC0uOTIzLjMzLTEuNzE5Ljk4Mi0yLjM3OS42NTItLjY2IDEuNDQ4LS45OTEgMi4zODgtLjk5MS45NDggMCAxLjc1My4zMyAyLjQxMy45OTEuNjYuNjYuOTkxIDEuNDU2Ljk5MSAyLjM3OSAwIC45NC0uMzMgMS43NDQtLjk5MSAyLjM5Ni0uNjYuNjUyLTEuNDY1Ljk3NC0yLjQxMy45NzQiLz48cGF0aCBkPSJtNS40IDE0LjcyM2MtLjk0IDAtMS43MzYtLjMzLTIuMzg4LS45ODItLjY1Mi0uNjUyLS45ODItMS40NDgtLjk4Mi0yLjM5NiAwLS45MjMuMzMtMS43MTkuOTgyLTIuMzg4LjY1Mi0uNjc3IDEuNDQ4LTEuMDEgMi4zODgtMS4wMS45NDggMCAxLjc0NC4zMyAyLjQxMyAxLjAxLjY2LjY2OS45OTEgMS40NjUuOTkxIDIuMzg4IDAgLjk0OC0uMzMgMS43NDQtLjk5MSAyLjM5Ni0uNjY5LjY1Mi0xLjQ2NS45ODItMi40MTMuOTgyIi8+PHBhdGggZD0ibTQ0LjU0MSAxNC43MjNjLS45NCAwLTEuNzQ0LS4zMy0yLjQwNS0uOTgyLS42Ni0uNjUyLS45OTEtMS40NDgtLjk5MS0yLjM5NiAwLS45MjMuMzMtMS43MTkuOTkxLTIuMzg4LjY2LS42NzcgMS40NjUtMS4wMSAyLjQwNS0xLjAxLjkzMSAwIDEuNzI3LjMzIDIuMzg4IDEuMDEuNjYuNjY5Ljk5MSAxLjQ2NS45OTEgMi4zODggMCAuOTQ4LS4zMyAxLjc0NC0uOTkxIDIuMzk2LS42Ni42NTItMS40NTYuOTgyLTIuMzg4Ljk4MiIvPjwvZz48cGF0aCBmaWxsPSJ1cmwoIzApIiBkPSJtMzcuMiAzNS43MjljLTMuMDQtLjgzOC03LjA5NS0xLjI2Mi0xMi4xNS0xLjI2Mi01LjA5NyAwLTkuMTk1LjQzMi0xMi4zMDIgMS4yODdsLjM3MyAyLjUwNmMzLjEyNC0uODEzIDcuMDk1LTEuMjE5IDExLjkzLTEuMjE5IDQuODA5IDAgOC43MjkuMzk4IDExLjc1MiAxLjE5NGwuMzk4LTIuNTA2bTEuNzM2LTQuNDM3Yy0xLjM3Mi0uNS0zLjMwMi0uOTA2LTUuNzkxLTEuMjI4LTIuNDg5LS4zMjItNS4yMzItLjQ4My04LjI0Ni0uNDgzLTIuOTQ2IDAtNS42MzkuMTUyLTguMDkuNDU3LTIuNDQ3LjMwNS00LjM3Ny43MDMtNS43ODMgMS4yMDJsMS4yNDUgMi4yNTJjMS4zODktLjQwNiAzLjE5Mi0uNzAzIDUuNDEtLjg4OSAyLjIxLS4xNzggNC42MzEtLjI3MSA3LjI2NC0uMjcxIDIuNjMzIDAgNS4wNjMuMDkzIDcuMjkuMjcxIDIuMjM1LjE4NiA0LjA0Ny40OTEgNS40MzYuOTE0bDEuMjYxLTIuMjI3bS0xLjA5MiAxMS44NTNsLS43MzctMi45MjljLTMuMjI2LS43MzctNy4yODEtMS4xMDktMTIuMTU4LTEuMTA5LTQuODI2IDAtOC44NjUuMzczLTEyLjExIDEuMTA5bC0uNzg3IDIuOTU1YzMuMTQxLS45NTcgNy40NDItMS40MzkgMTIuOTItMS40MzkgMi42MjUgMCA1LjA3Mi4xMzYgNy4zMTUuMzk4IDIuMjUyLjI2MiA0LjEwNi42MDEgNS41NTQgMS4wMTYiLz48L3N2Zz4=');\n}\n.merida cg-board piece.king.black {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNzcuMTciIGhlaWdodD0iMTc3LjE3IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiB2aWV3Qm94PSIwIDAgNTAgNTAiPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iMCIgeDE9IjIxLjEzIiB5MT0iMzcuMjIiIHgyPSI3Ny43NiIgeTI9IjM3LjQ2OSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiNmZmYiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxnIGZpbGw9IiMxZjFhMTciPjxwYXRoIGQ9Im0yNS44MjEgMTIuMDJoLTEuNzYxdi0zLjI1MWgtMi4wNjZjLS41NTkgMC0uODM4LS4yNzEtLjgzOC0uODIxdi0uMDI1YzAtLjU0Mi4yNzktLjgxMy44MzgtLjgxM2gyLjA2NnYtMi4xMDhjMC0uNTg0LjI5Ni0uODcyLjg4OS0uODcyLjU3NiAwIC44NzIuMjg4Ljg3Mi44NzJ2Mi4xMDhoMi4xMzRjLjU0MiAwIC44MTMuMjcxLjgxMy44MTN2LjAyNWMwIC41NS0uMjcxLjgyMS0uODEzLjgyMWwtMi4xMTcuMDI1LS4wMTcgMy4yMjYiLz48cGF0aCBkPSJtMTEuMDMgMzcuNzQ0bC0uODEzLTQuNjRjLS4wMTcgMC0uMDQyLS4wMzQtLjA3Ni0uMTAyLS4wODUtLjExOC0uMzIyLS4yNzEtLjcxMS0uNDU3LS4zODEtLjE5NS0uODM4LS41MTYtMS4zNDYtLjk4Mi0uNzI4LS42MS0xLjI5NS0xLjEwOS0xLjcwMi0xLjQ5LS40MDYtLjM3My0uNzcxLS43ODctMS4xMDEtMS4yMzYtMS4wMS0xLjM4OS0xLjU3NS0zLjA2NS0xLjY4NS01LjA0LS4xNjktMS44OTcuNjAxLTMuNzkzIDIuMzAzLTUuNjgxIDEuNzE5LTEuODggNC4wNDctMi43NjkgNi45NjgtMi42NSAxLjA5Mi4wNjggMi4zNzkuMzMgMy44NDQuNzk2LjQ4My4xOTUuOTc0LjM5IDEuNDgyLjU3Ni41LjE5NS45OTkuMzg5IDEuNDk5LjU4NC4yNjIuMTM1LjUuMjcxLjY5NC4zOTgtLjA4NS0uMzQ3LS4xMjctLjY5NC0uMTI3LTEuMDQxIDAtMS4yODcuNDU3LTIuMzg4IDEuMzgtMy4zMDIuOTE0LS45MDYgMi4wMjQtMS4zNzIgMy4zMTEtMS4zODkgMS4yODcgMCAyLjM4OC40NjYgMy4zMDIgMS4zOC45MDYuOTE0IDEuMzYzIDIuMDIgMS4zNjMgMy4yODUgMCAuMjYyLS4wMzQuNjEtLjEwMiAxLjA0MS4yMjktLjE0NC40NTctLjI3MS42NjktLjM3Mi43NjItLjMzIDEuNzYxLS43MiAzLjAxLTEuMTYgMS40MjItLjQ4MyAyLjcwMS0uNzU0IDMuODQ0LS44MjEgMi45MjEtLjEzNiA1LjI0MS43NTQgNi45NDMgMi42NSAxLjY2OCAxLjg4OCAyLjQ0NyAzLjc4NSAyLjMyOCA1LjY4MS0uMTI3IDEuOTczLS43MDMgMy42NDktMS43MSA1LjA0LS4zMy40NDktLjcwMy44NjQtMS4xMTggMS4yNTMtLjQwNi4zOS0uOTY1Ljg4MS0xLjY2IDEuNDczLS41NDIuNDY2LTEuMDEuNzk2LTEuMzg5Ljk4Mi0uMzgxLjE4Ni0uNjAxLjM0Ny0uNjY5LjQ1Ny0uMDE3LjAzNC0uMDM0LjA1OS0uMDUxLjA3Ni0uMDE3LjAxNy0uMDI1LjAzNC0uMDI1LjA1MWwtLjc5NiA0LjY2NSAxLjY0MyA2LjEyMWMtLjgzLjc0NS0yLjY4NCAxLjM1NS01LjU1NCAxLjgzNy0yLjg3OS40ODMtNi4yMDYuNzItOS45NzQuNzItMy44MzUgMC03LjIxNC0uMjU0LTEwLjExOC0uNzU0LTIuOTEyLS41MDgtNC43NDEtMS4xNDMtNS40ODYtMS44OTdsMS42MzQtNi4wNSIvPjwvZz48cGF0aCBmaWxsPSJ1cmwoIzApIiBkPSJtMjQuOTQ5IDIwLjY3NWMtLjAzNC0uMTYxLS4wNzYtLjMwNS0uMTI3LS40MjMtLjA5My0uMzMtLjE3OC0uNTY3LS4yNDUtLjcyLS4wNTEtLjExLS4xMTktLjI1NC0uMTk1LS40MzItLjA4NS0uMTY5LS4xNjktLjM1Ni0uMjU0LS41NTktLjA1MS0uMTE5LS4xMS0uMjcxLS4xODYtLjQ1Ny0uMDY4LS4xOTUtLjEzNi0uMzczLS4xODYtLjUzMy0uMDQyLS4xNTItLjA2OC0uMzA1LS4wNjgtLjQ3NCAwLS44NzIuNDE1LTEuMzEyIDEuMjYyLTEuMzEyLjg4MSAwIDEuMzEyLjQzMiAxLjMxMiAxLjI4NyAwIC4yMi0uMDM0LjM3My0uMDkzLjQ3NC0uMjM3LjYyNy0uMzU2Ljk2NS0uMzcyIDEuMDE2LS4yNTQuNS0uNDA2LjgyMS0uNDc0Ljk2NS0uMTE5LjI3MS0uMTk1LjUwOC0uMjIuNzItLjA1MS4xMDItLjA4NS4xODYtLjEwMi4yNjItLjAxNy4wNzYtLjAzNC4xMzYtLjA1MS4xODZtLTIuNzc3IDguNTZjLTIuMDY2LjAzNC0zLjk1NC4xMzUtNS42NzMuMzIyLTEuNzEuMTc4LTMuMDMuNDQtMy45NzkuNzctLjQ5MS0uNjE4LTEuMDY3LTEuMjI4LTEuNzE5LTEuODU0LS42Ni0uNjE4LTEuMjI4LTEuMjAyLTEuNzI3LTEuNzQ0LS44My0uODQ3LTEuMjM2LTEuNzctMS4yMzYtMi43NzcgMC0xLjI0NS4yMDMtMi4xNTEuNjE4LTIuNzI2LjQ0LS42NjkgMS4xMzUtMS4xNiAyLjA1Ny0xLjQ4Mi45MjMtLjMyMiAxLjg2My0uNDgzIDIuODAzLS40ODMgMS4xOTQgMCAyLjMyOC4yNjIgMy40Mi43OTYgMS4wNzUuNTU5IDEuNzg3IDEuMDEgMi4xMzQgMS4zMzggMS4xMjYgMS4xNDMgMi4wMSAyLjM3OSAyLjYzMyAzLjcxNy4yMTIuNS4zNzIgMS4xOTQuNDgzIDIuMDc0LjExLjg4OS4xNjkgMS41NjYuMTg2IDIuMDQ5bTIuNzc3LTQuMzE4Yy4xMTktLjQ2Ni4yMTItLjc4Ny4yOTYtLjk2NS4xNjktLjY0My4zNTYtMS4xOTQuNTc2LTEuNjQzLjA5My0uMjc5LjIzNy0uNjAxLjQzMi0uOTc0LjE4Ni0uMzczLjM4OS0uODA0LjYxLTEuMjc5LjEyNy0uMjc5LjI3MS0uNjI3LjQxNS0xLjAzMy4xNTItLjQwNi4zMDUtLjgwNC40NDktMS4yMDIuMTM1LS4zMy4yMDMtLjY4Ni4yMDMtMS4wNjcgMC0uODEzLS4yOTYtMS40OTktLjg3Mi0yLjA2Ni0uNTc2LS41NzYtMS4yNzktLjg2NC0yLjEwOC0uODY0LTEuOTY0IDAtMi45NTUuOTkxLTIuOTU1IDIuOTU1IDAgLjM4MS4wNjguNzM3LjIwMyAxLjA2Ny4zNjQgMS4wNzUuNjQzIDEuODIuODM4IDIuMjM1LjIyLjQ3NC40MTUuOTA2LjYwMSAxLjI3OS4xNzguMzcyLjMzOS42OTQuNDY2Ljk3NC4yMi41NS4zOTggMS4wOTIuNTUgMS42NDMuMDM0LjA5My4xMjcuNDE1LjI5Ni45NG0tLjg4OSA2LjIyM2MwLS42Ni0uMDE3LTEuNTc1LS4wNTEtMi43MzUtLjAzNC0xLjE2OC0uMTYxLTIuMTQyLS4zNzItMi45MjEtLjY3Ny0yLjIxLTEuNzAyLTMuOTk2LTMuMDgyLTUuMzUxLS43MTEtLjY5NC0xLjc5NS0xLjM0Ni0zLjI2OC0xLjkzOS0xLjY4NS0uNjYtMy4yODUtLjk5MS00Ljc5Mi0uOTkxLTIuNjA4IDAtNC41NDcuOTMxLTUuOCAyLjgwMy0uNzExLjk5MS0xLjA2NyAyLjIzNS0xLjA2NyAzLjcxNyAwIDEuNjI2LjM5OCAyLjk1NSAxLjE4NSAzLjk5Ni40MTUuNTkzIDEuMjExIDEuMzI5IDIuMzg4IDIuMjEgMS4xNjguODcyIDIuMTY4IDEuNjg1IDIuOTcyIDIuNDMgMS40MzktLjMxMyAzLjA2NS0uNTg0IDQuODc3LS44MjEgMS44MTItLjIyOSA0LjE0OS0uMzY0IDcuMDEtLjM5OG0xMy43ODQgMTEuNzM1bC0uNzM3LTIuOTI5Yy0zLjIyNi0uNzM3LTcuMjgxLTEuMTA5LTEyLjE1OC0xLjEwOS00LjgyNiAwLTguODY1LjM3My0xMi4xMSAxLjEwOWwtLjc4NyAyLjk1NWMzLjE0MS0uOTU3IDcuNDQyLTEuNDM5IDEyLjkyLTEuNDM5IDIuNjI1IDAgNS4wNzIuMTM2IDcuMzE1LjM5OCAyLjI1Mi4yNjIgNC4xMDYuNjAxIDUuNTU0IDEuMDE2bS0uNjQzLTcuNDE3Yy0zLjA0LS44MzgtNy4wOTUtMS4yNjItMTIuMTUtMS4yNjItNS4wOTcgMC05LjE5NS40MzItMTIuMzAyIDEuMjg3bC4zNzMgMi41MDZjMy4xMjQtLjgxMyA3LjA5NS0xLjIxOSAxMS45My0xLjIxOSA0LjgwOSAwIDguNzI5LjM5OCAxMS43NTIgMS4xOTRsLjM5OC0yLjUwNm0tMTEuMzYyLTQuMjkzYzIuODQ1LjA1MSA1LjE4Mi4xOTUgNyAuNDIzIDEuODEyLjIyOSAzLjQ1NC41MDggNC45MTEuODIxLjkwNi0uODk4IDEuOTEzLTEuNzQ0IDMuMDItMi41NTcgMS4xMDktLjgxMyAxLjg4OC0xLjUwNyAyLjMzNy0yLjA4My43ODctMS4wNzUgMS4xODUtMi40MTMgMS4xODUtNC4wMiAwLTEuNDY1LS4zNTYtMi43MDEtMS4wNjctMy42OTItMS4yNy0xLjg3MS0zLjIxNy0yLjgwMy01LjgyNS0yLjgwMy0xLjUyNCAwLTMuMTA3LjMzLTQuNzY3Ljk5MS0xLjUwNy41OTMtMi41OTEgMS4yMzYtMy4yNzcgMS45My0xLjQwNSAxLjM2My0yLjQzIDMuMTUtMy4wNzMgNS4zNTktLjI0NS43NjItLjM4MSAxLjcyNy0uNDA2IDIuOTA0LS4wMjUgMS4xNzctLjA0MiAyLjA4My0uMDQyIDIuNzI2bTEuODEyLTEuOTNjMC0uNDgzLjA1OS0xLjE2LjE2MS0yLjA0OS4xMS0uODgxLjI3OS0xLjU3NS41MDgtMi4wNzQuNjE4LTEuMzM4IDEuNDktMi41NzQgMi42MzMtMy43MTcuMzMtLjMzIDEuMDQxLS43NzkgMi4xMzQtMS4zMzggMS4wNzUtLjUzMyAyLjIyNy0uNzk2IDMuNDQ2LS43OTYuOTMxIDAgMS44NDYuMTYxIDIuNzY5LjQ4My45MTQuMzIyIDEuNjA5LjgxMyAyLjA2NiAxLjQ4Mi40MTUuNTU5LjYyNyAxLjQ2NS42MjcgMi43MjYgMCAuOTkxLS40MDYgMS45MTMtMS4yMTkgMi43NzctLjUyNS41NDItMS4xMDEgMS4wOTItMS43MSAxLjY1MS0uNjEuNTUtMS4yMDIgMS4yMDItMS43NjEgMS45NDctLjk1Ny0uMzMtMi4yOTQtLjU5My00LS43Ny0xLjcxLS4xODYtMy41OS0uMjg4LTUuNjQ3LS4zMjIiLz48L3N2Zz4=');\n}\n</style>\n","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","import { render } from \"./Chessboard.vue?vue&type=template&id=4a4e19de\"\nimport script from \"./Chessboard.vue?vue&type=script&lang=js\"\nexport * from \"./Chessboard.vue?vue&type=script&lang=js\"\n\nimport \"./Chessboard.vue?vue&type=style&index=0&id=4a4e19de&lang=css\"\nscript.render = render\n\nexport default script","import { render } from \"./game.vue?vue&type=template&id=16739941\"\nimport script from \"./game.vue?vue&type=script&lang=js\"\nexport * from \"./game.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","var isObject = require('../internals/is-object');\nvar isArray = require('../internals/is-array');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\n\n// `ArraySpeciesCreate` abstract operation\n// https://tc39.github.io/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray, length) {\n  var C;\n  if (isArray(originalArray)) {\n    C = originalArray.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    else if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return new (C === undefined ? Array : C)(length === 0 ? 0 : length);\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar isForced = require('../internals/is-forced');\nvar redefine = require('../internals/redefine');\nvar InternalMetadataModule = require('../internals/internal-metadata');\nvar iterate = require('../internals/iterate');\nvar anInstance = require('../internals/an-instance');\nvar isObject = require('../internals/is-object');\nvar fails = require('../internals/fails');\nvar checkCorrectnessOfIteration = require('../internals/check-correctness-of-iteration');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar inheritIfRequired = require('../internals/inherit-if-required');\n\nmodule.exports = function (CONSTRUCTOR_NAME, wrapper, common) {\n  var IS_MAP = CONSTRUCTOR_NAME.indexOf('Map') !== -1;\n  var IS_WEAK = CONSTRUCTOR_NAME.indexOf('Weak') !== -1;\n  var ADDER = IS_MAP ? 'set' : 'add';\n  var NativeConstructor = global[CONSTRUCTOR_NAME];\n  var NativePrototype = NativeConstructor && NativeConstructor.prototype;\n  var Constructor = NativeConstructor;\n  var exported = {};\n\n  var fixMethod = function (KEY) {\n    var nativeMethod = NativePrototype[KEY];\n    redefine(NativePrototype, KEY,\n      KEY == 'add' ? function add(value) {\n        nativeMethod.call(this, value === 0 ? 0 : value);\n        return this;\n      } : KEY == 'delete' ? function (key) {\n        return IS_WEAK && !isObject(key) ? false : nativeMethod.call(this, key === 0 ? 0 : key);\n      } : KEY == 'get' ? function get(key) {\n        return IS_WEAK && !isObject(key) ? undefined : nativeMethod.call(this, key === 0 ? 0 : key);\n      } : KEY == 'has' ? function has(key) {\n        return IS_WEAK && !isObject(key) ? false : nativeMethod.call(this, key === 0 ? 0 : key);\n      } : function set(key, value) {\n        nativeMethod.call(this, key === 0 ? 0 : key, value);\n        return this;\n      }\n    );\n  };\n\n  // eslint-disable-next-line max-len\n  if (isForced(CONSTRUCTOR_NAME, typeof NativeConstructor != 'function' || !(IS_WEAK || NativePrototype.forEach && !fails(function () {\n    new NativeConstructor().entries().next();\n  })))) {\n    // create collection constructor\n    Constructor = common.getConstructor(wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER);\n    InternalMetadataModule.REQUIRED = true;\n  } else if (isForced(CONSTRUCTOR_NAME, true)) {\n    var instance = new Constructor();\n    // early implementations not supports chaining\n    var HASNT_CHAINING = instance[ADDER](IS_WEAK ? {} : -0, 1) != instance;\n    // V8 ~ Chromium 40- weak-collections throws on primitives, but should return false\n    var THROWS_ON_PRIMITIVES = fails(function () { instance.has(1); });\n    // most early implementations doesn't supports iterables, most modern - not close it correctly\n    // eslint-disable-next-line no-new\n    var ACCEPT_ITERABLES = checkCorrectnessOfIteration(function (iterable) { new NativeConstructor(iterable); });\n    // for early implementations -0 and +0 not the same\n    var BUGGY_ZERO = !IS_WEAK && fails(function () {\n      // V8 ~ Chromium 42- fails only with 5+ elements\n      var $instance = new NativeConstructor();\n      var index = 5;\n      while (index--) $instance[ADDER](index, index);\n      return !$instance.has(-0);\n    });\n\n    if (!ACCEPT_ITERABLES) {\n      Constructor = wrapper(function (dummy, iterable) {\n        anInstance(dummy, Constructor, CONSTRUCTOR_NAME);\n        var that = inheritIfRequired(new NativeConstructor(), dummy, Constructor);\n        if (iterable != undefined) iterate(iterable, that[ADDER], { that: that, AS_ENTRIES: IS_MAP });\n        return that;\n      });\n      Constructor.prototype = NativePrototype;\n      NativePrototype.constructor = Constructor;\n    }\n\n    if (THROWS_ON_PRIMITIVES || BUGGY_ZERO) {\n      fixMethod('delete');\n      fixMethod('has');\n      IS_MAP && fixMethod('get');\n    }\n\n    if (BUGGY_ZERO || HASNT_CHAINING) fixMethod(ADDER);\n\n    // weak collections should not contains .clear method\n    if (IS_WEAK && NativePrototype.clear) delete NativePrototype.clear;\n  }\n\n  exported[CONSTRUCTOR_NAME] = Constructor;\n  $({ global: true, forced: Constructor != NativeConstructor }, exported);\n\n  setToStringTag(Constructor, CONSTRUCTOR_NAME);\n\n  if (!IS_WEAK) common.setStrong(Constructor, CONSTRUCTOR_NAME, IS_MAP);\n\n  return Constructor;\n};\n","var isObject = require('../internals/is-object');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\n\n// makes subclassing work correct for wrapped built-ins\nmodule.exports = function ($this, dummy, Wrapper) {\n  var NewTarget, NewTargetPrototype;\n  if (\n    // it can work only with native `setPrototypeOf`\n    setPrototypeOf &&\n    // we haven't completely correct pre-ES6 way for getting `new.target`, so use this\n    typeof (NewTarget = dummy.constructor) == 'function' &&\n    NewTarget !== Wrapper &&\n    isObject(NewTargetPrototype = NewTarget.prototype) &&\n    NewTargetPrototype !== Wrapper.prototype\n  ) setPrototypeOf($this, NewTargetPrototype);\n  return $this;\n};\n","var path = require('../internals/path');\nvar has = require('../internals/has');\nvar wrappedWellKnownSymbolModule = require('../internals/well-known-symbol-wrapped');\nvar defineProperty = require('../internals/object-define-property').f;\n\nmodule.exports = function (NAME) {\n  var Symbol = path.Symbol || (path.Symbol = {});\n  if (!has(Symbol, NAME)) defineProperty(Symbol, NAME, {\n    value: wrappedWellKnownSymbolModule.f(NAME)\n  });\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.clear = exports.cancel = exports.end = exports.move = exports.processDraw = exports.start = void 0;\nconst board_1 = require(\"./board\");\nconst util_1 = require(\"./util\");\nconst brushes = ['green', 'red', 'blue', 'yellow'];\nfunction start(state, e) {\n    if (e.touches && e.touches.length > 1)\n        return;\n    e.stopPropagation();\n    e.preventDefault();\n    e.ctrlKey ? board_1.unselect(state) : board_1.cancelMove(state);\n    const pos = util_1.eventPosition(e), orig = board_1.getKeyAtDomPos(pos, board_1.whitePov(state), state.dom.bounds());\n    if (!orig)\n        return;\n    state.drawable.current = {\n        orig,\n        pos,\n        brush: eventBrush(e),\n        snapToValidMove: state.drawable.defaultSnapToValidMove,\n    };\n    processDraw(state);\n}\nexports.start = start;\nfunction processDraw(state) {\n    requestAnimationFrame(() => {\n        const cur = state.drawable.current;\n        if (cur) {\n            const keyAtDomPos = board_1.getKeyAtDomPos(cur.pos, board_1.whitePov(state), state.dom.bounds());\n            if (!keyAtDomPos) {\n                cur.snapToValidMove = false;\n            }\n            const mouseSq = cur.snapToValidMove ?\n                board_1.getSnappedKeyAtDomPos(cur.orig, cur.pos, board_1.whitePov(state), state.dom.bounds()) :\n                keyAtDomPos;\n            if (mouseSq !== cur.mouseSq) {\n                cur.mouseSq = mouseSq;\n                cur.dest = mouseSq !== cur.orig ? mouseSq : undefined;\n                state.dom.redrawNow();\n            }\n            processDraw(state);\n        }\n    });\n}\nexports.processDraw = processDraw;\nfunction move(state, e) {\n    if (state.drawable.current)\n        state.drawable.current.pos = util_1.eventPosition(e);\n}\nexports.move = move;\nfunction end(state) {\n    const cur = state.drawable.current;\n    if (cur) {\n        if (cur.mouseSq)\n            addShape(state.drawable, cur);\n        cancel(state);\n    }\n}\nexports.end = end;\nfunction cancel(state) {\n    if (state.drawable.current) {\n        state.drawable.current = undefined;\n        state.dom.redraw();\n    }\n}\nexports.cancel = cancel;\nfunction clear(state) {\n    if (state.drawable.shapes.length) {\n        state.drawable.shapes = [];\n        state.dom.redraw();\n        onChange(state.drawable);\n    }\n}\nexports.clear = clear;\nfunction eventBrush(e) {\n    var _a;\n    const modA = (e.shiftKey || e.ctrlKey) && util_1.isRightButton(e);\n    const modB = e.altKey || e.metaKey || ((_a = e.getModifierState) === null || _a === void 0 ? void 0 : _a.call(e, 'AltGraph'));\n    return brushes[(modA ? 1 : 0) + (modB ? 2 : 0)];\n}\nfunction addShape(drawable, cur) {\n    const sameShape = (s) => s.orig === cur.orig && s.dest === cur.dest;\n    const similar = drawable.shapes.find(sameShape);\n    if (similar)\n        drawable.shapes = drawable.shapes.filter(s => !sameShape(s));\n    if (!similar || similar.brush !== cur.brush)\n        drawable.shapes.push(cur);\n    onChange(drawable);\n}\nfunction onChange(drawable) {\n    if (drawable.onChange)\n        drawable.onChange(drawable.shapes);\n}\n//# sourceMappingURL=draw.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.renderWrap = void 0;\nconst util_1 = require(\"./util\");\nconst types_1 = require(\"./types\");\nconst svg_1 = require(\"./svg\");\nfunction renderWrap(element, s, relative) {\n    element.innerHTML = '';\n    element.classList.add('cg-wrap');\n    for (const c of types_1.colors)\n        element.classList.toggle('orientation-' + c, s.orientation === c);\n    element.classList.toggle('manipulable', !s.viewOnly);\n    const helper = util_1.createEl('cg-helper');\n    element.appendChild(helper);\n    const container = util_1.createEl('cg-container');\n    helper.appendChild(container);\n    const board = util_1.createEl('cg-board');\n    container.appendChild(board);\n    let svg;\n    if (s.drawable.visible && !relative) {\n        svg = svg_1.createElement('svg');\n        svg.appendChild(svg_1.createElement('defs'));\n        container.appendChild(svg);\n    }\n    if (s.coordinates) {\n        const orientClass = s.orientation === 'black' ? ' black' : '';\n        container.appendChild(renderCoords(types_1.ranks, 'ranks' + orientClass));\n        container.appendChild(renderCoords(types_1.files, 'files' + orientClass));\n    }\n    let ghost;\n    if (s.draggable.showGhost && !relative) {\n        ghost = util_1.createEl('piece', 'ghost');\n        util_1.setVisible(ghost, false);\n        container.appendChild(ghost);\n    }\n    return {\n        board,\n        container,\n        ghost,\n        svg\n    };\n}\nexports.renderWrap = renderWrap;\nfunction renderCoords(elems, className) {\n    const el = util_1.createEl('coords', className);\n    let f;\n    for (const elem of elems) {\n        f = util_1.createEl('coord');\n        f.textContent = elem;\n        el.appendChild(f);\n    }\n    return el;\n}\n//# sourceMappingURL=wrap.js.map","'use strict';\nvar toPrimitive = require('../internals/to-primitive');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = function (object, key, value) {\n  var propertyKey = toPrimitive(key);\n  if (propertyKey in object) definePropertyModule.f(object, propertyKey, createPropertyDescriptor(0, value));\n  else object[propertyKey] = value;\n};\n","'use strict';\nvar charAt = require('../internals/string-multibyte').charAt;\n\n// `AdvanceStringIndex` abstract operation\n// https://tc39.github.io/ecma262/#sec-advancestringindex\nmodule.exports = function (S, index, unicode) {\n  return index + (unicode ? charAt(S, index).length : 1);\n};\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Chessboard.vue?vue&type=style&index=0&id=4a4e19de&lang=css\"","'use strict';\nvar regexpFlags = require('./regexp-flags');\nvar stickyHelpers = require('./regexp-sticky-helpers');\n\nvar nativeExec = RegExp.prototype.exec;\n// This always refers to the native implementation, because the\n// String#replace polyfill uses ./fix-regexp-well-known-symbol-logic.js,\n// which loads this file before patching the method.\nvar nativeReplace = String.prototype.replace;\n\nvar patchedExec = nativeExec;\n\nvar UPDATES_LAST_INDEX_WRONG = (function () {\n  var re1 = /a/;\n  var re2 = /b*/g;\n  nativeExec.call(re1, 'a');\n  nativeExec.call(re2, 'a');\n  return re1.lastIndex !== 0 || re2.lastIndex !== 0;\n})();\n\nvar UNSUPPORTED_Y = stickyHelpers.UNSUPPORTED_Y || stickyHelpers.BROKEN_CARET;\n\n// nonparticipating capturing group, copied from es5-shim's String#split patch.\nvar NPCG_INCLUDED = /()??/.exec('')[1] !== undefined;\n\nvar PATCH = UPDATES_LAST_INDEX_WRONG || NPCG_INCLUDED || UNSUPPORTED_Y;\n\nif (PATCH) {\n  patchedExec = function exec(str) {\n    var re = this;\n    var lastIndex, reCopy, match, i;\n    var sticky = UNSUPPORTED_Y && re.sticky;\n    var flags = regexpFlags.call(re);\n    var source = re.source;\n    var charsAdded = 0;\n    var strCopy = str;\n\n    if (sticky) {\n      flags = flags.replace('y', '');\n      if (flags.indexOf('g') === -1) {\n        flags += 'g';\n      }\n\n      strCopy = String(str).slice(re.lastIndex);\n      // Support anchored sticky behavior.\n      if (re.lastIndex > 0 && (!re.multiline || re.multiline && str[re.lastIndex - 1] !== '\\n')) {\n        source = '(?: ' + source + ')';\n        strCopy = ' ' + strCopy;\n        charsAdded++;\n      }\n      // ^(? + rx + ) is needed, in combination with some str slicing, to\n      // simulate the 'y' flag.\n      reCopy = new RegExp('^(?:' + source + ')', flags);\n    }\n\n    if (NPCG_INCLUDED) {\n      reCopy = new RegExp('^' + source + '$(?!\\\\s)', flags);\n    }\n    if (UPDATES_LAST_INDEX_WRONG) lastIndex = re.lastIndex;\n\n    match = nativeExec.call(sticky ? reCopy : re, strCopy);\n\n    if (sticky) {\n      if (match) {\n        match.input = match.input.slice(charsAdded);\n        match[0] = match[0].slice(charsAdded);\n        match.index = re.lastIndex;\n        re.lastIndex += match[0].length;\n      } else re.lastIndex = 0;\n    } else if (UPDATES_LAST_INDEX_WRONG && match) {\n      re.lastIndex = re.global ? match.index + match[0].length : lastIndex;\n    }\n    if (NPCG_INCLUDED && match && match.length > 1) {\n      // Fix browsers whose `exec` methods don't consistently return `undefined`\n      // for NPCG, like IE8. NOTE: This doesn' work for /(.?)?/\n      nativeReplace.call(match[0], reCopy, function () {\n        for (i = 1; i < arguments.length - 2; i++) {\n          if (arguments[i] === undefined) match[i] = undefined;\n        }\n      });\n    }\n\n    return match;\n  };\n}\n\nmodule.exports = patchedExec;\n","var anObject = require('../internals/an-object');\nvar iteratorClose = require('../internals/iterator-close');\n\n// call something on iterator step with safe closing on error\nmodule.exports = function (iterator, fn, value, ENTRIES) {\n  try {\n    return ENTRIES ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch (error) {\n    iteratorClose(iterator);\n    throw error;\n  }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.premove = exports.queen = exports.knight = void 0;\nconst util = require(\"./util\");\nfunction diff(a, b) {\n    return Math.abs(a - b);\n}\nfunction pawn(color) {\n    return (x1, y1, x2, y2) => diff(x1, x2) < 2 && (color === 'white' ? (y2 === y1 + 1 || (y1 <= 1 && y2 === (y1 + 2) && x1 === x2)) : (y2 === y1 - 1 || (y1 >= 6 && y2 === (y1 - 2) && x1 === x2)));\n}\nexports.knight = (x1, y1, x2, y2) => {\n    const xd = diff(x1, x2);\n    const yd = diff(y1, y2);\n    return (xd === 1 && yd === 2) || (xd === 2 && yd === 1);\n};\nconst bishop = (x1, y1, x2, y2) => {\n    return diff(x1, x2) === diff(y1, y2);\n};\nconst rook = (x1, y1, x2, y2) => {\n    return x1 === x2 || y1 === y2;\n};\nexports.queen = (x1, y1, x2, y2) => {\n    return bishop(x1, y1, x2, y2) || rook(x1, y1, x2, y2);\n};\nfunction king(color, rookFiles, canCastle) {\n    return (x1, y1, x2, y2) => (diff(x1, x2) < 2 && diff(y1, y2) < 2) || (canCastle && y1 === y2 && y1 === (color === 'white' ? 0 : 7) && ((x1 === 4 && ((x2 === 2 && rookFiles.includes(0)) || (x2 === 6 && rookFiles.includes(7)))) ||\n        rookFiles.includes(x2)));\n}\nfunction rookFilesOf(pieces, color) {\n    const backrank = color === 'white' ? '1' : '8';\n    const files = [];\n    for (const [key, piece] of pieces) {\n        if (key[1] === backrank && piece.color === color && piece.role === 'rook') {\n            files.push(util.key2pos(key)[0]);\n        }\n    }\n    return files;\n}\nfunction premove(pieces, key, canCastle) {\n    const piece = pieces.get(key);\n    if (!piece)\n        return [];\n    const pos = util.key2pos(key), r = piece.role, mobility = r === 'pawn' ? pawn(piece.color) : (r === 'knight' ? exports.knight : (r === 'bishop' ? bishop : (r === 'rook' ? rook : (r === 'queen' ? exports.queen : king(piece.color, rookFilesOf(pieces, piece.color), canCastle)))));\n    return util.allPos.filter(pos2 => (pos[0] !== pos2[0] || pos[1] !== pos2[1]) && mobility(pos[0], pos[1], pos2[0], pos2[1])).map(util.pos2key);\n}\nexports.premove = premove;\n//# sourceMappingURL=premove.js.map","'use strict';\n\nvar fails = require('./fails');\n\n// babel-minify transpiles RegExp('a', 'y') -> /a/y and it causes SyntaxError,\n// so we use an intermediate function.\nfunction RE(s, f) {\n  return RegExp(s, f);\n}\n\nexports.UNSUPPORTED_Y = fails(function () {\n  // babel-minify transpiles RegExp('a', 'y') -> /a/y and it causes SyntaxError\n  var re = RE('a', 'y');\n  re.lastIndex = 2;\n  return re.exec('abcd') != null;\n});\n\nexports.BROKEN_CARET = fails(function () {\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=773687\n  var re = RE('^r', 'gy');\n  re.lastIndex = 2;\n  return re.exec('str') != null;\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IndexedObject = require('../internals/indexed-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar nativeJoin = [].join;\n\nvar ES3_STRINGS = IndexedObject != Object;\nvar STRICT_METHOD = arrayMethodIsStrict('join', ',');\n\n// `Array.prototype.join` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.join\n$({ target: 'Array', proto: true, forced: ES3_STRINGS || !STRICT_METHOD }, {\n  join: function join(separator) {\n    return nativeJoin.call(toIndexedObject(this), separator === undefined ? ',' : separator);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar getBuiltIn = require('../internals/get-built-in');\nvar IS_PURE = require('../internals/is-pure');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\nvar fails = require('../internals/fails');\nvar has = require('../internals/has');\nvar isArray = require('../internals/is-array');\nvar isObject = require('../internals/is-object');\nvar anObject = require('../internals/an-object');\nvar toObject = require('../internals/to-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPrimitive = require('../internals/to-primitive');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar nativeObjectCreate = require('../internals/object-create');\nvar objectKeys = require('../internals/object-keys');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertyNamesExternal = require('../internals/object-get-own-property-names-external');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar redefine = require('../internals/redefine');\nvar shared = require('../internals/shared');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar uid = require('../internals/uid');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar wrappedWellKnownSymbolModule = require('../internals/well-known-symbol-wrapped');\nvar defineWellKnownSymbol = require('../internals/define-well-known-symbol');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar InternalStateModule = require('../internals/internal-state');\nvar $forEach = require('../internals/array-iteration').forEach;\n\nvar HIDDEN = sharedKey('hidden');\nvar SYMBOL = 'Symbol';\nvar PROTOTYPE = 'prototype';\nvar TO_PRIMITIVE = wellKnownSymbol('toPrimitive');\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(SYMBOL);\nvar ObjectPrototype = Object[PROTOTYPE];\nvar $Symbol = global.Symbol;\nvar $stringify = getBuiltIn('JSON', 'stringify');\nvar nativeGetOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\nvar nativeDefineProperty = definePropertyModule.f;\nvar nativeGetOwnPropertyNames = getOwnPropertyNamesExternal.f;\nvar nativePropertyIsEnumerable = propertyIsEnumerableModule.f;\nvar AllSymbols = shared('symbols');\nvar ObjectPrototypeSymbols = shared('op-symbols');\nvar StringToSymbolRegistry = shared('string-to-symbol-registry');\nvar SymbolToStringRegistry = shared('symbol-to-string-registry');\nvar WellKnownSymbolsStore = shared('wks');\nvar QObject = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar USE_SETTER = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDescriptor = DESCRIPTORS && fails(function () {\n  return nativeObjectCreate(nativeDefineProperty({}, 'a', {\n    get: function () { return nativeDefineProperty(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (O, P, Attributes) {\n  var ObjectPrototypeDescriptor = nativeGetOwnPropertyDescriptor(ObjectPrototype, P);\n  if (ObjectPrototypeDescriptor) delete ObjectPrototype[P];\n  nativeDefineProperty(O, P, Attributes);\n  if (ObjectPrototypeDescriptor && O !== ObjectPrototype) {\n    nativeDefineProperty(ObjectPrototype, P, ObjectPrototypeDescriptor);\n  }\n} : nativeDefineProperty;\n\nvar wrap = function (tag, description) {\n  var symbol = AllSymbols[tag] = nativeObjectCreate($Symbol[PROTOTYPE]);\n  setInternalState(symbol, {\n    type: SYMBOL,\n    tag: tag,\n    description: description\n  });\n  if (!DESCRIPTORS) symbol.description = description;\n  return symbol;\n};\n\nvar isSymbol = USE_SYMBOL_AS_UID ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  return Object(it) instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(O, P, Attributes) {\n  if (O === ObjectPrototype) $defineProperty(ObjectPrototypeSymbols, P, Attributes);\n  anObject(O);\n  var key = toPrimitive(P, true);\n  anObject(Attributes);\n  if (has(AllSymbols, key)) {\n    if (!Attributes.enumerable) {\n      if (!has(O, HIDDEN)) nativeDefineProperty(O, HIDDEN, createPropertyDescriptor(1, {}));\n      O[HIDDEN][key] = true;\n    } else {\n      if (has(O, HIDDEN) && O[HIDDEN][key]) O[HIDDEN][key] = false;\n      Attributes = nativeObjectCreate(Attributes, { enumerable: createPropertyDescriptor(0, false) });\n    } return setSymbolDescriptor(O, key, Attributes);\n  } return nativeDefineProperty(O, key, Attributes);\n};\n\nvar $defineProperties = function defineProperties(O, Properties) {\n  anObject(O);\n  var properties = toIndexedObject(Properties);\n  var keys = objectKeys(properties).concat($getOwnPropertySymbols(properties));\n  $forEach(keys, function (key) {\n    if (!DESCRIPTORS || $propertyIsEnumerable.call(properties, key)) $defineProperty(O, key, properties[key]);\n  });\n  return O;\n};\n\nvar $create = function create(O, Properties) {\n  return Properties === undefined ? nativeObjectCreate(O) : $defineProperties(nativeObjectCreate(O), Properties);\n};\n\nvar $propertyIsEnumerable = function propertyIsEnumerable(V) {\n  var P = toPrimitive(V, true);\n  var enumerable = nativePropertyIsEnumerable.call(this, P);\n  if (this === ObjectPrototype && has(AllSymbols, P) && !has(ObjectPrototypeSymbols, P)) return false;\n  return enumerable || !has(this, P) || !has(AllSymbols, P) || has(this, HIDDEN) && this[HIDDEN][P] ? enumerable : true;\n};\n\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(O, P) {\n  var it = toIndexedObject(O);\n  var key = toPrimitive(P, true);\n  if (it === ObjectPrototype && has(AllSymbols, key) && !has(ObjectPrototypeSymbols, key)) return;\n  var descriptor = nativeGetOwnPropertyDescriptor(it, key);\n  if (descriptor && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) {\n    descriptor.enumerable = true;\n  }\n  return descriptor;\n};\n\nvar $getOwnPropertyNames = function getOwnPropertyNames(O) {\n  var names = nativeGetOwnPropertyNames(toIndexedObject(O));\n  var result = [];\n  $forEach(names, function (key) {\n    if (!has(AllSymbols, key) && !has(hiddenKeys, key)) result.push(key);\n  });\n  return result;\n};\n\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(O) {\n  var IS_OBJECT_PROTOTYPE = O === ObjectPrototype;\n  var names = nativeGetOwnPropertyNames(IS_OBJECT_PROTOTYPE ? ObjectPrototypeSymbols : toIndexedObject(O));\n  var result = [];\n  $forEach(names, function (key) {\n    if (has(AllSymbols, key) && (!IS_OBJECT_PROTOTYPE || has(ObjectPrototype, key))) {\n      result.push(AllSymbols[key]);\n    }\n  });\n  return result;\n};\n\n// `Symbol` constructor\n// https://tc39.github.io/ecma262/#sec-symbol-constructor\nif (!NATIVE_SYMBOL) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor');\n    var description = !arguments.length || arguments[0] === undefined ? undefined : String(arguments[0]);\n    var tag = uid(description);\n    var setter = function (value) {\n      if (this === ObjectPrototype) setter.call(ObjectPrototypeSymbols, value);\n      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDescriptor(this, tag, createPropertyDescriptor(1, value));\n    };\n    if (DESCRIPTORS && USE_SETTER) setSymbolDescriptor(ObjectPrototype, tag, { configurable: true, set: setter });\n    return wrap(tag, description);\n  };\n\n  redefine($Symbol[PROTOTYPE], 'toString', function toString() {\n    return getInternalState(this).tag;\n  });\n\n  redefine($Symbol, 'withoutSetter', function (description) {\n    return wrap(uid(description), description);\n  });\n\n  propertyIsEnumerableModule.f = $propertyIsEnumerable;\n  definePropertyModule.f = $defineProperty;\n  getOwnPropertyDescriptorModule.f = $getOwnPropertyDescriptor;\n  getOwnPropertyNamesModule.f = getOwnPropertyNamesExternal.f = $getOwnPropertyNames;\n  getOwnPropertySymbolsModule.f = $getOwnPropertySymbols;\n\n  wrappedWellKnownSymbolModule.f = function (name) {\n    return wrap(wellKnownSymbol(name), name);\n  };\n\n  if (DESCRIPTORS) {\n    // https://github.com/tc39/proposal-Symbol-description\n    nativeDefineProperty($Symbol[PROTOTYPE], 'description', {\n      configurable: true,\n      get: function description() {\n        return getInternalState(this).description;\n      }\n    });\n    if (!IS_PURE) {\n      redefine(ObjectPrototype, 'propertyIsEnumerable', $propertyIsEnumerable, { unsafe: true });\n    }\n  }\n}\n\n$({ global: true, wrap: true, forced: !NATIVE_SYMBOL, sham: !NATIVE_SYMBOL }, {\n  Symbol: $Symbol\n});\n\n$forEach(objectKeys(WellKnownSymbolsStore), function (name) {\n  defineWellKnownSymbol(name);\n});\n\n$({ target: SYMBOL, stat: true, forced: !NATIVE_SYMBOL }, {\n  // `Symbol.for` method\n  // https://tc39.github.io/ecma262/#sec-symbol.for\n  'for': function (key) {\n    var string = String(key);\n    if (has(StringToSymbolRegistry, string)) return StringToSymbolRegistry[string];\n    var symbol = $Symbol(string);\n    StringToSymbolRegistry[string] = symbol;\n    SymbolToStringRegistry[symbol] = string;\n    return symbol;\n  },\n  // `Symbol.keyFor` method\n  // https://tc39.github.io/ecma262/#sec-symbol.keyfor\n  keyFor: function keyFor(sym) {\n    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol');\n    if (has(SymbolToStringRegistry, sym)) return SymbolToStringRegistry[sym];\n  },\n  useSetter: function () { USE_SETTER = true; },\n  useSimple: function () { USE_SETTER = false; }\n});\n\n$({ target: 'Object', stat: true, forced: !NATIVE_SYMBOL, sham: !DESCRIPTORS }, {\n  // `Object.create` method\n  // https://tc39.github.io/ecma262/#sec-object.create\n  create: $create,\n  // `Object.defineProperty` method\n  // https://tc39.github.io/ecma262/#sec-object.defineproperty\n  defineProperty: $defineProperty,\n  // `Object.defineProperties` method\n  // https://tc39.github.io/ecma262/#sec-object.defineproperties\n  defineProperties: $defineProperties,\n  // `Object.getOwnPropertyDescriptor` method\n  // https://tc39.github.io/ecma262/#sec-object.getownpropertydescriptors\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor\n});\n\n$({ target: 'Object', stat: true, forced: !NATIVE_SYMBOL }, {\n  // `Object.getOwnPropertyNames` method\n  // https://tc39.github.io/ecma262/#sec-object.getownpropertynames\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // `Object.getOwnPropertySymbols` method\n  // https://tc39.github.io/ecma262/#sec-object.getownpropertysymbols\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// Chrome 38 and 39 `Object.getOwnPropertySymbols` fails on primitives\n// https://bugs.chromium.org/p/v8/issues/detail?id=3443\n$({ target: 'Object', stat: true, forced: fails(function () { getOwnPropertySymbolsModule.f(1); }) }, {\n  getOwnPropertySymbols: function getOwnPropertySymbols(it) {\n    return getOwnPropertySymbolsModule.f(toObject(it));\n  }\n});\n\n// `JSON.stringify` method behavior with symbols\n// https://tc39.github.io/ecma262/#sec-json.stringify\nif ($stringify) {\n  var FORCED_JSON_STRINGIFY = !NATIVE_SYMBOL || fails(function () {\n    var symbol = $Symbol();\n    // MS Edge converts symbol values to JSON as {}\n    return $stringify([symbol]) != '[null]'\n      // WebKit converts symbol values to JSON as null\n      || $stringify({ a: symbol }) != '{}'\n      // V8 throws on boxed symbols\n      || $stringify(Object(symbol)) != '{}';\n  });\n\n  $({ target: 'JSON', stat: true, forced: FORCED_JSON_STRINGIFY }, {\n    // eslint-disable-next-line no-unused-vars\n    stringify: function stringify(it, replacer, space) {\n      var args = [it];\n      var index = 1;\n      var $replacer;\n      while (arguments.length > index) args.push(arguments[index++]);\n      $replacer = replacer;\n      if (!isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n      if (!isArray(replacer)) replacer = function (key, value) {\n        if (typeof $replacer == 'function') value = $replacer.call(this, key, value);\n        if (!isSymbol(value)) return value;\n      };\n      args[1] = replacer;\n      return $stringify.apply(null, args);\n    }\n  });\n}\n\n// `Symbol.prototype[@@toPrimitive]` method\n// https://tc39.github.io/ecma262/#sec-symbol.prototype-@@toprimitive\nif (!$Symbol[PROTOTYPE][TO_PRIMITIVE]) {\n  createNonEnumerableProperty($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n}\n// `Symbol.prototype[@@toStringTag]` property\n// https://tc39.github.io/ecma262/#sec-symbol.prototype-@@tostringtag\nsetToStringTag($Symbol, SYMBOL);\n\nhiddenKeys[HIDDEN] = true;\n","var $ = require('../internals/export');\nvar from = require('../internals/array-from');\nvar checkCorrectnessOfIteration = require('../internals/check-correctness-of-iteration');\n\nvar INCORRECT_ITERATION = !checkCorrectnessOfIteration(function (iterable) {\n  Array.from(iterable);\n});\n\n// `Array.from` method\n// https://tc39.github.io/ecma262/#sec-array.from\n$({ target: 'Array', stat: true, forced: INCORRECT_ITERATION }, {\n  from: from\n});\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call,no-throw-literal\n    method.call(null, argument || function () { throw 1; }, 1);\n  });\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\nmodule.exports = function (METHOD_NAME) {\n  var regexp = /./;\n  try {\n    '/./'[METHOD_NAME](regexp);\n  } catch (error1) {\n    try {\n      regexp[MATCH] = false;\n      return '/./'[METHOD_NAME](regexp);\n    } catch (error2) { /* empty */ }\n  } return false;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar exec = require('../internals/regexp-exec');\n\n$({ target: 'RegExp', proto: true, forced: /./.exec !== exec }, {\n  exec: exec\n});\n","'use strict';\nvar anObject = require('../internals/an-object');\n\n// `RegExp.prototype.flags` getter implementation\n// https://tc39.github.io/ecma262/#sec-get-regexp.prototype.flags\nmodule.exports = function () {\n  var that = anObject(this);\n  var result = '';\n  if (that.global) result += 'g';\n  if (that.ignoreCase) result += 'i';\n  if (that.multiline) result += 'm';\n  if (that.dotAll) result += 's';\n  if (that.unicode) result += 'u';\n  if (that.sticky) result += 'y';\n  return result;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar has = require('../internals/has');\n\nvar defineProperty = Object.defineProperty;\nvar cache = {};\n\nvar thrower = function (it) { throw it; };\n\nmodule.exports = function (METHOD_NAME, options) {\n  if (has(cache, METHOD_NAME)) return cache[METHOD_NAME];\n  if (!options) options = {};\n  var method = [][METHOD_NAME];\n  var ACCESSORS = has(options, 'ACCESSORS') ? options.ACCESSORS : false;\n  var argument0 = has(options, 0) ? options[0] : thrower;\n  var argument1 = has(options, 1) ? options[1] : undefined;\n\n  return cache[METHOD_NAME] = !!method && !fails(function () {\n    if (ACCESSORS && !DESCRIPTORS) return true;\n    var O = { length: -1 };\n\n    if (ACCESSORS) defineProperty(O, 1, { enumerable: true, get: thrower });\n    else O[1] = 1;\n\n    method.call(O, argument0, argument1);\n  });\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.whitePov = exports.getSnappedKeyAtDomPos = exports.getKeyAtDomPos = exports.stop = exports.cancelMove = exports.playPredrop = exports.playPremove = exports.isDraggable = exports.canMove = exports.unselect = exports.setSelected = exports.selectSquare = exports.dropNewPiece = exports.userMove = exports.baseNewPiece = exports.baseMove = exports.unsetPredrop = exports.unsetPremove = exports.setCheck = exports.setPieces = exports.reset = exports.toggleOrientation = exports.callUserFunction = void 0;\nconst util_1 = require(\"./util\");\nconst premove_1 = require(\"./premove\");\nfunction callUserFunction(f, ...args) {\n    if (f)\n        setTimeout(() => f(...args), 1);\n}\nexports.callUserFunction = callUserFunction;\nfunction toggleOrientation(state) {\n    state.orientation = util_1.opposite(state.orientation);\n    state.animation.current =\n        state.draggable.current =\n            state.selected = undefined;\n}\nexports.toggleOrientation = toggleOrientation;\nfunction reset(state) {\n    state.lastMove = undefined;\n    unselect(state);\n    unsetPremove(state);\n    unsetPredrop(state);\n}\nexports.reset = reset;\nfunction setPieces(state, pieces) {\n    for (const [key, piece] of pieces) {\n        if (piece)\n            state.pieces.set(key, piece);\n        else\n            state.pieces.delete(key);\n    }\n}\nexports.setPieces = setPieces;\nfunction setCheck(state, color) {\n    state.check = undefined;\n    if (color === true)\n        color = state.turnColor;\n    if (color)\n        for (const [k, p] of state.pieces) {\n            if (p.role === 'king' && p.color === color) {\n                state.check = k;\n            }\n        }\n}\nexports.setCheck = setCheck;\nfunction setPremove(state, orig, dest, meta) {\n    unsetPredrop(state);\n    state.premovable.current = [orig, dest];\n    callUserFunction(state.premovable.events.set, orig, dest, meta);\n}\nfunction unsetPremove(state) {\n    if (state.premovable.current) {\n        state.premovable.current = undefined;\n        callUserFunction(state.premovable.events.unset);\n    }\n}\nexports.unsetPremove = unsetPremove;\nfunction setPredrop(state, role, key) {\n    unsetPremove(state);\n    state.predroppable.current = { role, key };\n    callUserFunction(state.predroppable.events.set, role, key);\n}\nfunction unsetPredrop(state) {\n    const pd = state.predroppable;\n    if (pd.current) {\n        pd.current = undefined;\n        callUserFunction(pd.events.unset);\n    }\n}\nexports.unsetPredrop = unsetPredrop;\nfunction tryAutoCastle(state, orig, dest) {\n    if (!state.autoCastle)\n        return false;\n    const king = state.pieces.get(orig);\n    if (!king || king.role !== 'king')\n        return false;\n    const origPos = util_1.key2pos(orig);\n    const destPos = util_1.key2pos(dest);\n    if ((origPos[1] !== 0 && origPos[1] !== 7) || origPos[1] !== destPos[1])\n        return false;\n    if (origPos[0] === 4 && !state.pieces.has(dest)) {\n        if (destPos[0] === 6)\n            dest = util_1.pos2key([7, destPos[1]]);\n        else if (destPos[0] === 2)\n            dest = util_1.pos2key([0, destPos[1]]);\n    }\n    const rook = state.pieces.get(dest);\n    if (!rook || rook.color !== king.color || rook.role !== 'rook')\n        return false;\n    state.pieces.delete(orig);\n    state.pieces.delete(dest);\n    if (origPos[0] < destPos[0]) {\n        state.pieces.set(util_1.pos2key([6, destPos[1]]), king);\n        state.pieces.set(util_1.pos2key([5, destPos[1]]), rook);\n    }\n    else {\n        state.pieces.set(util_1.pos2key([2, destPos[1]]), king);\n        state.pieces.set(util_1.pos2key([3, destPos[1]]), rook);\n    }\n    return true;\n}\nfunction baseMove(state, orig, dest) {\n    const origPiece = state.pieces.get(orig), destPiece = state.pieces.get(dest);\n    if (orig === dest || !origPiece)\n        return false;\n    const captured = (destPiece && destPiece.color !== origPiece.color) ? destPiece : undefined;\n    if (dest === state.selected)\n        unselect(state);\n    callUserFunction(state.events.move, orig, dest, captured);\n    if (!tryAutoCastle(state, orig, dest)) {\n        state.pieces.set(dest, origPiece);\n        state.pieces.delete(orig);\n    }\n    state.lastMove = [orig, dest];\n    state.check = undefined;\n    callUserFunction(state.events.change);\n    return captured || true;\n}\nexports.baseMove = baseMove;\nfunction baseNewPiece(state, piece, key, force) {\n    if (state.pieces.has(key)) {\n        if (force)\n            state.pieces.delete(key);\n        else\n            return false;\n    }\n    callUserFunction(state.events.dropNewPiece, piece, key);\n    state.pieces.set(key, piece);\n    state.lastMove = [key];\n    state.check = undefined;\n    callUserFunction(state.events.change);\n    state.movable.dests = undefined;\n    state.turnColor = util_1.opposite(state.turnColor);\n    return true;\n}\nexports.baseNewPiece = baseNewPiece;\nfunction baseUserMove(state, orig, dest) {\n    const result = baseMove(state, orig, dest);\n    if (result) {\n        state.movable.dests = undefined;\n        state.turnColor = util_1.opposite(state.turnColor);\n        state.animation.current = undefined;\n    }\n    return result;\n}\nfunction userMove(state, orig, dest) {\n    if (canMove(state, orig, dest)) {\n        const result = baseUserMove(state, orig, dest);\n        if (result) {\n            const holdTime = state.hold.stop();\n            unselect(state);\n            const metadata = {\n                premove: false,\n                ctrlKey: state.stats.ctrlKey,\n                holdTime\n            };\n            if (result !== true)\n                metadata.captured = result;\n            callUserFunction(state.movable.events.after, orig, dest, metadata);\n            return true;\n        }\n    }\n    else if (canPremove(state, orig, dest)) {\n        setPremove(state, orig, dest, {\n            ctrlKey: state.stats.ctrlKey\n        });\n        unselect(state);\n        return true;\n    }\n    unselect(state);\n    return false;\n}\nexports.userMove = userMove;\nfunction dropNewPiece(state, orig, dest, force) {\n    const piece = state.pieces.get(orig);\n    if (piece && (canDrop(state, orig, dest) || force)) {\n        state.pieces.delete(orig);\n        baseNewPiece(state, piece, dest, force);\n        callUserFunction(state.movable.events.afterNewPiece, piece.role, dest, {\n            predrop: false\n        });\n    }\n    else if (piece && canPredrop(state, orig, dest)) {\n        setPredrop(state, piece.role, dest);\n    }\n    else {\n        unsetPremove(state);\n        unsetPredrop(state);\n    }\n    state.pieces.delete(orig);\n    unselect(state);\n}\nexports.dropNewPiece = dropNewPiece;\nfunction selectSquare(state, key, force) {\n    callUserFunction(state.events.select, key);\n    if (state.selected) {\n        if (state.selected === key && !state.draggable.enabled) {\n            unselect(state);\n            state.hold.cancel();\n            return;\n        }\n        else if ((state.selectable.enabled || force) && state.selected !== key) {\n            if (userMove(state, state.selected, key)) {\n                state.stats.dragged = false;\n                return;\n            }\n        }\n    }\n    if (isMovable(state, key) || isPremovable(state, key)) {\n        setSelected(state, key);\n        state.hold.start();\n    }\n}\nexports.selectSquare = selectSquare;\nfunction setSelected(state, key) {\n    state.selected = key;\n    if (isPremovable(state, key)) {\n        state.premovable.dests = premove_1.premove(state.pieces, key, state.premovable.castle);\n    }\n    else\n        state.premovable.dests = undefined;\n}\nexports.setSelected = setSelected;\nfunction unselect(state) {\n    state.selected = undefined;\n    state.premovable.dests = undefined;\n    state.hold.cancel();\n}\nexports.unselect = unselect;\nfunction isMovable(state, orig) {\n    const piece = state.pieces.get(orig);\n    return !!piece && (state.movable.color === 'both' || (state.movable.color === piece.color &&\n        state.turnColor === piece.color));\n}\nfunction canMove(state, orig, dest) {\n    var _a, _b;\n    return orig !== dest && isMovable(state, orig) && (state.movable.free || !!((_b = (_a = state.movable.dests) === null || _a === void 0 ? void 0 : _a.get(orig)) === null || _b === void 0 ? void 0 : _b.includes(dest)));\n}\nexports.canMove = canMove;\nfunction canDrop(state, orig, dest) {\n    const piece = state.pieces.get(orig);\n    return !!piece && (orig === dest || !state.pieces.has(dest)) && (state.movable.color === 'both' || (state.movable.color === piece.color &&\n        state.turnColor === piece.color));\n}\nfunction isPremovable(state, orig) {\n    const piece = state.pieces.get(orig);\n    return !!piece && state.premovable.enabled &&\n        state.movable.color === piece.color &&\n        state.turnColor !== piece.color;\n}\nfunction canPremove(state, orig, dest) {\n    return orig !== dest &&\n        isPremovable(state, orig) &&\n        premove_1.premove(state.pieces, orig, state.premovable.castle).includes(dest);\n}\nfunction canPredrop(state, orig, dest) {\n    const piece = state.pieces.get(orig);\n    const destPiece = state.pieces.get(dest);\n    return !!piece &&\n        (!destPiece || destPiece.color !== state.movable.color) &&\n        state.predroppable.enabled &&\n        (piece.role !== 'pawn' || (dest[1] !== '1' && dest[1] !== '8')) &&\n        state.movable.color === piece.color &&\n        state.turnColor !== piece.color;\n}\nfunction isDraggable(state, orig) {\n    const piece = state.pieces.get(orig);\n    return !!piece && state.draggable.enabled && (state.movable.color === 'both' || (state.movable.color === piece.color && (state.turnColor === piece.color || state.premovable.enabled)));\n}\nexports.isDraggable = isDraggable;\nfunction playPremove(state) {\n    const move = state.premovable.current;\n    if (!move)\n        return false;\n    const orig = move[0], dest = move[1];\n    let success = false;\n    if (canMove(state, orig, dest)) {\n        const result = baseUserMove(state, orig, dest);\n        if (result) {\n            const metadata = { premove: true };\n            if (result !== true)\n                metadata.captured = result;\n            callUserFunction(state.movable.events.after, orig, dest, metadata);\n            success = true;\n        }\n    }\n    unsetPremove(state);\n    return success;\n}\nexports.playPremove = playPremove;\nfunction playPredrop(state, validate) {\n    const drop = state.predroppable.current;\n    let success = false;\n    if (!drop)\n        return false;\n    if (validate(drop)) {\n        const piece = {\n            role: drop.role,\n            color: state.movable.color\n        };\n        if (baseNewPiece(state, piece, drop.key)) {\n            callUserFunction(state.movable.events.afterNewPiece, drop.role, drop.key, {\n                predrop: true\n            });\n            success = true;\n        }\n    }\n    unsetPredrop(state);\n    return success;\n}\nexports.playPredrop = playPredrop;\nfunction cancelMove(state) {\n    unsetPremove(state);\n    unsetPredrop(state);\n    unselect(state);\n}\nexports.cancelMove = cancelMove;\nfunction stop(state) {\n    state.movable.color =\n        state.movable.dests =\n            state.animation.current = undefined;\n    cancelMove(state);\n}\nexports.stop = stop;\nfunction getKeyAtDomPos(pos, asWhite, bounds) {\n    let file = Math.floor(8 * (pos[0] - bounds.left) / bounds.width);\n    if (!asWhite)\n        file = 7 - file;\n    let rank = 7 - Math.floor(8 * (pos[1] - bounds.top) / bounds.height);\n    if (!asWhite)\n        rank = 7 - rank;\n    return (file >= 0 && file < 8 && rank >= 0 && rank < 8) ? util_1.pos2key([file, rank]) : undefined;\n}\nexports.getKeyAtDomPos = getKeyAtDomPos;\nfunction getSnappedKeyAtDomPos(orig, pos, asWhite, bounds) {\n    const origPos = util_1.key2pos(orig);\n    const validSnapPos = util_1.allPos.filter(pos2 => {\n        return premove_1.queen(origPos[0], origPos[1], pos2[0], pos2[1]) || premove_1.knight(origPos[0], origPos[1], pos2[0], pos2[1]);\n    });\n    const validSnapCenters = validSnapPos.map(pos2 => util_1.computeSquareCenter(util_1.pos2key(pos2), asWhite, bounds));\n    const validSnapDistances = validSnapCenters.map(pos2 => util_1.distanceSq(pos, pos2));\n    const [, closestSnapIndex] = validSnapDistances.reduce((a, b, index) => a[0] < b ? a : [b, index], [validSnapDistances[0], 0]);\n    return util_1.pos2key(validSnapPos[closestSnapIndex]);\n}\nexports.getSnappedKeyAtDomPos = getSnappedKeyAtDomPos;\nfunction whitePov(s) {\n    return s.orientation === 'white';\n}\nexports.whitePov = whitePov;\n//# sourceMappingURL=board.js.map","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.github.io/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.computeSquareCenter = exports.createEl = exports.isRightButton = exports.eventPosition = exports.setVisible = exports.translateRel = exports.translateAbs = exports.posToTranslateRel = exports.posToTranslateAbs = exports.samePiece = exports.distanceSq = exports.opposite = exports.timer = exports.memo = exports.allPos = exports.key2pos = exports.pos2key = exports.allKeys = exports.invRanks = void 0;\nconst cg = require(\"./types\");\nexports.invRanks = [...cg.ranks].reverse();\nexports.allKeys = Array.prototype.concat(...cg.files.map(c => cg.ranks.map(r => c + r)));\nexports.pos2key = (pos) => exports.allKeys[8 * pos[0] + pos[1]];\nexports.key2pos = (k) => [k.charCodeAt(0) - 97, k.charCodeAt(1) - 49];\nexports.allPos = exports.allKeys.map(exports.key2pos);\nfunction memo(f) {\n    let v;\n    const ret = () => {\n        if (v === undefined)\n            v = f();\n        return v;\n    };\n    ret.clear = () => { v = undefined; };\n    return ret;\n}\nexports.memo = memo;\nexports.timer = () => {\n    let startAt;\n    return {\n        start() { startAt = performance.now(); },\n        cancel() { startAt = undefined; },\n        stop() {\n            if (!startAt)\n                return 0;\n            const time = performance.now() - startAt;\n            startAt = undefined;\n            return time;\n        }\n    };\n};\nexports.opposite = (c) => c === 'white' ? 'black' : 'white';\nexports.distanceSq = (pos1, pos2) => {\n    const dx = pos1[0] - pos2[0], dy = pos1[1] - pos2[1];\n    return dx * dx + dy * dy;\n};\nexports.samePiece = (p1, p2) => p1.role === p2.role && p1.color === p2.color;\nconst posToTranslateBase = (pos, asWhite, xFactor, yFactor) => [\n    (asWhite ? pos[0] : 7 - pos[0]) * xFactor,\n    (asWhite ? 7 - pos[1] : pos[1]) * yFactor\n];\nexports.posToTranslateAbs = (bounds) => {\n    const xFactor = bounds.width / 8, yFactor = bounds.height / 8;\n    return (pos, asWhite) => posToTranslateBase(pos, asWhite, xFactor, yFactor);\n};\nexports.posToTranslateRel = (pos, asWhite) => posToTranslateBase(pos, asWhite, 100, 100);\nexports.translateAbs = (el, pos) => {\n    el.style.transform = `translate(${pos[0]}px,${pos[1]}px)`;\n};\nexports.translateRel = (el, percents) => {\n    el.style.transform = `translate(${percents[0]}%,${percents[1]}%)`;\n};\nexports.setVisible = (el, v) => {\n    el.style.visibility = v ? 'visible' : 'hidden';\n};\nexports.eventPosition = (e) => {\n    var _a;\n    if (e.clientX || e.clientX === 0)\n        return [e.clientX, e.clientY];\n    if ((_a = e.targetTouches) === null || _a === void 0 ? void 0 : _a[0])\n        return [e.targetTouches[0].clientX, e.targetTouches[0].clientY];\n    return;\n};\nexports.isRightButton = (e) => e.buttons === 2 || e.button === 2;\nexports.createEl = (tagName, className) => {\n    const el = document.createElement(tagName);\n    if (className)\n        el.className = className;\n    return el;\n};\nfunction computeSquareCenter(key, asWhite, bounds) {\n    const pos = exports.key2pos(key);\n    if (!asWhite) {\n        pos[0] = 7 - pos[0];\n        pos[1] = 7 - pos[1];\n    }\n    return [\n        bounds.left + bounds.width * pos[0] / 8 + bounds.width / 16,\n        bounds.top + bounds.height * (7 - pos[1]) / 8 + bounds.height / 16\n    ];\n}\nexports.computeSquareCenter = computeSquareCenter;\n//# sourceMappingURL=util.js.map","var bind = require('../internals/function-bind-context');\nvar IndexedObject = require('../internals/indexed-object');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\nvar push = [].push;\n\n// `Array.prototype.{ forEach, map, filter, some, every, find, findIndex, filterOut }` methods implementation\nvar createMethod = function (TYPE) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var IS_FILTER_OUT = TYPE == 7;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  return function ($this, callbackfn, that, specificCreate) {\n    var O = toObject($this);\n    var self = IndexedObject(O);\n    var boundFunction = bind(callbackfn, that, 3);\n    var length = toLength(self.length);\n    var index = 0;\n    var create = specificCreate || arraySpeciesCreate;\n    var target = IS_MAP ? create($this, length) : IS_FILTER || IS_FILTER_OUT ? create($this, 0) : undefined;\n    var value, result;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      value = self[index];\n      result = boundFunction(value, index, O);\n      if (TYPE) {\n        if (IS_MAP) target[index] = result; // map\n        else if (result) switch (TYPE) {\n          case 3: return true;              // some\n          case 5: return value;             // find\n          case 6: return index;             // findIndex\n          case 2: push.call(target, value); // filter\n        } else switch (TYPE) {\n          case 4: return false;             // every\n          case 7: push.call(target, value); // filterOut\n        }\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.forEach` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.foreach\n  forEach: createMethod(0),\n  // `Array.prototype.map` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.map\n  map: createMethod(1),\n  // `Array.prototype.filter` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.filter\n  filter: createMethod(2),\n  // `Array.prototype.some` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.some\n  some: createMethod(3),\n  // `Array.prototype.every` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.every\n  every: createMethod(4),\n  // `Array.prototype.find` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.find\n  find: createMethod(5),\n  // `Array.prototype.findIndex` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.findIndex\n  findIndex: createMethod(6),\n  // `Array.prototype.filterOut` method\n  // https://github.com/tc39/proposal-array-filtering\n  filterOut: createMethod(7)\n};\n","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  return Object.isExtensible(Object.preventExtensions({}));\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.write = exports.read = exports.initial = void 0;\nconst util_1 = require(\"./util\");\nconst cg = require(\"./types\");\nexports.initial = 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR';\nconst roles = { p: 'pawn', r: 'rook', n: 'knight', b: 'bishop', q: 'queen', k: 'king' };\nconst letters = { pawn: 'p', rook: 'r', knight: 'n', bishop: 'b', queen: 'q', king: 'k' };\nfunction read(fen) {\n    if (fen === 'start')\n        fen = exports.initial;\n    const pieces = new Map();\n    let row = 7, col = 0;\n    for (const c of fen) {\n        switch (c) {\n            case ' ': return pieces;\n            case '/':\n                --row;\n                if (row < 0)\n                    return pieces;\n                col = 0;\n                break;\n            case '~':\n                const piece = pieces.get(util_1.pos2key([col, row]));\n                if (piece)\n                    piece.promoted = true;\n                break;\n            default:\n                const nb = c.charCodeAt(0);\n                if (nb < 57)\n                    col += nb - 48;\n                else {\n                    const role = c.toLowerCase();\n                    pieces.set(util_1.pos2key([col, row]), {\n                        role: roles[role],\n                        color: c === role ? 'black' : 'white',\n                    });\n                    ++col;\n                }\n        }\n    }\n    return pieces;\n}\nexports.read = read;\nfunction write(pieces) {\n    return util_1.invRanks.map(y => cg.files.map(x => {\n        const piece = pieces.get(x + y);\n        if (piece) {\n            const letter = letters[piece.role];\n            return piece.color === 'white' ? letter.toUpperCase() : letter;\n        }\n        else\n            return '1';\n    }).join('')).join('/').replace(/1{2,}/g, s => s.length.toString());\n}\nexports.write = write;\n//# sourceMappingURL=fen.js.map","/*\n * Copyright (c) 2020, Jeff Hlywa (jhlywa@gmail.com)\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *----------------------------------------------------------------------------*/\n\nvar Chess = function(fen) {\n  var BLACK = 'b'\n  var WHITE = 'w'\n\n  var EMPTY = -1\n\n  var PAWN = 'p'\n  var KNIGHT = 'n'\n  var BISHOP = 'b'\n  var ROOK = 'r'\n  var QUEEN = 'q'\n  var KING = 'k'\n\n  var SYMBOLS = 'pnbrqkPNBRQK'\n\n  var DEFAULT_POSITION =\n    'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1'\n\n  var POSSIBLE_RESULTS = ['1-0', '0-1', '1/2-1/2', '*']\n\n  var PAWN_OFFSETS = {\n    b: [16, 32, 17, 15],\n    w: [-16, -32, -17, -15]\n  }\n\n  var PIECE_OFFSETS = {\n    n: [-18, -33, -31, -14, 18, 33, 31, 14],\n    b: [-17, -15, 17, 15],\n    r: [-16, 1, 16, -1],\n    q: [-17, -16, -15, 1, 17, 16, 15, -1],\n    k: [-17, -16, -15, 1, 17, 16, 15, -1]\n  }\n\n  // prettier-ignore\n  var ATTACKS = [\n    20, 0, 0, 0, 0, 0, 0, 24,  0, 0, 0, 0, 0, 0,20, 0,\n     0,20, 0, 0, 0, 0, 0, 24,  0, 0, 0, 0, 0,20, 0, 0,\n     0, 0,20, 0, 0, 0, 0, 24,  0, 0, 0, 0,20, 0, 0, 0,\n     0, 0, 0,20, 0, 0, 0, 24,  0, 0, 0,20, 0, 0, 0, 0,\n     0, 0, 0, 0,20, 0, 0, 24,  0, 0,20, 0, 0, 0, 0, 0,\n     0, 0, 0, 0, 0,20, 2, 24,  2,20, 0, 0, 0, 0, 0, 0,\n     0, 0, 0, 0, 0, 2,53, 56, 53, 2, 0, 0, 0, 0, 0, 0,\n    24,24,24,24,24,24,56,  0, 56,24,24,24,24,24,24, 0,\n     0, 0, 0, 0, 0, 2,53, 56, 53, 2, 0, 0, 0, 0, 0, 0,\n     0, 0, 0, 0, 0,20, 2, 24,  2,20, 0, 0, 0, 0, 0, 0,\n     0, 0, 0, 0,20, 0, 0, 24,  0, 0,20, 0, 0, 0, 0, 0,\n     0, 0, 0,20, 0, 0, 0, 24,  0, 0, 0,20, 0, 0, 0, 0,\n     0, 0,20, 0, 0, 0, 0, 24,  0, 0, 0, 0,20, 0, 0, 0,\n     0,20, 0, 0, 0, 0, 0, 24,  0, 0, 0, 0, 0,20, 0, 0,\n    20, 0, 0, 0, 0, 0, 0, 24,  0, 0, 0, 0, 0, 0,20\n  ];\n\n  // prettier-ignore\n  var RAYS = [\n     17,  0,  0,  0,  0,  0,  0, 16,  0,  0,  0,  0,  0,  0, 15, 0,\n      0, 17,  0,  0,  0,  0,  0, 16,  0,  0,  0,  0,  0, 15,  0, 0,\n      0,  0, 17,  0,  0,  0,  0, 16,  0,  0,  0,  0, 15,  0,  0, 0,\n      0,  0,  0, 17,  0,  0,  0, 16,  0,  0,  0, 15,  0,  0,  0, 0,\n      0,  0,  0,  0, 17,  0,  0, 16,  0,  0, 15,  0,  0,  0,  0, 0,\n      0,  0,  0,  0,  0, 17,  0, 16,  0, 15,  0,  0,  0,  0,  0, 0,\n      0,  0,  0,  0,  0,  0, 17, 16, 15,  0,  0,  0,  0,  0,  0, 0,\n      1,  1,  1,  1,  1,  1,  1,  0, -1, -1,  -1,-1, -1, -1, -1, 0,\n      0,  0,  0,  0,  0,  0,-15,-16,-17,  0,  0,  0,  0,  0,  0, 0,\n      0,  0,  0,  0,  0,-15,  0,-16,  0,-17,  0,  0,  0,  0,  0, 0,\n      0,  0,  0,  0,-15,  0,  0,-16,  0,  0,-17,  0,  0,  0,  0, 0,\n      0,  0,  0,-15,  0,  0,  0,-16,  0,  0,  0,-17,  0,  0,  0, 0,\n      0,  0,-15,  0,  0,  0,  0,-16,  0,  0,  0,  0,-17,  0,  0, 0,\n      0,-15,  0,  0,  0,  0,  0,-16,  0,  0,  0,  0,  0,-17,  0, 0,\n    -15,  0,  0,  0,  0,  0,  0,-16,  0,  0,  0,  0,  0,  0,-17\n  ];\n\n  var SHIFTS = { p: 0, n: 1, b: 2, r: 3, q: 4, k: 5 }\n\n  var FLAGS = {\n    NORMAL: 'n',\n    CAPTURE: 'c',\n    BIG_PAWN: 'b',\n    EP_CAPTURE: 'e',\n    PROMOTION: 'p',\n    KSIDE_CASTLE: 'k',\n    QSIDE_CASTLE: 'q'\n  }\n\n  var BITS = {\n    NORMAL: 1,\n    CAPTURE: 2,\n    BIG_PAWN: 4,\n    EP_CAPTURE: 8,\n    PROMOTION: 16,\n    KSIDE_CASTLE: 32,\n    QSIDE_CASTLE: 64\n  }\n\n  var RANK_1 = 7\n  var RANK_2 = 6\n  var RANK_3 = 5\n  var RANK_4 = 4\n  var RANK_5 = 3\n  var RANK_6 = 2\n  var RANK_7 = 1\n  var RANK_8 = 0\n\n  // prettier-ignore\n  var SQUARES = {\n    a8:   0, b8:   1, c8:   2, d8:   3, e8:   4, f8:   5, g8:   6, h8:   7,\n    a7:  16, b7:  17, c7:  18, d7:  19, e7:  20, f7:  21, g7:  22, h7:  23,\n    a6:  32, b6:  33, c6:  34, d6:  35, e6:  36, f6:  37, g6:  38, h6:  39,\n    a5:  48, b5:  49, c5:  50, d5:  51, e5:  52, f5:  53, g5:  54, h5:  55,\n    a4:  64, b4:  65, c4:  66, d4:  67, e4:  68, f4:  69, g4:  70, h4:  71,\n    a3:  80, b3:  81, c3:  82, d3:  83, e3:  84, f3:  85, g3:  86, h3:  87,\n    a2:  96, b2:  97, c2:  98, d2:  99, e2: 100, f2: 101, g2: 102, h2: 103,\n    a1: 112, b1: 113, c1: 114, d1: 115, e1: 116, f1: 117, g1: 118, h1: 119\n  };\n\n  var ROOKS = {\n    w: [\n      { square: SQUARES.a1, flag: BITS.QSIDE_CASTLE },\n      { square: SQUARES.h1, flag: BITS.KSIDE_CASTLE }\n    ],\n    b: [\n      { square: SQUARES.a8, flag: BITS.QSIDE_CASTLE },\n      { square: SQUARES.h8, flag: BITS.KSIDE_CASTLE }\n    ]\n  }\n\n  var board = new Array(128)\n  var kings = { w: EMPTY, b: EMPTY }\n  var turn = WHITE\n  var castling = { w: 0, b: 0 }\n  var ep_square = EMPTY\n  var half_moves = 0\n  var move_number = 1\n  var history = []\n  var header = {}\n  var comments = {}\n\n  /* if the user passes in a fen string, load it, else default to\n   * starting position\n   */\n  if (typeof fen === 'undefined') {\n    load(DEFAULT_POSITION)\n  } else {\n    load(fen)\n  }\n\n  function clear(keep_headers) {\n    if (typeof keep_headers === 'undefined') {\n      keep_headers = false\n    }\n\n    board = new Array(128)\n    kings = { w: EMPTY, b: EMPTY }\n    turn = WHITE\n    castling = { w: 0, b: 0 }\n    ep_square = EMPTY\n    half_moves = 0\n    move_number = 1\n    history = []\n    if (!keep_headers) header = {}\n    comments = {}\n    update_setup(generate_fen())\n  }\n\n  function prune_comments() {\n    var reversed_history = [];\n    var current_comments = {};\n    var copy_comment = function(fen) {\n      if (fen in comments) {\n        current_comments[fen] = comments[fen];\n      }\n    };\n    while (history.length > 0) {\n      reversed_history.push(undo_move());\n    }\n    copy_comment(generate_fen());\n    while (reversed_history.length > 0) {\n      make_move(reversed_history.pop());\n      copy_comment(generate_fen());\n    }\n    comments = current_comments;\n  }\n\n  function reset() {\n    load(DEFAULT_POSITION)\n  }\n\n  function load(fen, keep_headers) {\n    if (typeof keep_headers === 'undefined') {\n      keep_headers = false\n    }\n\n    var tokens = fen.split(/\\s+/)\n    var position = tokens[0]\n    var square = 0\n\n    if (!validate_fen(fen).valid) {\n      return false\n    }\n\n    clear(keep_headers)\n\n    for (var i = 0; i < position.length; i++) {\n      var piece = position.charAt(i)\n\n      if (piece === '/') {\n        square += 8\n      } else if (is_digit(piece)) {\n        square += parseInt(piece, 10)\n      } else {\n        var color = piece < 'a' ? WHITE : BLACK\n        put({ type: piece.toLowerCase(), color: color }, algebraic(square))\n        square++\n      }\n    }\n\n    turn = tokens[1]\n\n    if (tokens[2].indexOf('K') > -1) {\n      castling.w |= BITS.KSIDE_CASTLE\n    }\n    if (tokens[2].indexOf('Q') > -1) {\n      castling.w |= BITS.QSIDE_CASTLE\n    }\n    if (tokens[2].indexOf('k') > -1) {\n      castling.b |= BITS.KSIDE_CASTLE\n    }\n    if (tokens[2].indexOf('q') > -1) {\n      castling.b |= BITS.QSIDE_CASTLE\n    }\n\n    ep_square = tokens[3] === '-' ? EMPTY : SQUARES[tokens[3]]\n    half_moves = parseInt(tokens[4], 10)\n    move_number = parseInt(tokens[5], 10)\n\n    update_setup(generate_fen())\n\n    return true\n  }\n\n  /* TODO: this function is pretty much crap - it validates structure but\n   * completely ignores content (e.g. doesn't verify that each side has a king)\n   * ... we should rewrite this, and ditch the silly error_number field while\n   * we're at it\n   */\n  function validate_fen(fen) {\n    var errors = {\n      0: 'No errors.',\n      1: 'FEN string must contain six space-delimited fields.',\n      2: '6th field (move number) must be a positive integer.',\n      3: '5th field (half move counter) must be a non-negative integer.',\n      4: '4th field (en-passant square) is invalid.',\n      5: '3rd field (castling availability) is invalid.',\n      6: '2nd field (side to move) is invalid.',\n      7: \"1st field (piece positions) does not contain 8 '/'-delimited rows.\",\n      8: '1st field (piece positions) is invalid [consecutive numbers].',\n      9: '1st field (piece positions) is invalid [invalid piece].',\n      10: '1st field (piece positions) is invalid [row too large].',\n      11: 'Illegal en-passant square'\n    }\n\n    /* 1st criterion: 6 space-seperated fields? */\n    var tokens = fen.split(/\\s+/)\n    if (tokens.length !== 6) {\n      return { valid: false, error_number: 1, error: errors[1] }\n    }\n\n    /* 2nd criterion: move number field is a integer value > 0? */\n    if (isNaN(tokens[5]) || parseInt(tokens[5], 10) <= 0) {\n      return { valid: false, error_number: 2, error: errors[2] }\n    }\n\n    /* 3rd criterion: half move counter is an integer >= 0? */\n    if (isNaN(tokens[4]) || parseInt(tokens[4], 10) < 0) {\n      return { valid: false, error_number: 3, error: errors[3] }\n    }\n\n    /* 4th criterion: 4th field is a valid e.p.-string? */\n    if (!/^(-|[abcdefgh][36])$/.test(tokens[3])) {\n      return { valid: false, error_number: 4, error: errors[4] }\n    }\n\n    /* 5th criterion: 3th field is a valid castle-string? */\n    if (!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(tokens[2])) {\n      return { valid: false, error_number: 5, error: errors[5] }\n    }\n\n    /* 6th criterion: 2nd field is \"w\" (white) or \"b\" (black)? */\n    if (!/^(w|b)$/.test(tokens[1])) {\n      return { valid: false, error_number: 6, error: errors[6] }\n    }\n\n    /* 7th criterion: 1st field contains 8 rows? */\n    var rows = tokens[0].split('/')\n    if (rows.length !== 8) {\n      return { valid: false, error_number: 7, error: errors[7] }\n    }\n\n    /* 8th criterion: every row is valid? */\n    for (var i = 0; i < rows.length; i++) {\n      /* check for right sum of fields AND not two numbers in succession */\n      var sum_fields = 0\n      var previous_was_number = false\n\n      for (var k = 0; k < rows[i].length; k++) {\n        if (!isNaN(rows[i][k])) {\n          if (previous_was_number) {\n            return { valid: false, error_number: 8, error: errors[8] }\n          }\n          sum_fields += parseInt(rows[i][k], 10)\n          previous_was_number = true\n        } else {\n          if (!/^[prnbqkPRNBQK]$/.test(rows[i][k])) {\n            return { valid: false, error_number: 9, error: errors[9] }\n          }\n          sum_fields += 1\n          previous_was_number = false\n        }\n      }\n      if (sum_fields !== 8) {\n        return { valid: false, error_number: 10, error: errors[10] }\n      }\n    }\n\n    if (\n      (tokens[3][1] == '3' && tokens[1] == 'w') ||\n      (tokens[3][1] == '6' && tokens[1] == 'b')\n    ) {\n      return { valid: false, error_number: 11, error: errors[11] }\n    }\n\n    /* everything's okay! */\n    return { valid: true, error_number: 0, error: errors[0] }\n  }\n\n  function generate_fen() {\n    var empty = 0\n    var fen = ''\n\n    for (var i = SQUARES.a8; i <= SQUARES.h1; i++) {\n      if (board[i] == null) {\n        empty++\n      } else {\n        if (empty > 0) {\n          fen += empty\n          empty = 0\n        }\n        var color = board[i].color\n        var piece = board[i].type\n\n        fen += color === WHITE ? piece.toUpperCase() : piece.toLowerCase()\n      }\n\n      if ((i + 1) & 0x88) {\n        if (empty > 0) {\n          fen += empty\n        }\n\n        if (i !== SQUARES.h1) {\n          fen += '/'\n        }\n\n        empty = 0\n        i += 8\n      }\n    }\n\n    var cflags = ''\n    if (castling[WHITE] & BITS.KSIDE_CASTLE) {\n      cflags += 'K'\n    }\n    if (castling[WHITE] & BITS.QSIDE_CASTLE) {\n      cflags += 'Q'\n    }\n    if (castling[BLACK] & BITS.KSIDE_CASTLE) {\n      cflags += 'k'\n    }\n    if (castling[BLACK] & BITS.QSIDE_CASTLE) {\n      cflags += 'q'\n    }\n\n    /* do we have an empty castling flag? */\n    cflags = cflags || '-'\n    var epflags = ep_square === EMPTY ? '-' : algebraic(ep_square)\n\n    return [fen, turn, cflags, epflags, half_moves, move_number].join(' ')\n  }\n\n  function set_header(args) {\n    for (var i = 0; i < args.length; i += 2) {\n      if (typeof args[i] === 'string' && typeof args[i + 1] === 'string') {\n        header[args[i]] = args[i + 1]\n      }\n    }\n    return header\n  }\n\n  /* called when the initial board setup is changed with put() or remove().\n   * modifies the SetUp and FEN properties of the header object.  if the FEN is\n   * equal to the default position, the SetUp and FEN are deleted\n   * the setup is only updated if history.length is zero, ie moves haven't been\n   * made.\n   */\n  function update_setup(fen) {\n    if (history.length > 0) return\n\n    if (fen !== DEFAULT_POSITION) {\n      header['SetUp'] = '1'\n      header['FEN'] = fen\n    } else {\n      delete header['SetUp']\n      delete header['FEN']\n    }\n  }\n\n  function get(square) {\n    var piece = board[SQUARES[square]]\n    return piece ? { type: piece.type, color: piece.color } : null\n  }\n\n  function put(piece, square) {\n    /* check for valid piece object */\n    if (!('type' in piece && 'color' in piece)) {\n      return false\n    }\n\n    /* check for piece */\n    if (SYMBOLS.indexOf(piece.type.toLowerCase()) === -1) {\n      return false\n    }\n\n    /* check for valid square */\n    if (!(square in SQUARES)) {\n      return false\n    }\n\n    var sq = SQUARES[square]\n\n    /* don't let the user place more than one king */\n    if (\n      piece.type == KING &&\n      !(kings[piece.color] == EMPTY || kings[piece.color] == sq)\n    ) {\n      return false\n    }\n\n    board[sq] = { type: piece.type, color: piece.color }\n    if (piece.type === KING) {\n      kings[piece.color] = sq\n    }\n\n    update_setup(generate_fen())\n\n    return true\n  }\n\n  function remove(square) {\n    var piece = get(square)\n    board[SQUARES[square]] = null\n    if (piece && piece.type === KING) {\n      kings[piece.color] = EMPTY\n    }\n\n    update_setup(generate_fen())\n\n    return piece\n  }\n\n  function build_move(board, from, to, flags, promotion) {\n    var move = {\n      color: turn,\n      from: from,\n      to: to,\n      flags: flags,\n      piece: board[from].type\n    }\n\n    if (promotion) {\n      move.flags |= BITS.PROMOTION\n      move.promotion = promotion\n    }\n\n    if (board[to]) {\n      move.captured = board[to].type\n    } else if (flags & BITS.EP_CAPTURE) {\n      move.captured = PAWN\n    }\n    return move\n  }\n\n  function generate_moves(options) {\n    function add_move(board, moves, from, to, flags) {\n      /* if pawn promotion */\n      if (\n        board[from].type === PAWN &&\n        (rank(to) === RANK_8 || rank(to) === RANK_1)\n      ) {\n        var pieces = [QUEEN, ROOK, BISHOP, KNIGHT]\n        for (var i = 0, len = pieces.length; i < len; i++) {\n          moves.push(build_move(board, from, to, flags, pieces[i]))\n        }\n      } else {\n        moves.push(build_move(board, from, to, flags))\n      }\n    }\n\n    var moves = []\n    var us = turn\n    var them = swap_color(us)\n    var second_rank = { b: RANK_7, w: RANK_2 }\n\n    var first_sq = SQUARES.a8\n    var last_sq = SQUARES.h1\n    var single_square = false\n\n    /* do we want legal moves? */\n    var legal =\n      typeof options !== 'undefined' && 'legal' in options\n        ? options.legal\n        : true\n\n    /* are we generating moves for a single square? */\n    if (typeof options !== 'undefined' && 'square' in options) {\n      if (options.square in SQUARES) {\n        first_sq = last_sq = SQUARES[options.square]\n        single_square = true\n      } else {\n        /* invalid square */\n        return []\n      }\n    }\n\n    for (var i = first_sq; i <= last_sq; i++) {\n      /* did we run off the end of the board */\n      if (i & 0x88) {\n        i += 7\n        continue\n      }\n\n      var piece = board[i]\n      if (piece == null || piece.color !== us) {\n        continue\n      }\n\n      if (piece.type === PAWN) {\n        /* single square, non-capturing */\n        var square = i + PAWN_OFFSETS[us][0]\n        if (board[square] == null) {\n          add_move(board, moves, i, square, BITS.NORMAL)\n\n          /* double square */\n          var square = i + PAWN_OFFSETS[us][1]\n          if (second_rank[us] === rank(i) && board[square] == null) {\n            add_move(board, moves, i, square, BITS.BIG_PAWN)\n          }\n        }\n\n        /* pawn captures */\n        for (j = 2; j < 4; j++) {\n          var square = i + PAWN_OFFSETS[us][j]\n          if (square & 0x88) continue\n\n          if (board[square] != null && board[square].color === them) {\n            add_move(board, moves, i, square, BITS.CAPTURE)\n          } else if (square === ep_square) {\n            add_move(board, moves, i, ep_square, BITS.EP_CAPTURE)\n          }\n        }\n      } else {\n        for (var j = 0, len = PIECE_OFFSETS[piece.type].length; j < len; j++) {\n          var offset = PIECE_OFFSETS[piece.type][j]\n          var square = i\n\n          while (true) {\n            square += offset\n            if (square & 0x88) break\n\n            if (board[square] == null) {\n              add_move(board, moves, i, square, BITS.NORMAL)\n            } else {\n              if (board[square].color === us) break\n              add_move(board, moves, i, square, BITS.CAPTURE)\n              break\n            }\n\n            /* break, if knight or king */\n            if (piece.type === 'n' || piece.type === 'k') break\n          }\n        }\n      }\n    }\n\n    /* check for castling if: a) we're generating all moves, or b) we're doing\n     * single square move generation on the king's square\n     */\n    if (!single_square || last_sq === kings[us]) {\n      /* king-side castling */\n      if (castling[us] & BITS.KSIDE_CASTLE) {\n        var castling_from = kings[us]\n        var castling_to = castling_from + 2\n\n        if (\n          board[castling_from + 1] == null &&\n          board[castling_to] == null &&\n          !attacked(them, kings[us]) &&\n          !attacked(them, castling_from + 1) &&\n          !attacked(them, castling_to)\n        ) {\n          add_move(board, moves, kings[us], castling_to, BITS.KSIDE_CASTLE)\n        }\n      }\n\n      /* queen-side castling */\n      if (castling[us] & BITS.QSIDE_CASTLE) {\n        var castling_from = kings[us]\n        var castling_to = castling_from - 2\n\n        if (\n          board[castling_from - 1] == null &&\n          board[castling_from - 2] == null &&\n          board[castling_from - 3] == null &&\n          !attacked(them, kings[us]) &&\n          !attacked(them, castling_from - 1) &&\n          !attacked(them, castling_to)\n        ) {\n          add_move(board, moves, kings[us], castling_to, BITS.QSIDE_CASTLE)\n        }\n      }\n    }\n\n    /* return all pseudo-legal moves (this includes moves that allow the king\n     * to be captured)\n     */\n    if (!legal) {\n      return moves\n    }\n\n    /* filter out illegal moves */\n    var legal_moves = []\n    for (var i = 0, len = moves.length; i < len; i++) {\n      make_move(moves[i])\n      if (!king_attacked(us)) {\n        legal_moves.push(moves[i])\n      }\n      undo_move()\n    }\n\n    return legal_moves\n  }\n\n  /* convert a move from 0x88 coordinates to Standard Algebraic Notation\n   * (SAN)\n   *\n   * @param {boolean} sloppy Use the sloppy SAN generator to work around over\n   * disambiguation bugs in Fritz and Chessbase.  See below:\n   *\n   * r1bqkbnr/ppp2ppp/2n5/1B1pP3/4P3/8/PPPP2PP/RNBQK1NR b KQkq - 2 4\n   * 4. ... Nge7 is overly disambiguated because the knight on c6 is pinned\n   * 4. ... Ne7 is technically the valid SAN\n   */\n  function move_to_san(move, sloppy) {\n    var output = ''\n\n    if (move.flags & BITS.KSIDE_CASTLE) {\n      output = 'O-O'\n    } else if (move.flags & BITS.QSIDE_CASTLE) {\n      output = 'O-O-O'\n    } else {\n      var disambiguator = get_disambiguator(move, sloppy)\n\n      if (move.piece !== PAWN) {\n        output += move.piece.toUpperCase() + disambiguator\n      }\n\n      if (move.flags & (BITS.CAPTURE | BITS.EP_CAPTURE)) {\n        if (move.piece === PAWN) {\n          output += algebraic(move.from)[0]\n        }\n        output += 'x'\n      }\n\n      output += algebraic(move.to)\n\n      if (move.flags & BITS.PROMOTION) {\n        output += '=' + move.promotion.toUpperCase()\n      }\n    }\n\n    make_move(move)\n    if (in_check()) {\n      if (in_checkmate()) {\n        output += '#'\n      } else {\n        output += '+'\n      }\n    }\n    undo_move()\n\n    return output\n  }\n\n  // parses all of the decorators out of a SAN string\n  function stripped_san(move) {\n    return move.replace(/=/, '').replace(/[+#]?[?!]*$/, '')\n  }\n\n  function attacked(color, square) {\n    for (var i = SQUARES.a8; i <= SQUARES.h1; i++) {\n      /* did we run off the end of the board */\n      if (i & 0x88) {\n        i += 7\n        continue\n      }\n\n      /* if empty square or wrong color */\n      if (board[i] == null || board[i].color !== color) continue\n\n      var piece = board[i]\n      var difference = i - square\n      var index = difference + 119\n\n      if (ATTACKS[index] & (1 << SHIFTS[piece.type])) {\n        if (piece.type === PAWN) {\n          if (difference > 0) {\n            if (piece.color === WHITE) return true\n          } else {\n            if (piece.color === BLACK) return true\n          }\n          continue\n        }\n\n        /* if the piece is a knight or a king */\n        if (piece.type === 'n' || piece.type === 'k') return true\n\n        var offset = RAYS[index]\n        var j = i + offset\n\n        var blocked = false\n        while (j !== square) {\n          if (board[j] != null) {\n            blocked = true\n            break\n          }\n          j += offset\n        }\n\n        if (!blocked) return true\n      }\n    }\n\n    return false\n  }\n\n  function king_attacked(color) {\n    return attacked(swap_color(color), kings[color])\n  }\n\n  function in_check() {\n    return king_attacked(turn)\n  }\n\n  function in_checkmate() {\n    return in_check() && generate_moves().length === 0\n  }\n\n  function in_stalemate() {\n    return !in_check() && generate_moves().length === 0\n  }\n\n  function insufficient_material() {\n    var pieces = {}\n    var bishops = []\n    var num_pieces = 0\n    var sq_color = 0\n\n    for (var i = SQUARES.a8; i <= SQUARES.h1; i++) {\n      sq_color = (sq_color + 1) % 2\n      if (i & 0x88) {\n        i += 7\n        continue\n      }\n\n      var piece = board[i]\n      if (piece) {\n        pieces[piece.type] = piece.type in pieces ? pieces[piece.type] + 1 : 1\n        if (piece.type === BISHOP) {\n          bishops.push(sq_color)\n        }\n        num_pieces++\n      }\n    }\n\n    /* k vs. k */\n    if (num_pieces === 2) {\n      return true\n    } else if (\n      /* k vs. kn .... or .... k vs. kb */\n      num_pieces === 3 &&\n      (pieces[BISHOP] === 1 || pieces[KNIGHT] === 1)\n    ) {\n      return true\n    } else if (num_pieces === pieces[BISHOP] + 2) {\n      /* kb vs. kb where any number of bishops are all on the same color */\n      var sum = 0\n      var len = bishops.length\n      for (var i = 0; i < len; i++) {\n        sum += bishops[i]\n      }\n      if (sum === 0 || sum === len) {\n        return true\n      }\n    }\n\n    return false\n  }\n\n  function in_threefold_repetition() {\n    /* TODO: while this function is fine for casual use, a better\n     * implementation would use a Zobrist key (instead of FEN). the\n     * Zobrist key would be maintained in the make_move/undo_move functions,\n     * avoiding the costly that we do below.\n     */\n    var moves = []\n    var positions = {}\n    var repetition = false\n\n    while (true) {\n      var move = undo_move()\n      if (!move) break\n      moves.push(move)\n    }\n\n    while (true) {\n      /* remove the last two fields in the FEN string, they're not needed\n       * when checking for draw by rep */\n      var fen = generate_fen()\n        .split(' ')\n        .slice(0, 4)\n        .join(' ')\n\n      /* has the position occurred three or move times */\n      positions[fen] = fen in positions ? positions[fen] + 1 : 1\n      if (positions[fen] >= 3) {\n        repetition = true\n      }\n\n      if (!moves.length) {\n        break\n      }\n      make_move(moves.pop())\n    }\n\n    return repetition\n  }\n\n  function push(move) {\n    history.push({\n      move: move,\n      kings: { b: kings.b, w: kings.w },\n      turn: turn,\n      castling: { b: castling.b, w: castling.w },\n      ep_square: ep_square,\n      half_moves: half_moves,\n      move_number: move_number\n    })\n  }\n\n  function make_move(move) {\n    var us = turn\n    var them = swap_color(us)\n    push(move)\n\n    board[move.to] = board[move.from]\n    board[move.from] = null\n\n    /* if ep capture, remove the captured pawn */\n    if (move.flags & BITS.EP_CAPTURE) {\n      if (turn === BLACK) {\n        board[move.to - 16] = null\n      } else {\n        board[move.to + 16] = null\n      }\n    }\n\n    /* if pawn promotion, replace with new piece */\n    if (move.flags & BITS.PROMOTION) {\n      board[move.to] = { type: move.promotion, color: us }\n    }\n\n    /* if we moved the king */\n    if (board[move.to].type === KING) {\n      kings[board[move.to].color] = move.to\n\n      /* if we castled, move the rook next to the king */\n      if (move.flags & BITS.KSIDE_CASTLE) {\n        var castling_to = move.to - 1\n        var castling_from = move.to + 1\n        board[castling_to] = board[castling_from]\n        board[castling_from] = null\n      } else if (move.flags & BITS.QSIDE_CASTLE) {\n        var castling_to = move.to + 1\n        var castling_from = move.to - 2\n        board[castling_to] = board[castling_from]\n        board[castling_from] = null\n      }\n\n      /* turn off castling */\n      castling[us] = ''\n    }\n\n    /* turn off castling if we move a rook */\n    if (castling[us]) {\n      for (var i = 0, len = ROOKS[us].length; i < len; i++) {\n        if (\n          move.from === ROOKS[us][i].square &&\n          castling[us] & ROOKS[us][i].flag\n        ) {\n          castling[us] ^= ROOKS[us][i].flag\n          break\n        }\n      }\n    }\n\n    /* turn off castling if we capture a rook */\n    if (castling[them]) {\n      for (var i = 0, len = ROOKS[them].length; i < len; i++) {\n        if (\n          move.to === ROOKS[them][i].square &&\n          castling[them] & ROOKS[them][i].flag\n        ) {\n          castling[them] ^= ROOKS[them][i].flag\n          break\n        }\n      }\n    }\n\n    /* if big pawn move, update the en passant square */\n    if (move.flags & BITS.BIG_PAWN) {\n      if (turn === 'b') {\n        ep_square = move.to - 16\n      } else {\n        ep_square = move.to + 16\n      }\n    } else {\n      ep_square = EMPTY\n    }\n\n    /* reset the 50 move counter if a pawn is moved or a piece is captured */\n    if (move.piece === PAWN) {\n      half_moves = 0\n    } else if (move.flags & (BITS.CAPTURE | BITS.EP_CAPTURE)) {\n      half_moves = 0\n    } else {\n      half_moves++\n    }\n\n    if (turn === BLACK) {\n      move_number++\n    }\n    turn = swap_color(turn)\n  }\n\n  function undo_move() {\n    var old = history.pop()\n    if (old == null) {\n      return null\n    }\n\n    var move = old.move\n    kings = old.kings\n    turn = old.turn\n    castling = old.castling\n    ep_square = old.ep_square\n    half_moves = old.half_moves\n    move_number = old.move_number\n\n    var us = turn\n    var them = swap_color(turn)\n\n    board[move.from] = board[move.to]\n    board[move.from].type = move.piece // to undo any promotions\n    board[move.to] = null\n\n    if (move.flags & BITS.CAPTURE) {\n      board[move.to] = { type: move.captured, color: them }\n    } else if (move.flags & BITS.EP_CAPTURE) {\n      var index\n      if (us === BLACK) {\n        index = move.to - 16\n      } else {\n        index = move.to + 16\n      }\n      board[index] = { type: PAWN, color: them }\n    }\n\n    if (move.flags & (BITS.KSIDE_CASTLE | BITS.QSIDE_CASTLE)) {\n      var castling_to, castling_from\n      if (move.flags & BITS.KSIDE_CASTLE) {\n        castling_to = move.to + 1\n        castling_from = move.to - 1\n      } else if (move.flags & BITS.QSIDE_CASTLE) {\n        castling_to = move.to - 2\n        castling_from = move.to + 1\n      }\n\n      board[castling_to] = board[castling_from]\n      board[castling_from] = null\n    }\n\n    return move\n  }\n\n  /* this function is used to uniquely identify ambiguous moves */\n  function get_disambiguator(move, sloppy) {\n    var moves = generate_moves({ legal: !sloppy })\n\n    var from = move.from\n    var to = move.to\n    var piece = move.piece\n\n    var ambiguities = 0\n    var same_rank = 0\n    var same_file = 0\n\n    for (var i = 0, len = moves.length; i < len; i++) {\n      var ambig_from = moves[i].from\n      var ambig_to = moves[i].to\n      var ambig_piece = moves[i].piece\n\n      /* if a move of the same piece type ends on the same to square, we'll\n       * need to add a disambiguator to the algebraic notation\n       */\n      if (piece === ambig_piece && from !== ambig_from && to === ambig_to) {\n        ambiguities++\n\n        if (rank(from) === rank(ambig_from)) {\n          same_rank++\n        }\n\n        if (file(from) === file(ambig_from)) {\n          same_file++\n        }\n      }\n    }\n\n    if (ambiguities > 0) {\n      /* if there exists a similar moving piece on the same rank and file as\n       * the move in question, use the square as the disambiguator\n       */\n      if (same_rank > 0 && same_file > 0) {\n        return algebraic(from)\n      } else if (same_file > 0) {\n        /* if the moving piece rests on the same file, use the rank symbol as the\n         * disambiguator\n         */\n        return algebraic(from).charAt(1)\n      } else {\n        /* else use the file symbol */\n        return algebraic(from).charAt(0)\n      }\n    }\n\n    return ''\n  }\n\n  function ascii() {\n    var s = '   +------------------------+\\n'\n    for (var i = SQUARES.a8; i <= SQUARES.h1; i++) {\n      /* display the rank */\n      if (file(i) === 0) {\n        s += ' ' + '87654321'[rank(i)] + ' |'\n      }\n\n      /* empty piece */\n      if (board[i] == null) {\n        s += ' . '\n      } else {\n        var piece = board[i].type\n        var color = board[i].color\n        var symbol = color === WHITE ? piece.toUpperCase() : piece.toLowerCase()\n        s += ' ' + symbol + ' '\n      }\n\n      if ((i + 1) & 0x88) {\n        s += '|\\n'\n        i += 8\n      }\n    }\n    s += '   +------------------------+\\n'\n    s += '     a  b  c  d  e  f  g  h\\n'\n\n    return s\n  }\n\n  // convert a move from Standard Algebraic Notation (SAN) to 0x88 coordinates\n  function move_from_san(move, sloppy) {\n    // strip off any move decorations: e.g Nf3+?!\n    var clean_move = stripped_san(move)\n\n    // if we're using the sloppy parser run a regex to grab piece, to, and from\n    // this should parse invalid SAN like: Pe2-e4, Rc1c4, Qf3xf7\n    if (sloppy) {\n      var matches = clean_move.match(\n        /([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/\n      )\n      if (matches) {\n        var piece = matches[1]\n        var from = matches[2]\n        var to = matches[3]\n        var promotion = matches[4]\n      }\n    }\n\n    var moves = generate_moves()\n    for (var i = 0, len = moves.length; i < len; i++) {\n      // try the strict parser first, then the sloppy parser if requested\n      // by the user\n      if (\n        clean_move === stripped_san(move_to_san(moves[i])) ||\n        (sloppy && clean_move === stripped_san(move_to_san(moves[i], true)))\n      ) {\n        return moves[i]\n      } else {\n        if (\n          matches &&\n          (!piece || piece.toLowerCase() == moves[i].piece) &&\n          SQUARES[from] == moves[i].from &&\n          SQUARES[to] == moves[i].to &&\n          (!promotion || promotion.toLowerCase() == moves[i].promotion)\n        ) {\n          return moves[i]\n        }\n      }\n    }\n\n    return null\n  }\n\n  /*****************************************************************************\n   * UTILITY FUNCTIONS\n   ****************************************************************************/\n  function rank(i) {\n    return i >> 4\n  }\n\n  function file(i) {\n    return i & 15\n  }\n\n  function algebraic(i) {\n    var f = file(i),\n      r = rank(i)\n    return 'abcdefgh'.substring(f, f + 1) + '87654321'.substring(r, r + 1)\n  }\n\n  function swap_color(c) {\n    return c === WHITE ? BLACK : WHITE\n  }\n\n  function is_digit(c) {\n    return '0123456789'.indexOf(c) !== -1\n  }\n\n  /* pretty = external move object */\n  function make_pretty(ugly_move) {\n    var move = clone(ugly_move)\n    move.san = move_to_san(move, false)\n    move.to = algebraic(move.to)\n    move.from = algebraic(move.from)\n\n    var flags = ''\n\n    for (var flag in BITS) {\n      if (BITS[flag] & move.flags) {\n        flags += FLAGS[flag]\n      }\n    }\n    move.flags = flags\n\n    return move\n  }\n\n  function clone(obj) {\n    var dupe = obj instanceof Array ? [] : {}\n\n    for (var property in obj) {\n      if (typeof property === 'object') {\n        dupe[property] = clone(obj[property])\n      } else {\n        dupe[property] = obj[property]\n      }\n    }\n\n    return dupe\n  }\n\n  function trim(str) {\n    return str.replace(/^\\s+|\\s+$/g, '')\n  }\n\n  /*****************************************************************************\n   * DEBUGGING UTILITIES\n   ****************************************************************************/\n  function perft(depth) {\n    var moves = generate_moves({ legal: false })\n    var nodes = 0\n    var color = turn\n\n    for (var i = 0, len = moves.length; i < len; i++) {\n      make_move(moves[i])\n      if (!king_attacked(color)) {\n        if (depth - 1 > 0) {\n          var child_nodes = perft(depth - 1)\n          nodes += child_nodes\n        } else {\n          nodes++\n        }\n      }\n      undo_move()\n    }\n\n    return nodes\n  }\n\n  return {\n    /***************************************************************************\n     * PUBLIC CONSTANTS (is there a better way to do this?)\n     **************************************************************************/\n    WHITE: WHITE,\n    BLACK: BLACK,\n    PAWN: PAWN,\n    KNIGHT: KNIGHT,\n    BISHOP: BISHOP,\n    ROOK: ROOK,\n    QUEEN: QUEEN,\n    KING: KING,\n    SQUARES: (function() {\n      /* from the ECMA-262 spec (section 12.6.4):\n       * \"The mechanics of enumerating the properties ... is\n       * implementation dependent\"\n       * so: for (var sq in SQUARES) { keys.push(sq); } might not be\n       * ordered correctly\n       */\n      var keys = []\n      for (var i = SQUARES.a8; i <= SQUARES.h1; i++) {\n        if (i & 0x88) {\n          i += 7\n          continue\n        }\n        keys.push(algebraic(i))\n      }\n      return keys\n    })(),\n    FLAGS: FLAGS,\n\n    /***************************************************************************\n     * PUBLIC API\n     **************************************************************************/\n    load: function(fen) {\n      return load(fen)\n    },\n\n    reset: function() {\n      return reset()\n    },\n\n    moves: function(options) {\n      /* The internal representation of a chess move is in 0x88 format, and\n       * not meant to be human-readable.  The code below converts the 0x88\n       * square coordinates to algebraic coordinates.  It also prunes an\n       * unnecessary move keys resulting from a verbose call.\n       */\n\n      var ugly_moves = generate_moves(options)\n      var moves = []\n\n      for (var i = 0, len = ugly_moves.length; i < len; i++) {\n        /* does the user want a full move object (most likely not), or just\n         * SAN\n         */\n        if (\n          typeof options !== 'undefined' &&\n          'verbose' in options &&\n          options.verbose\n        ) {\n          moves.push(make_pretty(ugly_moves[i]))\n        } else {\n          moves.push(move_to_san(ugly_moves[i], false))\n        }\n      }\n\n      return moves\n    },\n\n    in_check: function() {\n      return in_check()\n    },\n\n    in_checkmate: function() {\n      return in_checkmate()\n    },\n\n    in_stalemate: function() {\n      return in_stalemate()\n    },\n\n    in_draw: function() {\n      return (\n        half_moves >= 100 ||\n        in_stalemate() ||\n        insufficient_material() ||\n        in_threefold_repetition()\n      )\n    },\n\n    insufficient_material: function() {\n      return insufficient_material()\n    },\n\n    in_threefold_repetition: function() {\n      return in_threefold_repetition()\n    },\n\n    game_over: function() {\n      return (\n        half_moves >= 100 ||\n        in_checkmate() ||\n        in_stalemate() ||\n        insufficient_material() ||\n        in_threefold_repetition()\n      )\n    },\n\n    validate_fen: function(fen) {\n      return validate_fen(fen)\n    },\n\n    fen: function() {\n      return generate_fen()\n    },\n\n    board: function() {\n      var output = [],\n        row = []\n\n      for (var i = SQUARES.a8; i <= SQUARES.h1; i++) {\n        if (board[i] == null) {\n          row.push(null)\n        } else {\n          row.push({ type: board[i].type, color: board[i].color })\n        }\n        if ((i + 1) & 0x88) {\n          output.push(row)\n          row = []\n          i += 8\n        }\n      }\n\n      return output\n    },\n\n    pgn: function(options) {\n      /* using the specification from http://www.chessclub.com/help/PGN-spec\n       * example for html usage: .pgn({ max_width: 72, newline_char: \"<br />\" })\n       */\n      var newline =\n        typeof options === 'object' && typeof options.newline_char === 'string'\n          ? options.newline_char\n          : '\\n'\n      var max_width =\n        typeof options === 'object' && typeof options.max_width === 'number'\n          ? options.max_width\n          : 0\n      var result = []\n      var header_exists = false\n\n      /* add the PGN header headerrmation */\n      for (var i in header) {\n        /* TODO: order of enumerated properties in header object is not\n         * guaranteed, see ECMA-262 spec (section 12.6.4)\n         */\n        result.push('[' + i + ' \"' + header[i] + '\"]' + newline)\n        header_exists = true\n      }\n\n      if (header_exists && history.length) {\n        result.push(newline)\n      }\n\n      var append_comment = function(move_string) {\n        var comment = comments[generate_fen()]\n        if (typeof comment !== 'undefined') {\n          var delimiter = move_string.length > 0 ? ' ' : '';\n          move_string = `${move_string}${delimiter}{${comment}}`\n        }\n        return move_string\n      }\n\n      /* pop all of history onto reversed_history */\n      var reversed_history = []\n      while (history.length > 0) {\n        reversed_history.push(undo_move())\n      }\n\n      var moves = []\n      var move_string = ''\n\n      /* special case of a commented starting position with no moves */\n      if (reversed_history.length === 0) {\n        moves.push(append_comment(''))\n      }\n\n      /* build the list of moves.  a move_string looks like: \"3. e3 e6\" */\n      while (reversed_history.length > 0) {\n        move_string = append_comment(move_string)\n        var move = reversed_history.pop()\n\n        /* if the position started with black to move, start PGN with 1. ... */\n        if (!history.length && move.color === 'b') {\n          move_string = move_number + '. ...'\n        } else if (move.color === 'w') {\n          /* store the previous generated move_string if we have one */\n          if (move_string.length) {\n            moves.push(move_string)\n          }\n          move_string = move_number + '.'\n        }\n\n        move_string = move_string + ' ' + move_to_san(move, false)\n        make_move(move)\n      }\n\n      /* are there any other leftover moves? */\n      if (move_string.length) {\n        moves.push(append_comment(move_string))\n      }\n\n      /* is there a result? */\n      if (typeof header.Result !== 'undefined') {\n        moves.push(header.Result)\n      }\n\n      /* history should be back to what it was before we started generating PGN,\n       * so join together moves\n       */\n      if (max_width === 0) {\n        return result.join('') + moves.join(' ')\n      }\n\n      var strip = function() {\n        if (result.length > 0 && result[result.length - 1] === ' ') {\n          result.pop();\n          return true;\n        }\n        return false;\n      };\n\n      /* NB: this does not preserve comment whitespace. */\n      var wrap_comment = function(width, move) {\n        for (var token of move.split(' ')) {\n          if (!token) {\n            continue;\n          }\n          if (width + token.length > max_width) {\n            while (strip()) {\n              width--;\n            }\n            result.push(newline);\n            width = 0;\n          }\n          result.push(token);\n          width += token.length;\n          result.push(' ');\n          width++;\n        }\n        if (strip()) {\n          width--;\n        }\n        return width;\n      };\n\n      /* wrap the PGN output at max_width */\n      var current_width = 0\n      for (var i = 0; i < moves.length; i++) {\n        if (current_width + moves[i].length > max_width) {\n          if (moves[i].includes('{')) {\n            current_width = wrap_comment(current_width, moves[i]);\n            continue;\n          }\n        }\n        /* if the current move will push past max_width */\n        if (current_width + moves[i].length > max_width && i !== 0) {\n          /* don't end the line with whitespace */\n          if (result[result.length - 1] === ' ') {\n            result.pop()\n          }\n\n          result.push(newline)\n          current_width = 0\n        } else if (i !== 0) {\n          result.push(' ')\n          current_width++\n        }\n        result.push(moves[i])\n        current_width += moves[i].length\n      }\n\n      return result.join('')\n    },\n\n    load_pgn: function(pgn, options) {\n      // allow the user to specify the sloppy move parser to work around over\n      // disambiguation bugs in Fritz and Chessbase\n      var sloppy =\n        typeof options !== 'undefined' && 'sloppy' in options\n          ? options.sloppy\n          : false\n\n      function mask(str) {\n        return str.replace(/\\\\/g, '\\\\')\n      }\n\n      function has_keys(object) {\n        for (var key in object) {\n          return true\n        }\n        return false\n      }\n\n      function parse_pgn_header(header, options) {\n        var newline_char =\n          typeof options === 'object' &&\n          typeof options.newline_char === 'string'\n            ? options.newline_char\n            : '\\r?\\n'\n        var header_obj = {}\n        var headers = header.split(new RegExp(mask(newline_char)))\n        var key = ''\n        var value = ''\n\n        for (var i = 0; i < headers.length; i++) {\n          key = headers[i].replace(/^\\[([A-Z][A-Za-z]*)\\s.*\\]$/, '$1')\n          value = headers[i].replace(/^\\[[A-Za-z]+\\s\"(.*)\"\\ *\\]$/, '$1')\n          if (trim(key).length > 0) {\n            header_obj[key] = value\n          }\n        }\n\n        return header_obj\n      }\n\n      var newline_char =\n        typeof options === 'object' && typeof options.newline_char === 'string'\n          ? options.newline_char\n          : '\\r?\\n'\n\n      // RegExp to split header. Takes advantage of the fact that header and movetext\n      // will always have a blank line between them (ie, two newline_char's).\n      // With default newline_char, will equal: /^(\\[((?:\\r?\\n)|.)*\\])(?:\\r?\\n){2}/\n      var header_regex = new RegExp(\n        '^(\\\\[((?:' +\n          mask(newline_char) +\n          ')|.)*\\\\])' +\n          '(?:' +\n          mask(newline_char) +\n          '){2}'\n      )\n\n      // If no header given, begin with moves.\n      var header_string = header_regex.test(pgn)\n        ? header_regex.exec(pgn)[1]\n        : ''\n\n      // Put the board in the starting position\n      reset()\n\n      /* parse PGN header */\n      var headers = parse_pgn_header(header_string, options)\n      for (var key in headers) {\n        set_header([key, headers[key]])\n      }\n\n      /* load the starting position indicated by [Setup '1'] and\n       * [FEN position] */\n      if (headers['SetUp'] === '1') {\n        if (!('FEN' in headers && load(headers['FEN'], true))) {\n          // second argument to load: don't clear the headers\n          return false\n        }\n      }\n\n      /* NB: the regexes below that delete move numbers, recursive\n       * annotations, and numeric annotation glyphs may also match\n       * text in comments. To prevent this, we transform comments\n       * by hex-encoding them in place and decoding them again after\n       * the other tokens have been deleted.\n       *\n       * While the spec states that PGN files should be ASCII encoded,\n       * we use {en,de}codeURIComponent here to support arbitrary UTF8\n       * as a convenience for modern users */\n\n      var to_hex = function(string) {\n        return Array\n          .from(string)\n          .map(function(c) {\n            /* encodeURI doesn't transform most ASCII characters,\n             * so we handle these ourselves */\n            return c.charCodeAt(0) < 128\n              ? c.charCodeAt(0).toString(16)\n              : encodeURIComponent(c).replace(/\\%/g, '').toLowerCase()\n          })\n          .join('')\n      }\n\n      var from_hex = function(string) {\n        return string.length == 0\n          ? ''\n          : decodeURIComponent('%' + string.match(/.{1,2}/g).join('%'))\n      }\n\n      var encode_comment = function(string) {\n        string = string.replace(new RegExp(mask(newline_char), 'g'), ' ')\n        return `{${to_hex(string.slice(1, string.length - 1))}}`\n      }\n\n      var decode_comment = function(string) {\n        if (string.startsWith('{') && string.endsWith('}')) {\n          return from_hex(string.slice(1, string.length - 1))\n        }\n      }\n\n      /* delete header to get the moves */\n      var ms = pgn\n        .replace(header_string, '')\n        .replace(\n          /* encode comments so they don't get deleted below */\n          new RegExp(`(\\{[^}]*\\})+?|;([^${mask(newline_char)}]*)`, 'g'),\n          function(match, bracket, semicolon) {\n            return bracket !== undefined\n              ? encode_comment(bracket)\n              : ' ' + encode_comment(`{${semicolon.slice(1)}}`)\n          }\n        )\n        .replace(new RegExp(mask(newline_char), 'g'), ' ')\n\n      /* delete recursive annotation variations */\n      var rav_regex = /(\\([^\\(\\)]+\\))+?/g\n      while (rav_regex.test(ms)) {\n        ms = ms.replace(rav_regex, '')\n      }\n\n      /* delete move numbers */\n      ms = ms.replace(/\\d+\\.(\\.\\.)?/g, '')\n\n      /* delete ... indicating black to move */\n      ms = ms.replace(/\\.\\.\\./g, '')\n\n      /* delete numeric annotation glyphs */\n      ms = ms.replace(/\\$\\d+/g, '')\n\n      /* trim and get array of moves */\n      var moves = trim(ms).split(new RegExp(/\\s+/))\n\n      /* delete empty entries */\n      moves = moves\n        .join(',')\n        .replace(/,,+/g, ',')\n        .split(',')\n      var move = ''\n\n      for (var half_move = 0; half_move < moves.length - 1; half_move++) {\n        var comment = decode_comment(moves[half_move])\n        if (comment !== undefined) {\n          comments[generate_fen()] = comment\n          continue\n        }\n        move = move_from_san(moves[half_move], sloppy)\n\n        /* move not possible! (don't clear the board to examine to show the\n         * latest valid position)\n         */\n        if (move == null) {\n          return false\n        } else {\n          make_move(move)\n        }\n      }\n\n      comment = decode_comment(moves[moves.length - 1])\n      if (comment !== undefined) {\n        comments[generate_fen()] = comment\n        moves.pop()\n      }\n\n      /* examine last move */\n      move = moves[moves.length - 1]\n      if (POSSIBLE_RESULTS.indexOf(move) > -1) {\n        if (has_keys(header) && typeof header.Result === 'undefined') {\n          set_header(['Result', move])\n        }\n      } else {\n        move = move_from_san(move, sloppy)\n        if (move == null) {\n          return false\n        } else {\n          make_move(move)\n        }\n      }\n      return true\n    },\n\n    header: function() {\n      return set_header(arguments)\n    },\n\n    ascii: function() {\n      return ascii()\n    },\n\n    turn: function() {\n      return turn\n    },\n\n    move: function(move, options) {\n      /* The move function can be called with in the following parameters:\n       *\n       * .move('Nxb7')      <- where 'move' is a case-sensitive SAN string\n       *\n       * .move({ from: 'h7', <- where the 'move' is a move object (additional\n       *         to :'h8',      fields are ignored)\n       *         promotion: 'q',\n       *      })\n       */\n\n      // allow the user to specify the sloppy move parser to work around over\n      // disambiguation bugs in Fritz and Chessbase\n      var sloppy =\n        typeof options !== 'undefined' && 'sloppy' in options\n          ? options.sloppy\n          : false\n\n      var move_obj = null\n\n      if (typeof move === 'string') {\n        move_obj = move_from_san(move, sloppy)\n      } else if (typeof move === 'object') {\n        var moves = generate_moves()\n\n        /* convert the pretty move object to an ugly move object */\n        for (var i = 0, len = moves.length; i < len; i++) {\n          if (\n            move.from === algebraic(moves[i].from) &&\n            move.to === algebraic(moves[i].to) &&\n            (!('promotion' in moves[i]) ||\n              move.promotion === moves[i].promotion)\n          ) {\n            move_obj = moves[i]\n            break\n          }\n        }\n      }\n\n      /* failed to find move */\n      if (!move_obj) {\n        return null\n      }\n\n      /* need to make a copy of move because we can't generate SAN after the\n       * move is made\n       */\n      var pretty_move = make_pretty(move_obj)\n\n      make_move(move_obj)\n\n      return pretty_move\n    },\n\n    undo: function() {\n      var move = undo_move()\n      return move ? make_pretty(move) : null\n    },\n\n    clear: function() {\n      return clear()\n    },\n\n    put: function(piece, square) {\n      return put(piece, square)\n    },\n\n    get: function(square) {\n      return get(square)\n    },\n\n    remove: function(square) {\n      return remove(square)\n    },\n\n    perft: function(depth) {\n      return perft(depth)\n    },\n\n    square_color: function(square) {\n      if (square in SQUARES) {\n        var sq_0x88 = SQUARES[square]\n        return (rank(sq_0x88) + file(sq_0x88)) % 2 === 0 ? 'light' : 'dark'\n      }\n\n      return null\n    },\n\n    history: function(options) {\n      var reversed_history = []\n      var move_history = []\n      var verbose =\n        typeof options !== 'undefined' &&\n        'verbose' in options &&\n        options.verbose\n\n      while (history.length > 0) {\n        reversed_history.push(undo_move())\n      }\n\n      while (reversed_history.length > 0) {\n        var move = reversed_history.pop()\n        if (verbose) {\n          move_history.push(make_pretty(move))\n        } else {\n          move_history.push(move_to_san(move))\n        }\n        make_move(move)\n      }\n\n      return move_history\n    },\n\n    get_comment: function() {\n      return comments[generate_fen()];\n    },\n\n    set_comment: function(comment) {\n      comments[generate_fen()] = comment.replace('{', '[').replace('}', ']');\n    },\n\n    delete_comment: function() {\n      var comment = comments[generate_fen()];\n      delete comments[generate_fen()];\n      return comment;\n    },\n\n    get_comments: function() {\n      prune_comments();\n      return Object.keys(comments).map(function(fen) {\n        return {fen: fen, comment: comments[fen]};\n      });\n    },\n\n    delete_comments: function() {\n      prune_comments();\n      return Object.keys(comments)\n        .map(function(fen) {\n          var comment = comments[fen];\n          delete comments[fen];\n          return {fen: fen, comment: comment};\n        });\n    }\n  }\n}\n\n/* export Chess object if using node or any other CommonJS compatible\n * environment */\nif (typeof exports !== 'undefined') exports.Chess = Chess\n/* export Chess object for any RequireJS compatible environment */\nif (typeof define !== 'undefined')\n  define(function() {\n    return Chess\n  })\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.explosion = void 0;\nfunction explosion(state, keys) {\n    state.exploding = { stage: 1, keys };\n    state.dom.redraw();\n    setTimeout(() => {\n        setStage(state, 2);\n        setTimeout(() => setStage(state, undefined), 120);\n    }, 120);\n}\nexports.explosion = explosion;\nfunction setStage(state, stage) {\n    if (state.exploding) {\n        if (stage)\n            state.exploding.stage = stage;\n        else\n            state.exploding = undefined;\n        state.dom.redraw();\n    }\n}\n//# sourceMappingURL=explosion.js.map","'use strict';\nvar $ = require('../internals/export');\nvar $indexOf = require('../internals/array-includes').indexOf;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar nativeIndexOf = [].indexOf;\n\nvar NEGATIVE_ZERO = !!nativeIndexOf && 1 / [1].indexOf(1, -0) < 0;\nvar STRICT_METHOD = arrayMethodIsStrict('indexOf');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', { ACCESSORS: true, 1: 0 });\n\n// `Array.prototype.indexOf` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.indexof\n$({ target: 'Array', proto: true, forced: NEGATIVE_ZERO || !STRICT_METHOD || !USES_TO_LENGTH }, {\n  indexOf: function indexOf(searchElement /* , fromIndex = 0 */) {\n    return NEGATIVE_ZERO\n      // convert -0 to +0\n      ? nativeIndexOf.apply(this, arguments) || 0\n      : $indexOf(this, searchElement, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $includes = require('../internals/array-includes').includes;\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', { ACCESSORS: true, 1: 0 });\n\n// `Array.prototype.includes` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.includes\n$({ target: 'Array', proto: true, forced: !USES_TO_LENGTH }, {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('includes');\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.bindDocument = exports.bindBoard = void 0;\nconst drag = require(\"./drag\");\nconst draw = require(\"./draw\");\nconst drop_1 = require(\"./drop\");\nconst util_1 = require(\"./util\");\nfunction bindBoard(s, boundsUpdated) {\n    const boardEl = s.dom.elements.board;\n    if (!s.dom.relative && s.resizable && 'ResizeObserver' in window) {\n        const observer = new window['ResizeObserver'](boundsUpdated);\n        observer.observe(boardEl);\n    }\n    if (s.viewOnly)\n        return;\n    const onStart = startDragOrDraw(s);\n    boardEl.addEventListener('touchstart', onStart, { passive: false });\n    boardEl.addEventListener('mousedown', onStart, { passive: false });\n    if (s.disableContextMenu || s.drawable.enabled) {\n        boardEl.addEventListener('contextmenu', e => e.preventDefault());\n    }\n}\nexports.bindBoard = bindBoard;\nfunction bindDocument(s, boundsUpdated) {\n    const unbinds = [];\n    if (!s.dom.relative && s.resizable && !('ResizeObserver' in window)) {\n        unbinds.push(unbindable(document.body, 'chessground.resize', boundsUpdated));\n    }\n    if (!s.viewOnly) {\n        const onmove = dragOrDraw(s, drag.move, draw.move);\n        const onend = dragOrDraw(s, drag.end, draw.end);\n        for (const ev of ['touchmove', 'mousemove'])\n            unbinds.push(unbindable(document, ev, onmove));\n        for (const ev of ['touchend', 'mouseup'])\n            unbinds.push(unbindable(document, ev, onend));\n        const onScroll = () => s.dom.bounds.clear();\n        unbinds.push(unbindable(document, 'scroll', onScroll, { capture: true, passive: true }));\n        unbinds.push(unbindable(window, 'resize', onScroll, { passive: true }));\n    }\n    return () => unbinds.forEach(f => f());\n}\nexports.bindDocument = bindDocument;\nfunction unbindable(el, eventName, callback, options) {\n    el.addEventListener(eventName, callback, options);\n    return () => el.removeEventListener(eventName, callback, options);\n}\nfunction startDragOrDraw(s) {\n    return e => {\n        if (s.draggable.current)\n            drag.cancel(s);\n        else if (s.drawable.current)\n            draw.cancel(s);\n        else if (e.shiftKey || util_1.isRightButton(e)) {\n            if (s.drawable.enabled)\n                draw.start(s, e);\n        }\n        else if (!s.viewOnly) {\n            if (s.dropmode.active)\n                drop_1.drop(s, e);\n            else\n                drag.start(s, e);\n        }\n    };\n}\nfunction dragOrDraw(s, withDrag, withDraw) {\n    return e => {\n        if (s.drawable.current) {\n            if (s.drawable.enabled)\n                withDraw(s, e);\n        }\n        else if (!s.viewOnly)\n            withDrag(s, e);\n    };\n}\n//# sourceMappingURL=events.js.map","var defineWellKnownSymbol = require('../internals/define-well-known-symbol');\n\n// `Symbol.iterator` well-known symbol\n// https://tc39.github.io/ecma262/#sec-symbol.iterator\ndefineWellKnownSymbol('iterator');\n","'use strict';\n// TODO: Remove from `core-js@4` since it's moved to entry points\nrequire('../modules/es.regexp.exec');\nvar redefine = require('../internals/redefine');\nvar fails = require('../internals/fails');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar regexpExec = require('../internals/regexp-exec');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nvar SPECIES = wellKnownSymbol('species');\n\nvar REPLACE_SUPPORTS_NAMED_GROUPS = !fails(function () {\n  // #replace needs built-in support for named groups.\n  // #match works fine because it just return the exec results, even if it has\n  // a \"grops\" property.\n  var re = /./;\n  re.exec = function () {\n    var result = [];\n    result.groups = { a: '7' };\n    return result;\n  };\n  return ''.replace(re, '$<a>') !== '7';\n});\n\n// IE <= 11 replaces $0 with the whole match, as if it was $&\n// https://stackoverflow.com/questions/6024666/getting-ie-to-replace-a-regex-with-the-literal-string-0\nvar REPLACE_KEEPS_$0 = (function () {\n  return 'a'.replace(/./, '$0') === '$0';\n})();\n\nvar REPLACE = wellKnownSymbol('replace');\n// Safari <= 13.0.3(?) substitutes nth capture where n>m with an empty string\nvar REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE = (function () {\n  if (/./[REPLACE]) {\n    return /./[REPLACE]('a', '$0') === '';\n  }\n  return false;\n})();\n\n// Chrome 51 has a buggy \"split\" implementation when RegExp#exec !== nativeExec\n// Weex JS has frozen built-in prototypes, so use try / catch wrapper\nvar SPLIT_WORKS_WITH_OVERWRITTEN_EXEC = !fails(function () {\n  var re = /(?:)/;\n  var originalExec = re.exec;\n  re.exec = function () { return originalExec.apply(this, arguments); };\n  var result = 'ab'.split(re);\n  return result.length !== 2 || result[0] !== 'a' || result[1] !== 'b';\n});\n\nmodule.exports = function (KEY, length, exec, sham) {\n  var SYMBOL = wellKnownSymbol(KEY);\n\n  var DELEGATES_TO_SYMBOL = !fails(function () {\n    // String methods call symbol-named RegEp methods\n    var O = {};\n    O[SYMBOL] = function () { return 7; };\n    return ''[KEY](O) != 7;\n  });\n\n  var DELEGATES_TO_EXEC = DELEGATES_TO_SYMBOL && !fails(function () {\n    // Symbol-named RegExp methods call .exec\n    var execCalled = false;\n    var re = /a/;\n\n    if (KEY === 'split') {\n      // We can't use real regex here since it causes deoptimization\n      // and serious performance degradation in V8\n      // https://github.com/zloirock/core-js/issues/306\n      re = {};\n      // RegExp[@@split] doesn't call the regex's exec method, but first creates\n      // a new one. We need to return the patched regex when creating the new one.\n      re.constructor = {};\n      re.constructor[SPECIES] = function () { return re; };\n      re.flags = '';\n      re[SYMBOL] = /./[SYMBOL];\n    }\n\n    re.exec = function () { execCalled = true; return null; };\n\n    re[SYMBOL]('');\n    return !execCalled;\n  });\n\n  if (\n    !DELEGATES_TO_SYMBOL ||\n    !DELEGATES_TO_EXEC ||\n    (KEY === 'replace' && !(\n      REPLACE_SUPPORTS_NAMED_GROUPS &&\n      REPLACE_KEEPS_$0 &&\n      !REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE\n    )) ||\n    (KEY === 'split' && !SPLIT_WORKS_WITH_OVERWRITTEN_EXEC)\n  ) {\n    var nativeRegExpMethod = /./[SYMBOL];\n    var methods = exec(SYMBOL, ''[KEY], function (nativeMethod, regexp, str, arg2, forceStringMethod) {\n      if (regexp.exec === regexpExec) {\n        if (DELEGATES_TO_SYMBOL && !forceStringMethod) {\n          // The native String method already delegates to @@method (this\n          // polyfilled function), leasing to infinite recursion.\n          // We avoid it by directly calling the native @@method method.\n          return { done: true, value: nativeRegExpMethod.call(regexp, str, arg2) };\n        }\n        return { done: true, value: nativeMethod.call(str, regexp, arg2) };\n      }\n      return { done: false };\n    }, {\n      REPLACE_KEEPS_$0: REPLACE_KEEPS_$0,\n      REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE: REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE\n    });\n    var stringMethod = methods[0];\n    var regexMethod = methods[1];\n\n    redefine(String.prototype, KEY, stringMethod);\n    redefine(RegExp.prototype, SYMBOL, length == 2\n      // 21.2.5.8 RegExp.prototype[@@replace](string, replaceValue)\n      // 21.2.5.11 RegExp.prototype[@@split](string, limit)\n      ? function (string, arg) { return regexMethod.call(string, this, arg); }\n      // 21.2.5.6 RegExp.prototype[@@match](string)\n      // 21.2.5.9 RegExp.prototype[@@search](string)\n      : function (string) { return regexMethod.call(string, this); }\n    );\n  }\n\n  if (sham) createNonEnumerableProperty(RegExp.prototype[SYMBOL], 'sham', true);\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n// FF49- issue\nvar USES_TO_LENGTH = arrayMethodUsesToLength('map');\n\n// `Array.prototype.map` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var global = require('../internals/global');\nvar DOMIterables = require('../internals/dom-iterables');\nvar ArrayIteratorMethods = require('../modules/es.array.iterator');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar ArrayValues = ArrayIteratorMethods.values;\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  var Collection = global[COLLECTION_NAME];\n  var CollectionPrototype = Collection && Collection.prototype;\n  if (CollectionPrototype) {\n    // some Chrome versions have non-configurable methods on DOMTokenList\n    if (CollectionPrototype[ITERATOR] !== ArrayValues) try {\n      createNonEnumerableProperty(CollectionPrototype, ITERATOR, ArrayValues);\n    } catch (error) {\n      CollectionPrototype[ITERATOR] = ArrayValues;\n    }\n    if (!CollectionPrototype[TO_STRING_TAG]) {\n      createNonEnumerableProperty(CollectionPrototype, TO_STRING_TAG, COLLECTION_NAME);\n    }\n    if (DOMIterables[COLLECTION_NAME]) for (var METHOD_NAME in ArrayIteratorMethods) {\n      // some Chrome versions have non-configurable methods on DOMTokenList\n      if (CollectionPrototype[METHOD_NAME] !== ArrayIteratorMethods[METHOD_NAME]) try {\n        createNonEnumerableProperty(CollectionPrototype, METHOD_NAME, ArrayIteratorMethods[METHOD_NAME]);\n      } catch (error) {\n        CollectionPrototype[METHOD_NAME] = ArrayIteratorMethods[METHOD_NAME];\n      }\n    }\n  }\n}\n","// `Symbol.prototype.description` getter\n// https://tc39.github.io/ecma262/#sec-symbol.prototype.description\n'use strict';\nvar $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar has = require('../internals/has');\nvar isObject = require('../internals/is-object');\nvar defineProperty = require('../internals/object-define-property').f;\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\n\nvar NativeSymbol = global.Symbol;\n\nif (DESCRIPTORS && typeof NativeSymbol == 'function' && (!('description' in NativeSymbol.prototype) ||\n  // Safari 12 bug\n  NativeSymbol().description !== undefined\n)) {\n  var EmptyStringDescriptionStore = {};\n  // wrap Symbol constructor for correct work with undefined description\n  var SymbolWrapper = function Symbol() {\n    var description = arguments.length < 1 || arguments[0] === undefined ? undefined : String(arguments[0]);\n    var result = this instanceof SymbolWrapper\n      ? new NativeSymbol(description)\n      // in Edge 13, String(Symbol(undefined)) === 'Symbol(undefined)'\n      : description === undefined ? NativeSymbol() : NativeSymbol(description);\n    if (description === '') EmptyStringDescriptionStore[result] = true;\n    return result;\n  };\n  copyConstructorProperties(SymbolWrapper, NativeSymbol);\n  var symbolPrototype = SymbolWrapper.prototype = NativeSymbol.prototype;\n  symbolPrototype.constructor = SymbolWrapper;\n\n  var symbolToString = symbolPrototype.toString;\n  var native = String(NativeSymbol('test')) == 'Symbol(test)';\n  var regexp = /^Symbol\\((.*)\\)[^)]+$/;\n  defineProperty(symbolPrototype, 'description', {\n    configurable: true,\n    get: function description() {\n      var symbol = isObject(this) ? this.valueOf() : this;\n      var string = symbolToString.call(symbol);\n      if (has(EmptyStringDescriptionStore, symbol)) return '';\n      var desc = native ? string.slice(7, -1) : string.replace(regexp, '$1');\n      return desc === '' ? undefined : desc;\n    }\n  });\n\n  $({ global: true, forced: true }, {\n    Symbol: SymbolWrapper\n  });\n}\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nexports.f = wellKnownSymbol;\n","var classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.github.io/ecma262/#sec-isarray\nmodule.exports = Array.isArray || function isArray(arg) {\n  return classof(arg) == 'Array';\n};\n","var hiddenKeys = require('../internals/hidden-keys');\nvar isObject = require('../internals/is-object');\nvar has = require('../internals/has');\nvar defineProperty = require('../internals/object-define-property').f;\nvar uid = require('../internals/uid');\nvar FREEZING = require('../internals/freezing');\n\nvar METADATA = uid('meta');\nvar id = 0;\n\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\n\nvar setMetadata = function (it) {\n  defineProperty(it, METADATA, { value: {\n    objectID: 'O' + ++id, // object ID\n    weakData: {}          // weak collections IDs\n  } });\n};\n\nvar fastKey = function (it, create) {\n  // return a primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, METADATA)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMetadata(it);\n  // return object ID\n  } return it[METADATA].objectID;\n};\n\nvar getWeakData = function (it, create) {\n  if (!has(it, METADATA)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMetadata(it);\n  // return the store of weak collections IDs\n  } return it[METADATA].weakData;\n};\n\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZING && meta.REQUIRED && isExtensible(it) && !has(it, METADATA)) setMetadata(it);\n  return it;\n};\n\nvar meta = module.exports = {\n  REQUIRED: false,\n  fastKey: fastKey,\n  getWeakData: getWeakData,\n  onFreeze: onFreeze\n};\n\nhiddenKeys[METADATA] = true;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.renderSvg = exports.createElement = void 0;\nconst util_1 = require(\"./util\");\nfunction createElement(tagName) {\n    return document.createElementNS('http://www.w3.org/2000/svg', tagName);\n}\nexports.createElement = createElement;\nfunction renderSvg(state, root) {\n    const d = state.drawable, curD = d.current, cur = curD && curD.mouseSq ? curD : undefined, arrowDests = new Map(), bounds = state.dom.bounds();\n    for (const s of d.shapes.concat(d.autoShapes).concat(cur ? [cur] : [])) {\n        if (s.dest)\n            arrowDests.set(s.dest, (arrowDests.get(s.dest) || 0) + 1);\n    }\n    const shapes = d.shapes.concat(d.autoShapes).map((s) => {\n        return {\n            shape: s,\n            current: false,\n            hash: shapeHash(s, arrowDests, false, bounds)\n        };\n    });\n    if (cur)\n        shapes.push({\n            shape: cur,\n            current: true,\n            hash: shapeHash(cur, arrowDests, true, bounds)\n        });\n    const fullHash = shapes.map(sc => sc.hash).join(';');\n    if (fullHash === state.drawable.prevSvgHash)\n        return;\n    state.drawable.prevSvgHash = fullHash;\n    const defsEl = root.firstChild;\n    syncDefs(d, shapes, defsEl);\n    syncShapes(state, shapes, d.brushes, arrowDests, root, defsEl);\n}\nexports.renderSvg = renderSvg;\nfunction syncDefs(d, shapes, defsEl) {\n    const brushes = new Map();\n    let brush;\n    for (const s of shapes) {\n        if (s.shape.dest) {\n            brush = d.brushes[s.shape.brush];\n            if (s.shape.modifiers)\n                brush = makeCustomBrush(brush, s.shape.modifiers);\n            brushes.set(brush.key, brush);\n        }\n    }\n    const keysInDom = new Set();\n    let el = defsEl.firstChild;\n    while (el) {\n        keysInDom.add(el.getAttribute('cgKey'));\n        el = el.nextSibling;\n    }\n    for (const [key, brush] of brushes.entries()) {\n        if (!keysInDom.has(key))\n            defsEl.appendChild(renderMarker(brush));\n    }\n}\nfunction syncShapes(state, shapes, brushes, arrowDests, root, defsEl) {\n    const bounds = state.dom.bounds(), hashesInDom = new Map(), toRemove = [];\n    for (const sc of shapes)\n        hashesInDom.set(sc.hash, false);\n    let el = defsEl.nextSibling, elHash;\n    while (el) {\n        elHash = el.getAttribute('cgHash');\n        if (hashesInDom.has(elHash))\n            hashesInDom.set(elHash, true);\n        else\n            toRemove.push(el);\n        el = el.nextSibling;\n    }\n    for (const el of toRemove)\n        root.removeChild(el);\n    for (const sc of shapes) {\n        if (!hashesInDom.get(sc.hash))\n            root.appendChild(renderShape(state, sc, brushes, arrowDests, bounds));\n    }\n}\nfunction shapeHash({ orig, dest, brush, piece, modifiers }, arrowDests, current, bounds) {\n    return [bounds.width, bounds.height, current, orig, dest, brush, dest && (arrowDests.get(dest) || 0) > 1,\n        piece && pieceHash(piece),\n        modifiers && modifiersHash(modifiers)\n    ].filter(x => x).join(',');\n}\nfunction pieceHash(piece) {\n    return [piece.color, piece.role, piece.scale].filter(x => x).join(',');\n}\nfunction modifiersHash(m) {\n    return '' + (m.lineWidth || '');\n}\nfunction renderShape(state, { shape, current, hash }, brushes, arrowDests, bounds) {\n    let el;\n    if (shape.piece)\n        el = renderPiece(state.drawable.pieces.baseUrl, orient(util_1.key2pos(shape.orig), state.orientation), shape.piece, bounds);\n    else {\n        const orig = orient(util_1.key2pos(shape.orig), state.orientation);\n        if (shape.dest) {\n            let brush = brushes[shape.brush];\n            if (shape.modifiers)\n                brush = makeCustomBrush(brush, shape.modifiers);\n            el = renderArrow(brush, orig, orient(util_1.key2pos(shape.dest), state.orientation), current, (arrowDests.get(shape.dest) || 0) > 1, bounds);\n        }\n        else\n            el = renderCircle(brushes[shape.brush], orig, current, bounds);\n    }\n    el.setAttribute('cgHash', hash);\n    return el;\n}\nfunction renderCircle(brush, pos, current, bounds) {\n    const o = pos2px(pos, bounds), widths = circleWidth(bounds), radius = (bounds.width + bounds.height) / 32;\n    return setAttributes(createElement('circle'), {\n        stroke: brush.color,\n        'stroke-width': widths[current ? 0 : 1],\n        fill: 'none',\n        opacity: opacity(brush, current),\n        cx: o[0],\n        cy: o[1],\n        r: radius - widths[1] / 2\n    });\n}\nfunction renderArrow(brush, orig, dest, current, shorten, bounds) {\n    const m = arrowMargin(bounds, shorten && !current), a = pos2px(orig, bounds), b = pos2px(dest, bounds), dx = b[0] - a[0], dy = b[1] - a[1], angle = Math.atan2(dy, dx), xo = Math.cos(angle) * m, yo = Math.sin(angle) * m;\n    return setAttributes(createElement('line'), {\n        stroke: brush.color,\n        'stroke-width': lineWidth(brush, current, bounds),\n        'stroke-linecap': 'round',\n        'marker-end': 'url(#arrowhead-' + brush.key + ')',\n        opacity: opacity(brush, current),\n        x1: a[0],\n        y1: a[1],\n        x2: b[0] - xo,\n        y2: b[1] - yo\n    });\n}\nfunction renderPiece(baseUrl, pos, piece, bounds) {\n    const o = pos2px(pos, bounds), size = bounds.width / 8 * (piece.scale || 1), name = piece.color[0] + (piece.role === 'knight' ? 'n' : piece.role[0]).toUpperCase();\n    return setAttributes(createElement('image'), {\n        className: `${piece.role} ${piece.color}`,\n        x: o[0] - size / 2,\n        y: o[1] - size / 2,\n        width: size,\n        height: size,\n        href: baseUrl + name + '.svg'\n    });\n}\nfunction renderMarker(brush) {\n    const marker = setAttributes(createElement('marker'), {\n        id: 'arrowhead-' + brush.key,\n        orient: 'auto',\n        markerWidth: 4,\n        markerHeight: 8,\n        refX: 2.05,\n        refY: 2.01\n    });\n    marker.appendChild(setAttributes(createElement('path'), {\n        d: 'M0,0 V4 L3,2 Z',\n        fill: brush.color\n    }));\n    marker.setAttribute('cgKey', brush.key);\n    return marker;\n}\nfunction setAttributes(el, attrs) {\n    for (const key in attrs)\n        el.setAttribute(key, attrs[key]);\n    return el;\n}\nfunction orient(pos, color) {\n    return color === 'white' ? pos : [7 - pos[0], 7 - pos[1]];\n}\nfunction makeCustomBrush(base, modifiers) {\n    return {\n        color: base.color,\n        opacity: Math.round(base.opacity * 10) / 10,\n        lineWidth: Math.round(modifiers.lineWidth || base.lineWidth),\n        key: [base.key, modifiers.lineWidth].filter(x => x).join(''),\n    };\n}\nfunction circleWidth(bounds) {\n    const base = bounds.width / 512;\n    return [3 * base, 4 * base];\n}\nfunction lineWidth(brush, current, bounds) {\n    return (brush.lineWidth || 10) * (current ? 0.85 : 1) / 512 * bounds.width;\n}\nfunction opacity(brush, current) {\n    return (brush.opacity || 1) * (current ? 0.9 : 1);\n}\nfunction arrowMargin(bounds, shorten) {\n    return (shorten ? 20 : 10) / 512 * bounds.width;\n}\nfunction pos2px(pos, bounds) {\n    return [(pos[0] + 0.5) * bounds.width / 8, (7.5 - pos[1]) * bounds.height / 8];\n}\n//# sourceMappingURL=svg.js.map","'use strict';\nvar $ = require('../internals/export');\nvar isObject = require('../internals/is-object');\nvar isArray = require('../internals/is-array');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toLength = require('../internals/to-length');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar createProperty = require('../internals/create-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('slice');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('slice', { ACCESSORS: true, 0: 0, 1: 2 });\n\nvar SPECIES = wellKnownSymbol('species');\nvar nativeSlice = [].slice;\nvar max = Math.max;\n\n// `Array.prototype.slice` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.slice\n// fallback for not array-like ES3 strings and DOM objects\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  slice: function slice(start, end) {\n    var O = toIndexedObject(this);\n    var length = toLength(O.length);\n    var k = toAbsoluteIndex(start, length);\n    var fin = toAbsoluteIndex(end === undefined ? length : end, length);\n    // inline `ArraySpeciesCreate` for usage native `Array#slice` where it's possible\n    var Constructor, result, n;\n    if (isArray(O)) {\n      Constructor = O.constructor;\n      // cross-realm fallback\n      if (typeof Constructor == 'function' && (Constructor === Array || isArray(Constructor.prototype))) {\n        Constructor = undefined;\n      } else if (isObject(Constructor)) {\n        Constructor = Constructor[SPECIES];\n        if (Constructor === null) Constructor = undefined;\n      }\n      if (Constructor === Array || Constructor === undefined) {\n        return nativeSlice.call(O, k, fin);\n      }\n    }\n    result = new (Constructor === undefined ? Array : Constructor)(max(fin - k, 0));\n    for (n = 0; k < fin; k++, n++) if (k in O) createProperty(result, n, O[k]);\n    result.length = n;\n    return result;\n  }\n});\n","// iterable DOM collections\n// flag - `iterable` interface - 'entries', 'keys', 'values', 'forEach' methods\nmodule.exports = {\n  CSSRuleList: 0,\n  CSSStyleDeclaration: 0,\n  CSSValueList: 0,\n  ClientRectList: 0,\n  DOMRectList: 0,\n  DOMStringList: 0,\n  DOMTokenList: 1,\n  DataTransferItemList: 0,\n  FileList: 0,\n  HTMLAllCollection: 0,\n  HTMLCollection: 0,\n  HTMLFormElement: 0,\n  HTMLSelectElement: 0,\n  MediaList: 0,\n  MimeTypeArray: 0,\n  NamedNodeMap: 0,\n  NodeList: 1,\n  PaintRequestList: 0,\n  Plugin: 0,\n  PluginArray: 0,\n  SVGLengthList: 0,\n  SVGNumberList: 0,\n  SVGPathSegList: 0,\n  SVGPointList: 0,\n  SVGStringList: 0,\n  SVGTransformList: 0,\n  SourceBufferList: 0,\n  StyleSheetList: 0,\n  TextTrackCueList: 0,\n  TextTrackList: 0,\n  TouchList: 0\n};\n"],"sourceRoot":""}