(function(t){function o(o){for(var n,s,a=o[0],u=o[1],c=o[2],f=0,p=[];f<a.length;f++)s=a[f],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&p.push(r[s][0]),r[s]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(t[n]=u[n]);h&&h(o);while(p.length)p.shift()();return i.push.apply(i,c||[]),e()}function e(){for(var t,o=0;o<i.length;o++){for(var e=i[o],n=!0,a=1;a<e.length;a++){var u=e[a];0!==r[u]&&(n=!1)}n&&(i.splice(o--,1),t=s(s.s=e[0]))}return t}var n={},r={app:0},i=[];function s(o){if(n[o])return n[o].exports;var e=n[o]={i:o,l:!1,exports:{}};return t[o].call(e.exports,e,e.exports,s),e.l=!0,e.exports}s.m=t,s.c=n,s.d=function(t,o,e){s.o(t,o)||Object.defineProperty(t,o,{enumerable:!0,get:e})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,o){if(1&o&&(t=s(t)),8&o)return t;if(4&o&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(s.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&o&&"string"!=typeof t)for(var n in t)s.d(e,n,function(o){return t[o]}.bind(null,n));return e},s.n=function(t){var o=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(o,"a",o),o},s.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)},s.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],u=a.push.bind(a);a.push=o,a=a.slice();for(var c=0;c<a.length;c++)o(a[c]);var h=u;i.push([0,"chunk-vendors"]),e()})({0:function(t,o,e){t.exports=e("56d7")},"0ae7":function(t,o,e){},"0bc0":function(t,o,e){"use strict";e("d205")},"56d7":function(t,o,e){"use strict";e.r(o);e("e260"),e("e6cf"),e("cca6"),e("a79d");var n=e("7a23");function r(t,o,e,r,i,s){var a=Object(n["e"])("chessboard");return Object(n["d"])(),Object(n["b"])(a)}var i={class:"blue merida"},s={ref:"board",class:"cg-board-wrap"},a=Object(n["c"])("br",null,null,-1);function u(t,o,e,r,u,c){return Object(n["d"])(),Object(n["b"])("div",i,[Object(n["c"])("div",s,null,512),a])}e("4de4"),e("4160"),e("caad"),e("c975"),e("a15b"),e("d81d"),e("4ec9"),e("d3b7"),e("ac1f"),e("2532"),e("3ca3"),e("1276"),e("159b"),e("ddb0");var c=e("b85c"),h=e("c5ad"),f=e.n(h),p=e("0a8e"),l={name:"chessboard",data:function(){return{fen:this.fen_prop,free:this.free_prop,showThreats:this.showThreats_prop,onPromotion:this.onPromotion_prop,orientation:this.orientation_prop}},props:{fen_prop:{type:String,default:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR"},free_prop:{type:Boolean,default:!1},showThreats_prop:{type:Boolean,default:!1},onPromotion_prop:{type:Function,default:function(){return"q"}},orientation_prop:{type:String,default:"white"}},watch:{fen:function(){this.loadPosition()},orientation:function(){this.loadPosition()},showThreats:function(){this.showThreats&&this.paintThreats()}},methods:{possibleMoves:function(){var t=this,o=new Map;return this.game.SQUARES.forEach((function(e){var n=t.game.moves({square:e,verbose:!0});n.length&&o.set(e,n.map((function(t){return t.to})))})),o},opponentMoves:function(){var t=this.game.pgn(),o=this.game.fen().split(" ");o[1]="w"===o[1]?"b":"w",o=o.join(" ");var e=this.game.load(o);if(e){var n=this.game.moves({verbose:!0});return this.game.load_pgn(t),n}return[]},toColor:function(){return"w"===this.game.turn()?"white":"black"},paintThreats:function(){var t=this.game.moves({verbose:!0}),o=[];t.forEach((function(t){o.push({orig:t.to,brush:"yellow"}),t["captured"]&&o.push({orig:t.from,dest:t.to,brush:"red"}),t["san"].includes("+")&&o.push({orig:t.from,dest:t.to,brush:"blue"})})),this.board.setShapes(o)},calculatePromotion:function(){var t=this.game.moves({verbose:!0});this.promotions=[];var o,e=Object(c["a"])(t);try{for(e.s();!(o=e.n()).done;){var n=o.value;n.promotion&&this.promotions.push(n)}}catch(r){e.e(r)}finally{e.f()}},isPromotion:function(t,o){var e=this.promotions.filter((function(e){return e.from===t&&e.to===o}));return e.length>0},changeTurn:function(){var t=this;return function(o,e){t.isPromotion(o,e)&&(t.promoteTo=t.onPromotion()),t.game.move({from:o,to:e,promotion:t.promoteTo}),t.board.set({fen:t.game.fen(),turnColor:t.toColor(),movable:{color:t.toColor(),dests:t.possibleMoves()}}),t.calculatePromotion(),t.afterMove()}},afterMove:function(){this.showThreats&&this.pointThreats();var t=this.countThreats(this.toColor())||{};t["history"]=this.game.history(),t["fen"]=this.game.fen(),this.$emit("onMove",t)},countThreats:function(t){var o={},e=0,n=0,r=this.game.moves({verbose:!0});return t!==this.toColor()&&(r=this.opponentMoves()),0===r.length?null:(r.forEach((function(t){t["captured"]&&e++,t["san"].includes("+")&&n++})),o["legal_".concat(t)]=this.uniques(r.map((function(t){return t.from+t.to}))).length,o["checks_".concat(t)]=n,o["threat_".concat(t)]=e,o["turn"]=t,o)},uniques:function(t){var o=t.filter((function(t,o,e){return o===e.indexOf(t)}));return o},loadPosition:function(){this.game.load(this.fen),this.board=Object(p["Chessground"])(this.$refs.board,{fen:this.game.fen(),turnColor:this.toColor(),movable:{color:this.toColor(),free:this.free,dests:this.possibleMoves()},orientation:this.orientation}),this.board.set({movable:{events:{after:this.changeTurn()}}}),this.afterMove()}},mounted:function(){this.loadPosition()},created:function(){this.game=new f.a,this.board=null,this.promotions=[],this.promoteTo="q"}};e("8f71");l.render=u;var d=l,b={name:"App",components:{chessboard:d}};e("0bc0");b.render=r;var m=b;Object(n["a"])(m).mount("#app")},"8f71":function(t,o,e){"use strict";e("0ae7")},d205:function(t,o,e){}});
//# sourceMappingURL=app.90316f02.js.map